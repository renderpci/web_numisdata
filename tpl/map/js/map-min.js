"use strict";var map={form_container:null,rows_container:null,map_container:null,map_factory_instance:null,map_global_data:null,form:null,forn_node:null,set_up:function(e){console.log("--\x3e map set_up options:",e);const o=this;o.form_container=e.form_container,o.map_container=e.map_container,o.rows_container=e.rows_container;o.map_factory_instance=o.map_factory_instance||new map_factory,o.map_factory_instance.init({map_container:o.map_container,map_position:null,popup_builder:page.map_popup_builder,popup_options:page.maps_config.popup_options,source_maps:[{name:"DARE",url:"//dh.gu.se/tiles/imperium/{z}/{x}/{y}.png",options:{maxZoom:11}},{name:"OSM",url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19}},{name:"Map Tiles",url:"https://api.maptiler.com/maps/basic/256/{z}/{x}/{y}@2x.png?key=udlBrEEE2SPm1In5dCNb",options:{maxZoom:20},default:!0},{name:"ARCGIS",url:"//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{}}]});const n={dedalo_get:"records",db_name:page_globals.WEB_DB,lang:page_globals.WEB_CURRENT_LANG_CODE,table:"map_global",ar_fields:"*",sql_filter:null,limit:0,count:!1,offset:0,order:null};return data_manager.request({body:n}).then(e=>{console.log("--- search_rows API response:",e),e.result&&(o.map_global_data=page.parse_map_global_data(e.result),o.map_factory_instance.parse_data_to_map(o.map_global_data,"caller_mode"))}),o.form=new form_factory,o.form_node=o.render_form(),o.form_container.appendChild(o.form_node),!0},render_form:function(){const e=this,o=new DocumentFragment,n=common.create_dom_element({element_type:"div",class_name:"form-row fields",parent:o});e.form.item_factory({id:"section_id",name:"section_id",label:tstring.is||"ID",q_column:"section_id",eq:"=",eq_in:"",eq_out:"",parent:n}),e.form.item_factory({id:"collection",name:"collection",label:tstring.collection||"collection",q_column:"collection",eq:"LIKE",eq_in:"%",eq_out:"%",parent:n,callback:function(o){e.form.activate_autocomplete({form_item:o,table:"coins"})}}),e.form.item_factory({id:"public_info",name:"public_info",label:tstring.public_info||"public_info",q_column:"public_info",eq:"LIKE",eq_in:"%",eq_out:"%",parent:n,callback:function(o){e.form.activate_autocomplete({form_item:o,table:"coins"})}}),e.form.item_factory({id:"mint",name:"mint",label:tstring.mint||"mint",q_column:"mint",eq:"LIKE",eq_in:"%",eq_out:"%",parent:n,callback:function(o){e.form.activate_autocomplete({form_item:o,table:"coins"})}});const t=common.create_dom_element({element_type:"div",class_name:"form-group field button_submit",parent:o});common.create_dom_element({element_type:"input",type:"submit",id:"submit",value:tstring.search||"Search",class_name:"btn btn-light btn-block primary",parent:t}).addEventListener("click",(function(o){o.preventDefault(),e.form_submit()}));const a=e.form.build_operators_node();o.appendChild(a);const r=common.create_dom_element({element_type:"form",id:"search_form",class_name:"form-inline"});return r.appendChild(o),r},form_submit:function(){const e=this,o=e.form_node;if(!o)return new Promise((function(e){console.error("Error on submit. Invalid form_node.",o),e(!1)}));e.rows_container;e.map_container.classList.add("loading")}};