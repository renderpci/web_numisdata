{"version":3,"sources":["tpl_common.js"],"names":["tpl_common","export_data_json","export_data_csv","t","_t","obverse_image","reverse_image","section_id","site","findspot","type_of_site","weight","collection","funds","bibliographic_ref","info","catalogue","catalogue_number","authority","mint","start_date","end_date","obverse_legend","obverse_design","obverse_symbol","reverse_legend","reverse_design","reverse_symbol","denomination","chronology","material","material_links","diameter","axis","_defineProperty","setup","$","colorbox","rel","previous","next","draw_rows","options","SHOW_DEBUG","console","log","self","this","container","document","getElementById","target","ar_rows","hasChildNodes","removeChild","lastChild","total_tipos","length","total_monedas","ar_rows_length","i","tipo_object","group_container","common","create_dom_element","element_type","parent","class_name","draw_row_tipo","monedas","monedas_wrapper","monedas_len","j","moneda_obj","draw_row_moneda","tipos_text","tstring","tipos","monedas_text","total_info","id","addEventListener","e","toggle_tipos","inner_html","toggle_monedas","pagination","querySelector","total","prepend","page_nodes_data","paginator","build_page_nodes","limit","offset","build_paginator_html","catalogo","search_rows","pagination_footer","pagination_clone","cloneNode","appendChild","paginator_click_event","ar_coins","filter","element","data_ref","ar_types","exclue_add","ar_coins_length","row","types","type_id","forEach","current_type","type_key","indexOf","hasOwnProperty","download_buttons_wrapper","button_download_json","build_download_data_link","obj_to_save","data_type","file_name","button_download_csv","links","querySelectorAll","activate_tooltips","moneda_wrapper","row_data_json","JSON","parse","row_data","row_container","window","open","imagen_anverso","bg_image","image","bg_image2","build_thumb_url","style","backgroundImage","big_image_url","build_quality_image_url","imagen_reverso","right_block","coleccion","line","numero","text_content","hallazgo","peso","peso_label","replace","bibliografia","info_publica","to_export_data_json","tipo_container","tipo_header_wrapper","info_string","autoridad","autoridad_nombre","ceca_text","ceca_info","ceca_value","ceca_links","split","a","setAttribute","add_tool_tip","denominacion","denominacion_info","denominacion_value","denominacion_iri","fecha_inicio","fecha_info","fecha","fecha_fin","build_detail","warn","detail_container","left_detail","thumb_url","imagen_anverso_big","link","stopPropagation","html","transition","speed","imagen_reverso_big","classList","contains","click","right_detail","line_coleccion","hallazgo_detail","yacimiento","site_geo_lat","site_geo_lon","hallazgo_dato","extract_geo","tipologia","tipo_de_yacimiento","municipio","localizacion","hallazgo_localizacion","ceca_detail","ceca","remove_string_double_values","cronologia","cronologia_title","autoridad_info_string","nombre","autoridad_dato","uri","autoridad_rol","rol","clean_data_string","medida_detail","diametro","cuno","anverso_detail","anverso","leyenda_anverso","leyenda","value","replace_dedalo_paths","leyenda_anverso_transcripcion","tipo_anverso","diseno","simbolo_anverso","simbolo","leyenda_reverso","tipo_reverso","simbolo_reverso","reverso_detail","reverso","leyenda_reverso_transcripcion","biblio_detail","fondo","bibliografia_info_full","bibliografia_ref","bi","current","bibliografia_paginas","bibliografia_info_text","push","join","publicaciones","bibliografia_title","autoria","titulo","fecha_publicacion","bibliography","notas","uri_detail","refeferencia_bibliografica","ar_catalogo_text","numero_catalogo","tipo_info","clean_string","catalogo_dato","publicacion","equivalentes","equivalentes_div","equivalentes_catalogo_dato","ar_equivalentes","item","item_parts","ar_beats","slice","span","equivalentes_value","equivalents","div_uri","href","data_string","separator","arguments","undefined","ar_data","ar_data_clean","result","text","trim","type","geo_value","ar_place","lugar","layer_data","open_detail","button_obj","image_path","width","height","w","h","pop","quality","element_options","data_set","dataset","custom_function_events","title_label","text_node","draggable","download","createElement","className","key","title","len","function_name","name","event_type","function_arguments","create_custom_events","textContent","el","innerHTML","ar_elements","ar_unique","toggle","load_snippet","snippet_name","target_id","trigger_url","page_globals","__WEB_TEMPLATE_WEB__","trigger_vars","mode","get_json_data","then","response","target_obj","mime_type","data","csv","convert_json_to_csv","Blob","stringify","URL","createObjectURL","link_obj","json_obj","json","Array","isArray","fields","Object","keys","replacer","map","fieldName","current_value","unshift","row_object","export_obj","data_source_org","data_source_url","data_lang","WEB_CURRENT_LANG_CODE","goto_url","wrapper_ul","ar_nodes","ar_nodes_length","node","label","active","selected","offset_value","parentNode","search_form","js_promise","search","scrollIntoView","behavior","block","inline","elements","each","Tooltip","placement","val","extractLast","term"],"mappings":"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","sourcesContent":["\"use strict\";\n\n\n\nvar tpl_common = {\n\n\n\texport_data_json : [],\n\texport_data_csv  : [],\n\n\n\tt : {\n\t\tobverse_image \t \t: \"Obverse image\",\n\t\treverse_image \t \t: \"Reverse image\",\n\t\tsection_id \t\t \t: \"ID\",\n\t\tsite \t\t\t\t: \"Site\",\n\t\tfindspot \t\t \t: \"Findspot\",\n\t\ttype_of_site \t\t: \"Type of site\",\n\t\tweight \t\t\t \t: \"Weight\",\n\t\tcollection \t\t \t: \"Collection\",\n\t\tfunds \t\t\t \t: \"Funds\",\n\t\tbibliographic_ref \t: \"Bibliographic ref\",\n\t\tinfo \t\t\t\t: \"Info\",\n\t\tcatalogue \t\t\t: \"Catalogue\",\n\t\tcatalogue_number \t: \"Catalogue number\",\n\t\tauthority \t\t\t: \"Authority\",\n\t\tmint \t\t\t\t: \"Mint\",\n\t\tstart_date \t\t\t: \"Start date\",\n\t\tend_date \t\t\t: \"End date\",\n\t\tobverse_legend \t\t: \"Obverse legend\",\n\t\tobverse_design \t\t: \"Obverse design\",\n\t\tobverse_symbol \t\t: \"Obverse symbol\",\n\t\treverse_legend \t\t: \"Reverse legend\",\n\t\treverse_design \t\t: \"Reverse design\",\n\t\treverse_symbol \t\t: \"Reverse symbol\",\n\t\tdenomination \t\t: \"Denomination\",\n\t\tchronology \t\t\t: \"Chronology\",\n\t\tmaterial \t\t\t: \"Material\",\n\t\tmaterial_links \t\t: \"Material links\",\n\t\tdiameter \t\t\t: \"Diameter\",\n\t\taxis \t\t\t\t: \"Axis\",\n\t\tfunds \t\t\t\t: \"Funds\",\n\t\tbibliography \t\t: \"Bibliography\",\n\t\tequivalents \t\t: \"Equivalents\",\n\t\turi \t\t\t\t: \"URI\",\n\t\tsite_geo_lat \t\t: \"Site GEO lat\",\n\t\tsite_geo_lon \t\t: \"Site GEO lon\",\n\t},\n\t\n\n\t/**\n\t* SETUP\n\t*/\n\tsetup : function() {\n\n\t\tconst self = this\n\t\t\n\t\t// window.ready(function(){\n\t\t// \tself.fix_body_height()\n\t\t// \t//$(\".colorbox\").colorbox({rel:'group1',width:\"80%\", height:\"80%\"});\n\t\t// })\n\t\t// window.addEventListener(\"resize\", self.fix_body_height, false)\t\n\t\t\n\t\t// Activate tooltips for elements with dataset toggle = tooltip\n\t\t// $(function () {\n\t\t//   $('[data-toggle=\"tooltip\"]').tooltip()\n\t\t// })\n\n\t\t// Activate images onclick gallery\n\t\t$('a.gallery').colorbox({\n\t\t\trel \t : 'gal',\n\t\t\tprevious : \" < \",\n\t\t\tnext \t : \" > \"\n\t\t});\n\n\t\t\n\t\treturn true\n\t},//end setup\n\n\n\n\t/**\n\t* DRAW_ROWS\n\t*/\n\tdraw_rows : function(options) {\n\n\t\tif(SHOW_DEBUG===true) {\n\t\t\tconsole.log(\"draw_rows - options:\",options);\n\t\t}\n\t\t\n\t\tconst self = this\n\t\n\t\tconst container = document.getElementById(options.target)\n\t\tconst ar_rows \t= options.ar_rows\t\t\n\t\t\n\t\t// clean container div \n\t\t\twhile (container.hasChildNodes()) {\n\t\t\t\tcontainer.removeChild(container.lastChild);\n\t\t\t}\n\n\t\t// reset vars \n\t\t\tself.export_data_json = []\n\t\t\tself.export_data_csv  = []\n\n\t\t// total records info \n\t\t\tvar total_tipos \t= ar_rows.length\n\t\t\tvar total_monedas \t= 0\t\t\n\t\n\t\t// iterate ar_rows \n\t\t\tconst ar_rows_length = ar_rows.length\n\t\t\tfor (var i = 0; i < ar_rows_length; i++) {\n\t\t\n\t\t\t\t// Build dom row\n\t\t\t\t//var row = self.build_row(ar_rows[i])\n\t\t\t\t// Add to container\n\t\t\t\t//target.appendChild(row)\n\n\t\t\t\tvar tipo_object = ar_rows[i]\n\n\t\t\t\t// group container\n\t\t\t\t\tvar group_container = common.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tparent \t\t\t: container,\n\t\t\t\t\t\t\tclass_name \t\t: \"group_container\"\n\t\t\t\t\t\t})\n\n\t\t\t\t// tipo. Append row_tipo header to container\n\t\t\t\t\ttpl_common.draw_row_tipo(tipo_object, group_container)\n\n\t\t\t\t// monedas\n\t\t\t\t\tif (tipo_object.monedas) {\n\t\t\t\t\t\t// Monedas (fichero)\n\t\t\t\t\t\tvar monedas_wrapper = common.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tparent \t\t\t: group_container,\n\t\t\t\t\t\t\tclass_name \t\t: \"monedas_wrapper\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar monedas_len = tipo_object.monedas.length\n\t\t\t\t\t\tfor (var j = 0; j < monedas_len; j++) {\n\n\t\t\t\t\t\t\tvar moneda_obj = tipo_object.monedas[j]\n\n\t\t\t\t\t\t\t// Add the self tipo data as property\n\t\t\t\t\t\t\tmoneda_obj.tipo_object = tipo_object\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t//var moneda_row = common.build_row(moneda_obj)\n\t\t\t\t\t\t\t//monedas_wrapper.appendChild(moneda_row)\n\t\t\t\t\t\t\tself.draw_row_moneda(moneda_obj, monedas_wrapper)\n\n\t\t\t\t\t\t\ttotal_monedas++\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t}//end for (var i = 0; i < len; i++)\n\n\t\t// totals info \n\t\t\tvar tipos_text \t = tstring.tipos   || \"Tipos\"\n\t\t\tvar monedas_text = tstring.monedas || \"Monedas\"\n\t\t\tvar total_info \t = self.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tid   \t\t\t: \"total_records\",\n\t\t\t\t//inner_html \t\t: tipos_text + \": \" + total_tipos + \" - \" + monedas_text + \": \" + total_monedas,\n\t\t\t\t//parent \t\t\t: container\n\t\t\t})\n\n\t\t\t// icon tipos\n\t\t\t\tvar icon_tipos = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"i\",\n\t\t\t\t\tclass_name \t\t: \"fa fas fa-eye\",\n\t\t\t\t\tparent \t\t\t: total_info\n\t\t\t\t})\n\t\t\t\ticon_tipos.addEventListener(\"click\",function(e){ self.toggle_tipos() })\n\t\t\t\tvar text_tipos = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\tinner_html \t\t: tipos_text + \": \" + total_tipos + \"\",\n\t\t\t\t\tparent \t\t\t: total_info\n\t\t\t\t})\n\t\t\t\n\t\t\t// icon monedas\t\n\t\t\t\tvar icon_monedas  = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"i\",\n\t\t\t\t\tclass_name \t\t: \"fa fas fa-eye\",\n\t\t\t\t\tparent \t\t\t: total_info\n\t\t\t\t})\n\t\t\t\ticon_monedas.addEventListener(\"click\",function(e){ self.toggle_monedas() })\n\t\t\t\tvar text_monedas = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\tinner_html \t\t: monedas_text + \": \" + total_monedas,\n\t\t\t\t\tparent \t\t\t: total_info\n\t\t\t\t})\n\n\t\t\t// pagination clean\n\t\t\t\tconst pagination = document.querySelector(\".pagination\")\n\t\t\t\tif (pagination) {\n\t\t\t\t\t// clean content\n\t\t\t\t\twhile (pagination.hasChildNodes()) {\n\t\t\t\t\t\tpagination.removeChild(pagination.lastChild);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t// total records\n\t\t\t\tif (options.total) {\n\n\n\n\t\t\t\t\t// total_records info\n\t\t\t\t\t//\tconst total_records  = self.create_dom_element({\n\t\t\t\t\t//\t\telement_type \t: \"div\",\n\t\t\t\t\t//\t\tclass_name \t\t: \"total_records_info\",\n\t\t\t\t\t//\t\tinner_html \t\t: (tstring.total || \"Total\") +\": \"+ options.total,\n\t\t\t\t\t//\t\tparent \t\t\t: total_info\n\t\t\t\t\t//\t})\n\t\t\t\t\t\t\n\n\t\t\t\t\t// catalogo_rows_list\n\t\t\t\t\t\tconst catalogo_rows_list = document.getElementById(\"catalogo_rows_list\")\n\t\t\t\t\t\t\t  //catalogo_rows_list.prepend(total_info.cloneNode(true))\n\t\t\t\t\t\t\t  catalogo_rows_list.prepend(total_info)\n\t\t\t\t\t\t//$('#total_records').clone(true).prependTo('#catalogo_rows_list')\n\n\t\t\t\t\t// paginator \n\t\t\t\t\t\t//const pagination = document.querySelector(\".pagination\")\n\t\t\t\t\t\tif (pagination) {\n\t\t\t\t\t\t//\t// clean content\n\t\t\t\t\t\t//\t\twhile (pagination.hasChildNodes()) {\n\t\t\t\t\t\t//\t\t\tpagination.removeChild(pagination.lastChild);\n\t\t\t\t\t\t//\t\t}\n\t\t\t\t\t\t\tconst page_nodes_data = paginator.build_page_nodes(options.total, options.limit, options.offset, 10)\n\t\t\t\t\t\t\tself.build_paginator_html(page_nodes_data, pagination, catalogo.search_rows) // goto_url\n\n\t\t\t\t\t\t\t// total_records info\n\t\t\t\t\t\t\t\tconst total_records  = self.create_dom_element({\n\t\t\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\t\t\tclass_name \t\t: \"total_records_info\",\n\t\t\t\t\t\t\t\t\tinner_html \t\t: (tstring.total || \"Total\") +\": \"+ options.total + \" \" + tstring.tipos,\n\t\t\t\t\t\t\t\t\tparent \t\t\t: pagination\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// pagination_footer \t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconst \tpagination_footer = document.querySelector(\".pagination_footer\")\n\t\t\t\t\t\t\t\t\t\twhile (pagination_footer.hasChildNodes()) {\n\t\t\t\t\t\t\t\t\t\t\tpagination_footer.removeChild(pagination_footer.lastChild);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tconst \tpagination_clone  = pagination.cloneNode(true);\n\t\t\t\t\t\t\t\t\t\tpagination_footer.appendChild(pagination_clone)\n\n\t\t\t\t\t\t\t\t// event delegation \n\t\t\t\t\t\t\t\t\tpagination_clone.addEventListener('click', self.paginator_click_event);\n\t\t\t\t\t\t}\n\t\t\t\t}\t\t\t\n\t\t\t\t\n\n\t\t// download buttons \n\t\t\tvar clean_ar_rows  = []\n\n\t\t\tvar ar_coins = self.export_data_json.filter(element => element.data_ref===\"coin\")\n\t\t\tvar ar_types = self.export_data_json.filter(element => element.data_ref===\"type\")\n\t\t\t// Already properties defined in coins (avoid duplicate when merge with type properties)\n\t\t\tvar exclue_add = [\n\t\t\t\t\"data_ref\",\n\t\t\t\t\"type_id\",\n\t\t\t\t\"data_lang\",\n\t\t\t\t\"data_source_url\",\n\t\t\t\t\"data_source_org\"\n\t\t\t]\n\t\t\tvar ar_coins_length = ar_coins.length\n\t\t\tfor (var i = 0; i < ar_coins_length; i++) {\n\n\t\t\t\tvar row = ar_coins[i]\n\t\t\t\t\n\t\t\t\tif (row.types && row.types.length>0) {\n\t\t\t\t\tvar type_id = row.types[0]\n\t\t\t\t\tvar match_types = ar_types.filter(element => element.type_id===type_id)\n\t\t\t\t\tmatch_types.forEach(function(current_type) {\n\t\t\t\t\t\tfor (var type_key in current_type) {\n\t\t\t\t\t\t\tif(exclue_add.indexOf(type_key) !== -1) continue;\n\n\t\t\t\t\t\t\tif (row.hasOwnProperty(type_key)) {\n\t\t\t\t\t\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"Warning: type property is already used by coin (IGNORED!) \",type_key)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Add type property to coin\n\t\t\t\t\t\t\t\t//row[\"Type \" + type_key] = current_type[type_key]\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t// Add type property to coin\n\t\t\t\t\t\t\t\trow[type_key] = current_type[type_key]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\t// download buttons wrapper\n\t\t\t\tvar download_buttons_wrapper = common.create_dom_element({\n\t\t\t\t\telement_type : \"div\",\n\t\t\t\t\tclass_name   : \"download_buttons_wrapper\",\n\t\t\t\t\tparent \t\t : \tcontainer\n\t\t\t\t})\t\t\n\t\t\t\n\t\t\t\t// download json\n\t\t\t\t\tvar button_download_json = self.build_download_data_link({\n\t\t\t\t\t\tobj_to_save : ar_coins,\n\t\t\t\t\t\tdata_type \t: 'json',\n\t\t\t\t\t\tfile_name \t: \"numisdata_valencia_list\"  + \".json\"\n\t\t\t\t\t})\n\t\t\t\t\tdownload_buttons_wrapper.appendChild(button_download_json)\n\t\t\t\t\n\t\t\t\t// download csv\n\t\t\t\t\tvar button_download_csv = self.build_download_data_link({\n\t\t\t\t\t\tobj_to_save : ar_coins,\n\t\t\t\t\t\tdata_type \t: 'csv',\n\t\t\t\t\t\tfile_name \t: \"numisdata_valencia_list\" + \".csv\"\n\t\t\t\t\t})\n\t\t\t\t\tdownload_buttons_wrapper.appendChild(button_download_csv)\n\n\n\t\t// tooltips\n\t\t\tconst links = container.querySelectorAll('.show_tooltip')\n\t\t\tself.activate_tooltips(links)\n\n\n\t\treturn true\n\t},//end draw_rows\n\n\n\n\t/**\n\t* DRAW_ROW_MONEDA\n\t* Draw ONE moneda row\n\t* Build DOM objects from json data\n\t*/\n\tdraw_row_moneda : function(moneda_obj, moneda_wrapper) {\n\t\t\n\t\tconst self = this\n\t\tvar t \t = self.t\n\n\t\tvar row_data_json = {\n\t\t\t\"data_ref\" : \"coin\",\n\t\t\t\"types\"    : JSON.parse(moneda_obj.tipos)\n\t\t}\t\t\n\n\t\tvar row_data = moneda_obj\n\t\tif(SHOW_DEBUG===true) {\n\t\t\t//console.log(\"row_data:\",row_data);;\n\t\t}\n\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.section_id] = row_data.section_id || ''\n\t\n\t\tvar row_container = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"row_container\",\n\t\t\tparent \t\t\t: moneda_wrapper\n\t\t})\n\t\trow_container.addEventListener(\"click\",function(){\n\t\t\t//self.open_detail(this, row_data)\n\t\t\twindow.open(\"mon/\" + moneda_obj.section_id, '_blank')\n\t\t},false)\t\t\n\n\t\t// imagen_anverso\n\t\t\tvar imagen_anverso = self.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tclass_name   \t: \"imagen_anverso\",\n\t\t\t\tparent \t\t\t: row_container\n\t\t\t\t})\n\t\t\t\tvar bg_image = typeof(row_data.imagen_anverso[0])!==\"undefined\" ? row_data.imagen_anverso[0].image : null\n\t\t\t\tif (bg_image) {\n\t\t\t\t\tvar bg_image2 = self.build_thumb_url(bg_image)\n\t\t\t\t\timagen_anverso.style.backgroundImage = \"url(\"+bg_image2+\")\"\n\t\t\t\t\t// For data_json\n\t\t\t\t\t// bg_image = bg_image.replace('/dedalo/media/','/valencia/media/')\n\t\t\t\t\tvar big_image_url = self.build_quality_image_url(bg_image, 'original')\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.obverse_image] = big_image_url\n\n\t\t// imagen_reverso\n\t\t\tvar imagen_reverso = self.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tclass_name   \t: \"imagen_reverso\",\n\t\t\t\tparent \t\t\t: row_container\n\t\t\t\t})\n\t\t\t\tvar bg_image = typeof(row_data.imagen_reverso[0])!==\"undefined\" ? row_data.imagen_reverso[0].image : null\n\t\t\t\tif (bg_image) {\n\t\t\t\t\t//bg_image = bg_image.replace('/1.5MB/','/thumb/')\n\t\t\t\t\tvar bg_image2 = self.build_thumb_url(bg_image)\n\t\t\t\t\timagen_reverso.style.backgroundImage = \"url(\"+bg_image2+\")\"\n\t\t\t\t\t// For data_json\n\t\t\t\t\t// bg_image = bg_image.replace('/dedalo/media/','/valencia/media/')\n\t\t\t\t\tvar big_image_url = self.build_quality_image_url(bg_image, 'original')\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.reverse_image] = big_image_url \n\n\t\t// right_block\n\t\t\tvar right_block = self.create_dom_element({ element_type : \"div\", class_name : \"right_block\", parent : row_container })\n\n\t\t\t\t// section_id\n\t\t\t\t\t/*\n\t\t\t\t\tif (row_data.section_id) {\n\t\t\t\t\t\tvar section_id = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"section_id\",\n\t\t\t\t\t\t\ttext_content \t: row_data.section_id,\n\t\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t\t})\t\t\t\t\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\n\t\t\t\t// coleccion \n\t\t\t\t\tif (row_data.coleccion) {\n\t\t\t\t\t\tlet line = row_data.coleccion\n\t\t\t\t\t\tif (row_data.numero) {\n\t\t\t\t\t\t\tline += \" | \" + row_data.numero\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar coleccion = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"section_id\",\n\t\t\t\t\t\t\ttext_content \t: line,\n\t\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.collection] = row_data.coleccion || ''\n\n\n\t\t\t\t// hallazgo\n\t\t\t\tif (row_data.hallazgo) {\n\t\t\t\t\tvar hallazgo = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"hallazgo\",\n\t\t\t\t\t\ttext_content \t: row_data.hallazgo,\n\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t})\t\t\t\t\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.site] = row_data.hallazgo || ''\n\t\t\n\t\t\t\t// peso\n\t\t\t\tif (row_data.peso) {\t\t\t\t\t\n\t\t\t\t\tvar peso_label = row_data.peso ? row_data.peso.replace('.', ',')  + \" g\" : \"\"\n\t\t\t\t\tvar peso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"peso\",\n\t\t\t\t\t\ttext_content \t: peso_label,\n\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t})\t\t\t\t\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.weight] = row_data.peso ? row_data.peso.replace('.', ',') : \"\"\t\t\t\n\n\t\t\t\t// fondo \n\t\t\t\t\t/*\t\t\n\t\t\t\t\tif (row_data.fondo) {\n\t\t\t\t\t\tvar fondo = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"fondo\",\n\t\t\t\t\t\t\ttext_content \t: row_data.fondo,\n\t\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.funds] = row_data.fondo || ''\n\t\t\t\t\t*/\n\n\t\t\t\t// bibliografia\t\t\t\n\t\t\t\t\tif (row_data.bibliografia) {\n\t\t\t\t\t\tvar bibliografia = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"bibliografia\",\n\t\t\t\t\t\t\ttext_content \t: row_data.bibliografia,\n\t\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.bibliographic_ref] = row_data.bibliografia || ''\n\n\t\t\t\t// info_publica\n\t\t\t\t\tif (row_data.info_publica) {\n\t\t\t\t\t\tvar info_publica = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"info_publica\",\n\t\t\t\t\t\t\tinner_html \t \t: row_data.info_publica,\n\t\t\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.info] = row_data.info_publica || ''\n\t\t\n\n\t\t// Add to texport_data_json\n\t\tself.to_export_data_json(row_data_json)\t\t\t\n\n\n\t\treturn true\n\t},//end draw_row_moneda\n\n\n\n\t/**\n\t* DRAW_ROW_TIPO\n\t* Draw ONE tipo row\n\t* Build DOM objects from json data\n\t*/\n\tdraw_row_tipo : function(tipo_object, tipo_container) {\n\n\t\tconst self = this\n\t\tvar t \t = self.t\n\t\n\t\tvar row_data_json = {\n\t\t\t\"data_ref\" \t: \"type\",\n\t\t\t\"type_id\" \t: tipo_object.section_id\n\t\t}\n\n\t\tvar tipo_header_wrapper = common.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name \t\t: \"tipo_header_wrapper heading\",\n\t\t\tparent \t\t\t: tipo_container\n\t\t})\n\t\n\t\t// Title (catalogo, autoridad, numero_catalogo)\n\t\t\t/*\n\t\t\tif (tipo_object.catalogo) {\n\t\t\t\tvar t_catalogo \t\t\t= tipo_object.catalogo || ''\n\t\t\t\t\n\t\t\t\tvar catalogo = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"h1\",\n\t\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\t\ttext_content \t: t_catalogo,\n\t\t\t\t\tclass_name \t\t: \"show_tooltip\",\n\t\t\t\t\tdata_set \t\t: {\n\t\t\t\t\t\tsection_id  : tipo_object.section_id\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\t// console.log(\"tipo_object.catalogo_dato:\",tipo_object.catalogo_dato);\n\t\t\t\tif (tipo_object.catalogo_dato && tipo_object.catalogo_dato.length>0) {\n\t\t\t\t\tvar ar_title = []\n\t\t\t\t\ttipo_object.catalogo_dato.forEach(function(element){\n\t\t\t\t\t\tar_title.push(element.publicacion)\n\t\t\t\t\t})\n\t\t\t\t\tif (ar_title.length>0) {\n\t\t\t\t\t\tcatalogo.title = ar_title.join(\", \")\n\t\t\t\t\t\tself.add_tool_tip(catalogo)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.catalogue] = tipo_object.catalogo || ''\n\t\t\t*/\n\n\n\t\tvar info_string = ''\n\n\t\t// Numero catlogo\n\t\t\t/*\n\t\t\tvar t_numero_catalogo \t= tipo_object.numero_catalogo || ''\n\t\t\tif (t_numero_catalogo.length>0) {\n\t\t\t\tinfo_string += \" \" + t_numero_catalogo\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.catalogue_number] = tipo_object.numero_catalogo || ''\n\t\t\t*/\n\t\t\n\t\n\t\t// Autoridad \n\t\t\tif (tipo_object.autoridad) {\n\t\t\t\tvar autoridad_nombre = tipo_object.autoridad\n\t\t\t\t\t//autoridad_nombre = autoridad_nombre.replace('|', ' ')\n\t\t\t\t\tautoridad_nombre = autoridad_nombre.replace(',', ', ') // Add space between names separated with comma\n\t\t\t\t\t//autoridad_nombre = autoridad_nombre.replace(/^(.*) \\|$/g, \"\");\n\t\t\t\tinfo_string += \" \" + autoridad_nombre\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.authority] = (typeof autoridad_nombre!==\"undefined\") ? autoridad_nombre : ''\n\n\t\t\n\t\t// info_string\n\t\t\tif (tipo_object.autoridad) {\n\t\t\t\tvar catalogo_num = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"h1\",\n\t\t\t\t\tclass_name \t\t: \"catalogo_num\",\n\t\t\t\t\ttext_content \t: info_string,\n\t\t\t\t\tparent \t\t\t: tipo_header_wrapper\n\t\t\t\t})\n\t\t\t}\n\n\n\t\t// Ceca\n\t\t\tif (tipo_object.ceca_text) {\n\t\t\t\tvar ceca_info = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\t\tclass_name \t\t: \"ceca_info info_line\"\n\t\t\t\t})\n\t\t\t\t\t//common.create_dom_element({\n\t\t\t\t\t//\telement_type \t: \"div\",\n\t\t\t\t\t//\tparent \t\t\t: ceca_info,\n\t\t\t\t\t//\tclass_name \t\t: \"info_label\",\n\t\t\t\t\t//\t//text_content \t: tstring['ceca']\n\t\t\t\t\t//\ttext_content \t: \" | \" \n\t\t\t\t\t//})\n\t\t\t\t\tvar ceca_value = common.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tparent \t\t\t: ceca_info,\n\t\t\t\t\t\tclass_name \t\t: \"info_value\",\n\t\t\t\t\t\ttext_content \t: tipo_object.ceca_text \n\t\t\t\t\t})\n\t\t\t\t\tif (tipo_object.ceca_links) {\n\t\t\t\t\t\t//var ar_uri = split(tipo_object.ceca_links)\n\t\t\t\t\t\tvar ar_uri = tipo_object.ceca_links.split(\" | \")\t\n\t\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"fa fas fa-external-link show_tooltip\",\n\t\t\t\t\t\t\t\tparent \t\t\t: ceca_value\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \" + element)\n\t\t\t\t\t\t\tself.add_tool_tip(a)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.mint] = tipo_object.ceca_text || ''\n\n\n\t\t// Denominacion\n\t\tif (tipo_object.denominacion) {\n\t\t\tvar denominacion_info = common.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\tclass_name \t\t: \"denominacion_info info_line\"\n\t\t\t})\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: denominacion_info,\n\t\t\t\t\tclass_name \t\t: \"info_label\",\n\t\t\t\t\t//text_content \t: tstring['denominacion']\n\t\t\t\t\ttext_content \t: \" | \"\n\t\t\t\t})\n\t\t\t\tvar denominacion_value = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: denominacion_info,\n\t\t\t\t\tclass_name \t\t: \"info_value\",\n\t\t\t\t\ttext_content \t: tipo_object.denominacion\n\t\t\t\t})\n\t\t\t\tif (tipo_object.denominacion_iri) {\n\t\t\t\t\tvar ar_uri = tipo_object.denominacion_iri.split(\" | \")\t\t\t\t\t\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fa fas fa-external-link show_tooltip\",\n\t\t\t\t\t\t\tparent \t\t\t: denominacion_value\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \" + element)\t\t\t\t\t\t\n\t\t\t\t\t\tself.add_tool_tip(a)\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.denomination] = tipo_object.denominacion || ''\n\n\n\t\t// Fecha\n\t\tif (tipo_object.fecha_inicio) {\n\t\t\tvar fecha_info = common.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\tclass_name \t\t: \"fecha_info info_line\"\n\t\t\t\t})\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: fecha_info,\n\t\t\t\t\tclass_name \t\t: \"info_label\",\n\t\t\t\t\t//text_content \t: tstring['fecha']\n\t\t\t\t\ttext_content \t: \" | \"\n\t\t\t\t})\n\t\t\t\tvar fecha = tipo_object.fecha_inicio\n\t\t\t\t\tif (tipo_object.fecha_fin) {\n\t\t\t\t\t\tfecha += ' -> ' + tipo_object.fecha_fin\n\t\t\t\t\t}\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: fecha_info,\n\t\t\t\t\tclass_name \t\t: \"info_value\",\n\t\t\t\t\ttext_content \t: fecha\n\t\t\t\t})\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.start_date] = tipo_object.fecha_inicio || ''\t\t\n\t\trow_data_json[t.end_date]   = tipo_object.fecha_fin || ''\n\n\n\t\t// INFO LINE\n\t\tvar tipo_add_info = self.create_dom_element({ element_type : \"div\", class_name : \"tipo_add_info\", parent : tipo_container })\n\t\t\n\t\t\t// ANVERSO\n\t\t\t\t/*\n\t\t\t\tif (tipo_object && (tipo_object.leyenda_anverso || tipo_object.tipo_anverso || tipo_object.simbolo_anverso)) {\n\t\t\t\t\tvar leyenda_anverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\tclass_name   \t: \"title_leyenda\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"anverso\"]  +\" \",\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\tif (tipo_object.leyenda_anverso) {\n\t\t\t\t\t\tvar leyenda_anverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"leyenda_anverso\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"leyenda\"]  +\": \"+ tipo_object.leyenda_anverso,\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tif (tipo_object.tipo_anverso) {\n\t\t\t\t\t\tvar tipo_anverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"tipo_anverso\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"diseno\"] +\": \"+tipo_object.tipo_anverso,\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tif (tipo_object.simbolo_anverso) {\n\t\t\t\t\t\tvar simbolo_anverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"simbolo_anverso\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"simbolo\"]  +\": \"+ tipo_object.simbolo_anverso,\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.obverse_legend] = tipo_object.leyenda_anverso || ''\n\t\t\t\trow_data_json[t.obverse_design] = tipo_object.tipo_anverso || ''\n\t\t\t\trow_data_json[t.obverse_symbol] = tipo_object.simbolo_anverso || ''\n\t\t\t\t*/\n\n\n\t\t\t// REVERSO\n\t\t\t\t/*\n\t\t\t\tif (tipo_object && (tipo_object.leyenda_reverso || tipo_object.tipo_reverso || tipo_object.simbolo_reverso)) {\n\t\t\t\t\tvar leyenda_anverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\tclass_name   \t: \"title_leyenda\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"reverso\"]  +\" \",\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t\tif (tipo_object.leyenda_reverso) {\n\t\t\t\t\t\tvar leyenda_reverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"leyenda_reverso\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"leyenda\"] +\": \"+ tipo_object.leyenda_reverso,\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tif (tipo_object.tipo_reverso) {\n\t\t\t\t\t\tvar tipo_reverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"tipo_reverso\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"diseno\"]  +\": \"+ tipo_object.tipo_reverso,\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\tif (tipo_object.simbolo_reverso) {\n\t\t\t\t\t\tvar simbolo_reverso = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"simbolo_reverso\",\n\t\t\t\t\t\t\ttext_content \t: tstring[\"simbolo\"]  +\": \"+ tipo_object.simbolo_reverso,\n\t\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.reverse_legend] = tipo_object.leyenda_reverso || ''\n\t\t\t\trow_data_json[t.reverse_design] = tipo_object.tipo_reverso || ''\n\t\t\t\trow_data_json[t.reverse_symbol] = tipo_object.simbolo_reverso || ''\n\t\t\t\t*/\n\n\n\t\t// Add to export_data_json\n\t\tself.to_export_data_json(row_data_json)\t\t\n\n\n\t\treturn true\n\t},//end draw_row_tipo\n\n\n\n\t/**\n\t* BUILD_DETAIL\n\t* Build DOM objects from json data\n\t*/\n\tbuild_detail : function(row_data) {\n\t\t\n\t\tconst self = this\n\t\tvar t \t   = self.t\n\n\t\tif (!row_data.tipos || row_data.tipos.length<1) {\n\t\t\tconsole.warn(\"Invalid 'tipos' for current coin:\", row_data);\n\t\t\treturn false\n\t\t}\n\n\t\tvar row_data_json = {\t\t\t\n\t\t\t\"data_ref\" \t\t\t: \"coin\",\n\t\t\t\"types\"    \t\t\t: JSON.parse(row_data.tipos)\n\t\t}\n\n\t\tvar tipo_object = row_data.tipo_object\n\n\t\tvar detail_container = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"detail_container\",\n\t\t})\n\n\n\t\t//LEFT\n\t\tvar left_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"left_detail\",\n\t\t\tparent \t\t\t: detail_container\n\t\t\t})\n\n\t\t\tvar img_size = 320\n\n\t\t\t// imagen_anverso\n\t\t\t\tvar imagen_anverso = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"imagen_anverso gal\",\n\t\t\t\t\tparent \t\t\t: left_detail\n\t\t\t\t\t})\n\t\t\t\t\timagen_anverso.setAttribute('rel', 'gal');\n\t\t\t\t\tvar bg_image  = typeof(row_data.imagen_anverso[0])!==\"undefined\" ? row_data.imagen_anverso[0].image : null\t\t\t\t\t\t\t\n\t\t\t\t\tif (bg_image) {\n\t\t\t\t\t\tvar thumb_url = self.build_thumb_url(bg_image,img_size,img_size)\n\t\t\t\t\t\timagen_anverso.style.backgroundImage = \"url(\"+thumb_url+\")\"\n\t\t\t\t\t}\t\t\t\t\t\n\n\t\t\t\t\tvar imagen_anverso_big = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"imagen_anverso_big\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar big_image_url = self.build_quality_image_url(bg_image, 'original')\n\t\t\t\t\t\timagen_anverso_big.style.backgroundImage = \"url(\"+big_image_url+\")\"\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\t\trow_data_json[t.obverse_image] = big_image_url\t\n\n\t\t\t\t\tvar link = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\tclass_name   \t: \"fa fas fa-arrow-circle-down download_image\",\n\t\t\t\t\t\tparent \t\t\t: imagen_anverso_big\n\t\t\t\t\t\t})\n\t\t\t\t\t\tlink.setAttribute('download', 'numisdata_valencia-' + row_data.section_id + '-A.jpg');\n\t\t\t\t\t\tlink.setAttribute('target', '_blank');\n\t\t\t\t\t\tlink.setAttribute('href', big_image_url);\n\n\t\t\t\t\timagen_anverso.addEventListener(\"click\",function(e){\t\t\t\t\t\n\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t// Build dialog with colorbox\n\t\t\t\t\t\t// see http://www.jacklmoore.com/colorbox/\n\t\t\t\t\t\t// Create before load data for performance perception\t\n\t\t\t\t\t\t$.colorbox({\n\t\t\t\t\t\t\thtml \t\t: imagen_anverso_big,\n\t\t\t\t\t\t\ttransition \t: \"none\",\n\t\t\t\t\t\t\tspeed \t\t: 300,\n\t\t\t\t\t\t\trel \t\t: \"gal\"\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//$.colorbox.resize()\n\t\t\t\t\t})\n\n\t\t\t// imagen_reverso\n\t\t\t\tvar imagen_reverso = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"imagen_reverso gal\",\n\t\t\t\t\tparent \t\t\t: left_detail\n\t\t\t\t\t})\n\t\t\t\t\timagen_reverso.setAttribute('rel', 'gal');\n\t\t\t\t\tvar bg_image  = typeof(row_data.imagen_reverso[0])!==\"undefined\" ? row_data.imagen_reverso[0].image : null\n\t\t\t\t\tif (bg_image) {\n\t\t\t\t\t\tvar thumb_url = self.build_thumb_url(bg_image,img_size,img_size)\n\t\t\t\t\t\timagen_reverso.style.backgroundImage = \"url(\"+thumb_url+\")\"\n\t\t\t\t\t}\n\n\t\t\t\t\tvar imagen_reverso_big = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"imagen_reverso_big\"\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar big_image_url = self.build_quality_image_url(bg_image, 'original')\n\t\t\t\t\t\timagen_reverso_big.style.backgroundImage = \"url(\"+big_image_url+\")\"\t\t\t\t\t\t\n\t\t\t\t\t\t\n\t\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\t\trow_data_json[t.reverse_image] = big_image_url\n\n\t\t\t\t\tvar link = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\tclass_name   \t: \"fa fas fa-arrow-circle-down download_image\",\n\t\t\t\t\t\tparent \t\t\t: imagen_reverso_big\n\t\t\t\t\t\t})\n\t\t\t\t\t\tlink.setAttribute('download', 'numisdata_valencia-' + row_data.section_id + '-R.jpg');\n\t\t\t\t\t\tlink.setAttribute('target', '_blank');\n\t\t\t\t\t\tlink.setAttribute('href', big_image_url);\n\n\t\t\t\t\timagen_reverso.addEventListener(\"click\",function(e){\n\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\t// Build dialog with colorbox\n\t\t\t\t\t\t// see http://www.jacklmoore.com/colorbox/\n\t\t\t\t\t\t// Create before load data for performance perception\t\n\t\t\t\t\t\t$.colorbox({\n\t\t\t\t\t\t\thtml \t\t: imagen_reverso_big,\n\t\t\t\t\t\t\ttransition \t: \"none\",\n\t\t\t\t\t\t\tspeed \t\t: 300,\n\t\t\t\t\t\t\trel \t\t: \"gal\"\t\t\t\t\t\t\t\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//$.colorbox.resize()\n\t\t\t\t\t})\n\n\t\t\t\t// group images in colorbox switching each item\n\t\t\t\t\timagen_anverso_big.addEventListener(\"click\",function(e){\n\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\tif (!e.target.classList.contains(\"imagen_anverso_big\")) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\timagen_reverso.click()\n\t\t\t\t\t})\n\t\t\t\t\timagen_reverso_big.addEventListener(\"click\",function(e){\n\t\t\t\t\t\te.stopPropagation()\n\t\t\t\t\t\tif (!e.target.classList.contains(\"imagen_reverso_big\")) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\timagen_anverso.click()\n\t\t\t\t\t})\n\n\t\t\t\t\t\n\t\t// RIGHT\n\t\tvar right_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"right_detail\",\n\t\t\tparent \t\t\t: detail_container\n\t\t\t})\n\t\t\t\n\t\t\t// ID\n\t\t\t\t/*\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : right_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label label_section_id\",\n\t\t\t\t\t\ttext_content \t: tstring[\"id\"] || \"ID\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"section_id\",\n\t\t\t\t\t\ttext_content \t: row_data.section_id,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.section_id] = row_data.section_id\n\t\t\t\t*/\n\n\t\t\t// coleccion\t\t\t\n\t\t\t\tif (row_data.coleccion) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : right_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label label2em\",\n\t\t\t\t\t\ttext_content \t: tstring.coleccion || \"coleccion\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar line_coleccion = row_data.coleccion\n\t\t\t\t\tif (row_data.numero) {\n\t\t\t\t\t\tline_coleccion += \" | \" + row_data.numero\n\t\t\t\t\t}\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"section_id\",\n\t\t\t\t\t\tinner_html \t\t: line_coleccion,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.collection] = row_data.coleccion || ''\n\t\t\t\n\t\t\n\t\tvar hallazgo_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator hallazgo_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\t\t\t\n\t\t\t// hallazgo \n\t\t\t\tif (row_data.hallazgo) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : hallazgo_detail})\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.yacimiento || \"Yacimiento\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"hallazgo\",\n\t\t\t\t\t\ttext_content \t: row_data.hallazgo,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.site] = row_data.hallazgo || ''\n\n\t\t\t\t// hallazgo dato for export data\n\t\t\t\t// console.log(\"row_data:\",row_data);\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\tvar site_geo_lat = ''\n\t\t\t\tvar site_geo_lon = ''\n\t\t\t\tif (typeof row_data.hallazgo_dato[0]!==\"undefined\") {\n\t\t\t\t\tsite_geo_lat = self.extract_geo(row_data.hallazgo_dato[0], \"lat\")\n\t\t\t\t\tsite_geo_lon = self.extract_geo(row_data.hallazgo_dato[0], \"lon\")\n\t\t\t\t}\n\t\t\t\trow_data_json[t.site_geo_lat] = site_geo_lat\n\t\t\t\trow_data_json[t.site_geo_lon] = site_geo_lon\n\n\t\t\t// tipo de hallazgo \n\t\t\t\tif (typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].tipologia)!==\"undefined\") {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : hallazgo_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.tipo_de_yacimiento || \"Tipo de yacimiento\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"tipo_de_hallazgo\",\n\t\t\t\t\t\ttext_content \t: row_data.hallazgo_dato[0].tipologia,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.type_of_site] = typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].tipologia)!==\"undefined\" ? row_data.hallazgo_dato[0].tipologia : ''\n\n\n\t\t\t// localizacin \n\t\t\t\tif (typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].municipio)!==\"undefined\") {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : hallazgo_detail})\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.localizacion || \"Localizacin\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar hallazgo_localizacion = typeof(row_data.hallazgo_dato[0].municipio)!==\"undefined\" ? row_data.hallazgo_dato[0].municipio : \"\"\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"localizacion\",\n\t\t\t\t\t\ttext_content \t: hallazgo_localizacion,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.findspot] = typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].municipio)!==\"undefined\" ? row_data.hallazgo_dato[0].municipio : ''\n\n\n\t\t\t// ceca \n\t\t\t\tvar ceca_detail = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"separator ceca_detail\",\n\t\t\t\t\tparent \t\t\t: right_detail\n\t\t\t\t\t})\n\t\t\t\t\t// Ceca\n\t\t\t\t\tif (row_data.ceca) {\n\t\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\t\ttext_content \t: tstring.ceca || \"Ceca\",\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar ceca = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"ceca\",\n\t\t\t\t\t\t\ttext_content \t: self.remove_string_double_values(row_data.ceca,\",\"),\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (row_data.tipo_object.ceca_links) {\n\t\t\t\t\t\t\tvar ar_uri = row_data.tipo_object.ceca_links.split(\" | \")\n\t\t\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\t\t\tclass_name   \t: \"fa fas fa-external-link show_tooltip\",\n\t\t\t\t\t\t\t\t\tparent \t\t\t: ceca\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t\t\tself.add_tool_tip(a)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.mint] = row_data.ceca || ''\n\n\n\t\t\t// cronologia \n\t\t\t\tif (row_data.cronologia) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.cronologia || \"Cronologa\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar cronologia_title = split(row_data.cronologia)\t\t\t\t\t\n\t\t\t\t\t//var cronologia_title = row_data.cronologia.split(\" | \")\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"cronologia\",\n\t\t\t\t\t\ttext_content \t: cronologia_title[0],\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t// row_data_json[t.chronology] = typeof cronologia_title[0]!==\"undefined\" ? cronologia_title[0] : ''\n\t\t\t\trow_data_json[t.start_date] = tipo_object.fecha_inicio || ''\n\t\t\t\trow_data_json[t.end_date] \t= tipo_object.fecha_fin || ''\n\t\t\t\t\n\n\t\t\t// autoridad \n\t\t\t\tif (row_data.tipo_object.autoridad) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.autoridad || \"Creador\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\n\t\t\t\t\t// autoridad_info_string\n\t\t\t\t\tvar autoridad_info_string = \"\"\n\t\t\t\t\t/*\n\t\t\t\t\tif (row_data.tipo_object.autoridad_dato && row_data.tipo_object.autoridad_dato.length>0) {\n\t\t\t\t\t\t// La autoridad puede estar o no publicada.\n\t\t\t\t\t\t// Lo intentamos...\n\t\t\t\t\t\tvar ar_autoridad_name = []\n\t\t\t\t\t\trow_data.tipo_object.autoridad_dato.forEach(function(element){\n\t\t\t\t\t\t\t//console.log(\"element:\",element);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tvar ar_parts = []\n\t\t\t\t\t\t\tif (element.nombre) {\n\t\t\t\t\t\t\t\tar_parts.push(element.nombre)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (element.apellidos) {\n\t\t\t\t\t\t\t\tar_parts.push(element.apellidos)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvar t_autoridad = ar_parts.join(\" \")\n\t\t\t\t\t\t\tar_autoridad_name.push(t_autoridad)\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (ar_autoridad_name.length>0) {\n\t\t\t\t\t\t\tautoridad_info_string += \" \" + ar_autoridad_name.join(\", \")\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t*/\n\t\t\t\t\tif (autoridad_info_string.length<1) {\n\t\t\t\t\t\t// Si la autoridad NO est publicada, cogemos el dato de la columna resuelta de tipo (autoridad)\n\t\t\t\t\t\tvar nombre = row_data.tipo_object.autoridad\n\t\t\t\t\t\t\tnombre = nombre.replace(',', ', ') // Add space between names separated with comma\n\n\t\t\t\t\t\tautoridad_info_string = nombre\n\n\t\t\t\t\t\t// role\n\t\t\t\t\t\t//if (row_data.tipo_object.autoridad_rol && row_data.tipo_object.autoridad_rol.length>0) {\n\t\t\t\t\t\t//\tautoridad_info_string += \" - \" + row_data.tipo_object.autoridad_rol\n\t\t\t\t\t\t//}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar autoridad = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"autoridad\",\n\t\t\t\t\t\ttext_content \t: autoridad_info_string,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\n\t\t\t\t\tif (row_data.tipo_object.autoridad_dato && typeof(row_data.tipo_object.autoridad_dato[0])!==\"undefined\" && typeof(row_data.tipo_object.autoridad_dato[0].uri)!==\"undefined\" ) {\n\t\t\t\t\t\tvar ar_uri = split(row_data.tipo_object.autoridad_dato[0].uri)\n\t\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"fa fas fa-external-link show_tooltip\",\n\t\t\t\t\t\t\t\tparent \t\t\t: autoridad\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t\tself.add_tool_tip(a)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\n\t\t\t\t\t// role\n\t\t\t\t\t\tif (row_data.tipo_object.autoridad_rol && row_data.tipo_object.autoridad_rol.length>0) {\n\t\t\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\t\t\ttext_content \t: tstring.rol || \"Rol\",\n\t\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar role = self.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"role\",\n\t\t\t\t\t\t\t\ttext_content \t: self.clean_data_string(row_data.tipo_object.autoridad_rol),\n\t\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.authority] = typeof autoridad_info_string!==\"undefined\" ? autoridad_info_string : ''\n\n\n\t\t\t// denominacion \n\t\t\t\tif (row_data.tipo_object.denominacion) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.denominacion || \"Denominacion\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar denominacion = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"denominacion\",\n\t\t\t\t\t\ttext_content \t: row_data.tipo_object.denominacion,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tif (row_data.tipo_object.denominacion_iri) {\n\t\t\t\t\t\t//var ar_uri = split(row_data.tipo_object.denominacion_iri)\n\t\t\t\t\t\tvar ar_uri = row_data.tipo_object.denominacion_iri.split(\" | \")\n\t\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"fa fas fa-external-link show_tooltip\",\n\t\t\t\t\t\t\t\tparent \t\t\t: denominacion\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t\tself.add_tool_tip(a)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.denomination] = row_data.tipo_object.denominacion || ''\n\n\n\t\t\t// material\n\t\t\t\tif (row_data.tipo_object.material) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.material || \"Material\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\n\t\t\t\t\tvar material = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"material\",\n\t\t\t\t\t\ttext_content \t: self.clean_data_string(row_data.tipo_object.material),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tif (row_data.tipo_object.material_links) {\n\t\t\t\t\t\t//var ar_uri = split(row_data.tipo_object.material_links)\n\t\t\t\t\t\tvar ar_uri = row_data.tipo_object.material_links.split(\" | \")\t\t\t\t\t\t\n\t\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"fa fas fa-external-link show_tooltip\",\n\t\t\t\t\t\t\t\tparent \t\t\t: material\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t\tself.add_tool_tip(a)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.material] \t    = row_data.tipo_object.material || ''\n\t\t\t\trow_data_json[t.material_links] = row_data.tipo_object.material_links || ''\n\n\n\t\tvar medida_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator medida_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\t\t\t// peso \n\t\t\t\tif (row_data.peso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : medida_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.peso || \"Peso\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"peso\",\n\t\t\t\t\t\ttext_content \t: row_data.peso ? row_data.peso.replace('.', ',')  + \" g\" : \"\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.weight] = row_data.peso ? row_data.peso.replace('.', ',') : \"\"\n\n\n\t\t\t// diametro \n\t\t\t\tif (row_data.diametro) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : medida_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.diametro || \"Dimetro\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"diametro\",\n\t\t\t\t\t\ttext_content \t: row_data.diametro + \" mm\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.diameter] = row_data.diametro || ''\n\n\n\t\t\t// posicion_cunos \n\t\t\t\tif (row_data.cuno && row_data.cuno.length>0) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : medida_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring[\"posicion_cunos\"] || \"Posicin de cuos\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"posicion_cunos\",\n\t\t\t\t\t\ttext_content \t: row_data.cuno + \" h\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.axis] = row_data.cuno || ''\n\n\t\t\n\t\tvar anverso_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator anverso_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\n\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\tclass_name   \t: \"label anverso_label\",\n\t\t\t\t\ttext_content \t: (tstring.anverso || \"ANVERSO\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"leyenda_anverso\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\n\n\t\t\t// leyenda_anverso\n\t\t\t\tif (row_data.tipo_object.leyenda_anverso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.leyenda || \"Leyenda\"),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar value = self.replace_dedalo_paths(row_data.tipo_object.leyenda_anverso) +'<br>'+ (row_data.tipo_object.leyenda_anverso_transcripcion || '')\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"leyenda_anverso\",\n\t\t\t\t\t\tinner_html \t\t: value,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t// diseno_anverso\n\t\t\t\tif (row_data.tipo_object.tipo_anverso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.diseno || \"Diseo\"),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"diseno_anverso\",\n\t\t\t\t\t\tinner_html \t\t: row_data.tipo_object.tipo_anverso,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t// simbolo_anverso\n\t\t\t\tif (row_data.tipo_object.simbolo_anverso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.simbolo || \"Smbolo\"),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"simbolo_anverso\",\n\t\t\t\t\t\tinner_html \t\t: self.clean_data_string(row_data.tipo_object.simbolo_anverso),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\t\t\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.obverse_legend] = row_data.tipo_object.leyenda_anverso || ''\n\t\t\t\trow_data_json[t.obverse_design] = row_data.tipo_object.tipo_anverso || ''\n\t\t\t\trow_data_json[t.obverse_symbol] = row_data.tipo_object.simbolo_anverso || ''\n\n\n\t\t\t// leyenda_reverso\n\t\t\t\tif (row_data.tipo_object.leyenda_reverso || row_data.tipo_object.tipo_reverso || row_data.tipo_object.simbolo_reverso) {\n\n\t\t\t\t\tvar reverso_detail = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"separator reverso_detail\",\n\t\t\t\t\t\tparent \t\t\t: right_detail\n\t\t\t\t\t\t})\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : reverso_detail})\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\tclass_name   \t: \"label reverso_label\",\n\t\t\t\t\t\t\ttext_content \t: (tstring.reverso || \"REVERSO\"),\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"leyenda_reverso\",\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t// leyenda_reverso\n\t\t\t\tif (row_data.tipo_object.leyenda_reverso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : reverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.leyenda || \"Leyenda\"),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar value = self.replace_dedalo_paths(row_data.tipo_object.leyenda_reverso) +'<br>'+ (row_data.tipo_object.leyenda_reverso_transcripcion || '')\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"leyenda_reverso\",\n\t\t\t\t\t\tinner_html\t \t: value,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\t\t\t\t\n\t\t\t// tipo_reverso\n\t\t\t\tif (row_data.tipo_object.tipo_reverso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : reverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.diseno || \"Diseo\"),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"diseno_reverso\",\n\t\t\t\t\t\tinner_html\t \t: row_data.tipo_object.tipo_reverso,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t// simbolo_reverso\n\t\t\t\tif (row_data.tipo_object.simbolo_reverso) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : reverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.simbolo || \"Smbolo\"),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\t\t\t\t\t\t\t\t\t\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"simbolo_reverso\",\n\t\t\t\t\t\tinner_html\t \t: self.clean_data_string(row_data.tipo_object.simbolo_reverso),\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.reverse_legend] = row_data.tipo_object.leyenda_reverso || ''\n\t\t\t\trow_data_json[t.reverse_design] = row_data.tipo_object.tipo_reverso || ''\n\t\t\t\trow_data_json[t.reverse_symbol] = row_data.tipo_object.simbolo_reverso || ''\n\n\t\t\n\t\tvar biblio_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator biblio_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\n\t\t\t// fondo\n\t\t\t\tif (row_data.fondo) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.fondo || \"fondo\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"fondo\",\n\t\t\t\t\t\tinner_html \t\t: row_data.fondo,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.funds] = row_data.fondo || ''\n\n\t\t\t// bibliografia (referencias bibliogrficas)\n\t\t\t\tvar bibliografia_info_full = []\n\t\t\t\tif (row_data.bibliografia && row_data.bibliografia_ref) {\t\t\t\t\n\n\t\t\t\t\tvar bibliografia = split(row_data.bibliografia)\t\t\t\t\n\t\t\t\t\tfor (var bi = 0; bi < bibliografia.length; bi++) {\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar current = bibliografia[bi]\n\n\t\t\t\t\t\tvar bibliografia_paginas  \t= ''\n\t\t\t\t\t\tvar bibliografia_ref \t\t= ''\n\n\t\t\t\t\t\tif (row_data.bibliografia_ref) {\n\t\t\t\t\t\t\tbibliografia_ref = split(row_data.bibliografia_ref)\n\t\t\t\t\t\t\tif (typeof bibliografia_ref[bi]!==\"undefined\") {\n\t\t\t\t\t\t\t\tbibliografia_ref = bibliografia_ref[bi]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (row_data.bibliografia_paginas) {\n\t\t\t\t\t\t\tbibliografia_paginas = split(row_data.bibliografia_paginas)\n\t\t\t\t\t\t\tif (typeof bibliografia_paginas[bi]!==\"undefined\") {\n\t\t\t\t\t\t\t\tbibliografia_paginas = bibliografia_paginas[bi]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\t\ttext_content \t: tstring.bibliografia || \"Bibliografa\",\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar bibliografia_info_text = current + \" Ref: \" + bibliografia_ref + \" Pag. \" + bibliografia_paginas\n\t\t\t\t\t\tbibliografia_info_full.push(bibliografia_info_text)\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"bibliografia\",\n\t\t\t\t\t\t\ttext_content \t: bibliografia_info_text,\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.bibliographic_ref] = bibliografia_info_full.join(\", \")\n\n\t\t\t// Publicaciones\n\t\t\t\tif (row_data.publicaciones) {\t\t\t\t\t\n\t\t\t\t\trow_data.publicaciones.forEach(function(element){\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\t\t\ttext_content \t: tstring.bibliografia || \"Bibliografa\",\n\t\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tvar bibliografia_title = element.autoria +\" \"+ element.titulo + \" \" + element.fecha_publicacion\n\n\t\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\t\tclass_name   \t: \"publicaciones\",\n\t\t\t\t\t\t\t\ttext_content \t: bibliografia_title,\n\t\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t\t})\n\t\t\t\t\t})\t\t\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.bibliography] = typeof bibliografia_title!==\"undefined\" ? bibliografia_title : ''\n\n\t\t\t// info publica\n\t\t\t\tif (row_data.info_publica && row_data.info_publica!=='<br data-mce-bogus=\"1\">') {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.notas || \"Notas\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"notas\",\n\t\t\t\t\t\tinner_html \t\t: row_data.info_publica,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.info] = row_data.info_publica || ''\n\n\t\t\t// uri_detail\n\t\t\t\tvar uri_detail = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"separator uri_detail\",\n\t\t\t\t\tparent \t\t\t: right_detail\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// TIPO . Title (catalogo, autoridad, numero_catalogo)\n\t\t\t\t\tif (row_data.tipo_object.catalogo) {\n\t\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : uri_detail})\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\t\ttext_content \t: tstring.refeferencia_bibliografica || \"Ref bibliografia\",\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar ar_catalogo_text = []\n\t\t\t\t\t\t\tar_catalogo_text.push(row_data.tipo_object.catalogo)\n\t\t\t\t\t\t\tif (row_data.tipo_object.numero_catalogo) {\n\t\t\t\t\t\t\t\tar_catalogo_text.push(row_data.tipo_object.numero_catalogo)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (autoridad_info_string) {\n\t\t\t\t\t\t\t\tar_catalogo_text.push(autoridad_info_string)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t// var ar_additions = []\n\t\t\t\t\t\t\t// if (row_data.tipo_object.ceca_text) {\n\t\t\t\t\t\t\t// \tar_additions.push(row_data.tipo_object.ceca_text)\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t\t// if (row_data.tipo_object.denominacion) {\n\t\t\t\t\t\t\t// \tar_additions.push(row_data.tipo_object.denominacion)\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\tvar tipo_info = ar_catalogo_text.join(\" \") // + \" | \" + ar_additions.join(\" | \")\n\t\t\t\t\t\t\ttipo_info = self.clean_string(tipo_info)\t\t\t\t\t\t\n\t\t\t\t\t\tvar catalogo = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"tipo show_tooltip\",\n\t\t\t\t\t\t\tinner_html \t\t: tipo_info,\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (typeof row_data.tipo_object.catalogo_dato[0]!==\"undefined\" && row_data.tipo_object.catalogo_dato[0].publicacion.length>0) {\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcatalogo.setAttribute(\"title\", self.clean_string(row_data.tipo_object.catalogo_dato[0].publicacion))\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.add_tool_tip(catalogo)\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*\n\t\t\t\t\t\tconsole.log(\"row_data.tipo_object.publicacion:\",row_data.tipo_object.publicacion);\n\t\t\t\t\t\tif (row_data.tipo_object.publicacion && row_data.tipo_object.publicacion.length>0) {\n\t\t\t\t\t\t\tvar ar_title = []\n\t\t\t\t\t\t\trow_data.tipo_object.publicacion.forEach(function(element){\n\t\t\t\t\t\t\t\tar_title.push(element)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\tif (ar_title.length>0) {\n\t\t\t\t\t\t\t\tcatalogo.title = ar_title.join(\", \") \n\t\t\t\t\t\t\t\tself.add_tool_tip(catalogo)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t*/\n\t\t\t\t\t}\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.catalogue] \t\t  = row_data.tipo_object.catalogo || ''\n\t\t\t\t\trow_data_json[t.catalogue_number] = row_data.tipo_object.numero_catalogo || ''\n\n\t\t\t// equivalentes\n\t\t\t\t//console.log(\"row_data.tipo_object:\",row_data.tipo_object);\n\t\t\t\t//console.log(\"row_data.tipo_object.equivalentes_catalogo_dato:\",row_data.tipo_object.equivalentes_catalogo_dato);\n\n\t\t\t\tif (row_data.tipo_object.equivalentes && row_data.tipo_object.equivalentes.length>0) {\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : uri_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: \"\", //tstring.equivalentes || \"Equivalentes\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tconst equivalentes_div = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"equivalentes\",\n\t\t\t\t\t\t//inner_html  \t: row_data.tipo_object.equivalentes,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\n\t\t\t\t\t// equivalentes build list\n\t\t\t\t\t\tconst equivalentes_catalogo_dato = row_data.tipo_object.equivalentes_catalogo_dato\n\t\t\t\t\t\tconst ar_equivalentes = row_data.tipo_object.equivalentes.split(\"<br>\")\n\t\t\t\t\t\t\n\t\t\t\t\t\tlet e = 0; ar_equivalentes.forEach( item => {\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconst item_parts = item.split(' | ')\n\t\t\t\t\t\t\t\tconsole.log(\"item_parts:\",item_parts,e);\n\n\t\t\t\t\t\t\tif (typeof equivalentes_catalogo_dato[e]!==\"undefined\" && item_parts[0]===equivalentes_catalogo_dato[e].catalogo) {\n\t\t\t\t\t\t\t\t//console.log(\"item ++ :\",item, \" **** \", equivalentes_catalogo_dato[e].publicacion);\n\n\t\t\t\t\t\t\t\tlet ar_beats = item_parts.slice(0, 2)\n\n\t\t\t\t\t\t\t\tlet span = self.create_dom_element({\n\t\t\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\t\t\tclass_name   \t: \"show_tooltip\",\n\t\t\t\t\t\t\t\t\t//text_content \t: self.clean_string(item_parts),\n\t\t\t\t\t\t\t\t\ttext_content \t: ar_beats.join(\" | \"),\n\t\t\t\t\t\t\t\t\tparent \t\t\t: equivalentes_div\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tif (equivalentes_catalogo_dato[e].publicacion.length>0) {\n\t\t\t\t\t\t\t\t\tspan.setAttribute(\"title\", self.clean_string(equivalentes_catalogo_dato[e].publicacion))\n\t\t\t\t\t\t\t\t\tself.add_tool_tip(span)\n\t\t\t\t\t\t\t\t}\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\te++;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t//console.log(\"ar_equivalentes:\",ar_equivalentes);\n\t\t\t\t}\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\tvar equivalentes_value = row_data.tipo_object.equivalentes.replace(/<br>/g,\", \")\n\t\t\t\trow_data_json[t.equivalents] = equivalentes_value\n\n\t\t\t// URI\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line uri_line\", parent : uri_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.uri || \"URI\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tlet div_uri = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"uri\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar uri = \"https://numisdata.org/valencia/mon/\" + row_data.section_id\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\ttext_content \t: uri,\n\t\t\t\t\t\thref \t\t\t: uri,\n\t\t\t\t\t\tparent \t\t\t: div_uri\n\t\t\t\t\t})\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.uri] = uri || ''\n\n\n\t\t// Add to export_data_json\n\t\t\tself.to_export_data_json(row_data_json)\n\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\t//console.log(\"row_data_json:\",row_data_json);\n\t\t\t}\n\n\t\t// tooltips\n\t\t\tconst links = detail_container.querySelectorAll('.show_tooltip')\n\t\t\tself.activate_tooltips(links)\n\n\n\t\treturn detail_container\n\t},//end build_detail\n\n\n\n\t/**\n\t* CLEAN_DATA_STRING\n\t* remove empty elements in data string from arrays like 'Pedro II | jaime | '\n\t*/\n\tclean_data_string : function( data_string, separator=\" | \" ) {\n\n\t\tvar ar_data \t\t= data_string.split(separator)\n\t\tvar ar_data_clean \t= []\n\t\tar_data.forEach(function(item) {\n\t\t \tif (item.length>0) {\n\t\t \t\tar_data_clean.push(item)\n\t\t \t}\n\t\t})\n\n\t\tvar result = ar_data_clean.join(separator)\n\n\t\treturn result\n\t},//end clean_data_string\n\n\n\n\tclean_string : function(text) {\n\n\t\ttext = text.trim()\n\n\t\tif (text.slice(-1)==='|') {\n\t\t\ttext = text.slice(0, -1);\n\t\t}\n\n\t\treturn text\n\t},\n\n\n\n\t/**\n\t* EXTRACT_GEO\n\t*/\n\textract_geo : function(row, type) {\n\n\t\tvar geo_value = ''\n\n\t\t//console.log(\"row:\",row);\n\t\tvar ar_place = JSON.parse(row.lugar)\n\t\t// console.log(\"ar_place:\",ar_place);\n\t\tif (typeof ar_place[0]!==\"undefined\" && typeof ar_place[0].layer_data[0]!==\"undefined\" && typeof ar_place[0].layer_data[0][type]!==\"undefined\") {\n\t\t\tgeo_value = ar_place[0].layer_data[0][type]\n\t\t}\n\n\t\treturn geo_value\n\t},//end extract_geo\n\n\n\n\t/**\n\t* OPEN_DETAIL\n\t*/\n\topen_detail : function(button_obj, row_data) {\n\n\t\tconst self = this\n\n\t\tvar detail_container = self.build_detail(row_data)\n\t\t//detail_container.appendChild( button_obj.cloneNode(true) )\n\n\t\t// Build dialog with colorbox\n\t\t// see http://www.jacklmoore.com/colorbox/\n\t\t// Create before load data for performance perception\t\n\t\t$.colorbox({\n\t\t\thtml: detail_container,\n\t\t\ttransition : \"none\",\n\t\t\tspeed : 300\n\t\t});\n\n\t\t//setTimeout(function(){\n\t\t//\t$.colorbox.resize()\n\t\t//\tconsole.log(\"detail_container:\",detail_container);\n\t\t//},3000)\n\t\t\n\t\treturn true\n\t},//end open_detail\n\n\n\n\t/**\n\t* BUILD_THUMB_URL\n\t*/\n\tbuild_thumb_url : function(image_path, width, height) {\n\n\t\tif (!image_path || image_path.length<1) {\n\t\t\treturn false\n\t\t}\n\n\t\tvar bg_image  = image_path\n\n\t\tconst w = width  || 380\n\t\tconst h = height || 360\n\t\t\t\n\t\tconst file_name = '/image/' + bg_image.split('/image/').pop();\t\t\n\n\t\tbg_image = bg_image.replace('/media_test/media_numisdata_valencia/dedalo/','/')\n\t\tbg_image = bg_image.replace('/media/dedalo/','/')\n\t\tbg_image = \"https://valencia.numisdata.org/dedalo/lib/dedalo/media_engine/img.php?m=free&w=\"+w+\"&h=\"+h+\"&SID=\" + file_name\n\t\t//bg_image = \"//valencia.numisdata.org/dedalo/lib/dedalo/media_engine/img.php?m=free&SID=\" + file_name\n\t\t\n\t\treturn bg_image\n\t},//end build_thumb_url\n\n\n\n\t/**\n\t* BUILD_QUALITY_IMAGE_URL\n\t*/\n\tbuild_quality_image_url : function(image_path, quality, width, height) {\n\n\t\tif (!image_path || image_path.length<1) {\n\t\t\treturn false\n\t\t}\n\n\t\tvar bg_image = image_path\n\t\t\n\t\t\tbg_image = bg_image.replace('/media_test/media_numisdata_valencia/','/media/')\n\t\t\tbg_image = bg_image.replace('/dedalo/media/','/media/')\n\n\t\t// Replace default quality for original file\n\t\tif (quality!==\"1.5MB\") {\n\t\t\tbg_image = bg_image.replace('/1.5MB/','/'+quality+'/')\n\t\t}\t\t\n\n\t\tvar file_name = bg_image\n\t\n\t\t//bg_image = \"//valencia.numisdata.org\" + file_name\n\t\tbg_image = \"https://numisdata.org/valencia\" + file_name\n\n\t\treturn bg_image\n\t},//end build_quality_image_url\n\n\n\n\t/**\n\t* REPLACE_DEDALO_PATHS\n\t* User for leyends svg paths\n\t*/\n\treplace_dedalo_paths : function(html) {\n\n\t\thtml = html.replace(/\\/dedalo\\/media\\//g, 'https://valencia.numisdata.org/dedalo/media/')\n\t\t\n\t\treturn html\n\t},//end replace_dedalo_paths\n\n\n\n\t/**\n\t* CREATE_DOM_ELEMENT\n\t* Builds single dom element\n\t*/\n\tcreate_dom_element : function(element_options) {\n\n\t\tvar element_type\t\t\t= element_options.element_type\n\t\tvar parent\t\t\t\t\t= element_options.parent\n\t\tvar class_name\t\t\t\t= element_options.class_name\n\t\tvar style\t\t\t\t\t= element_options.style\n\t\tvar data_set\t\t\t\t= element_options.data_set\n\t\t\tif (typeof data_set===\"undefined\" && typeof element_options.dataset!==\"undefined\") data_set = element_options.dataset\n\t\tvar custom_function_events\t= element_options.custom_function_events\n\t\tvar title_label\t\t\t\t= element_options.title_label\n\t\tvar text_node\t\t\t\t= element_options.text_node\n\t\tvar text_content\t\t\t= element_options.text_content\n\t\tvar inner_html\t\t\t\t= element_options.inner_html\n\t\tvar href\t\t\t\t\t= element_options.href\n\t\tvar id \t\t\t\t\t\t= element_options.id\n\t\tvar draggable\t\t\t\t= element_options.draggable\n\t\tvar value\t\t\t\t\t= element_options.value\n\t\tvar download\t\t\t\t= element_options.download\n\t\t\n\t\tvar element = document.createElement(element_type);\n\t\n\t\t// Add id property to element\n\t\tif(id){\n\t\t\telement.id = id;\n\t\t}\n\n\t\t// A element. Add href property to element\n\t\tif(element_type === 'a'){\n\n\t\t\tif(href){\n\t\t\t\telement.href =href;\n\t\t\t}else{\n\t\t\t\telement.href = 'javascript:;';\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t// Class name. Add css classes property to element\n\t\tif(class_name){\n\t\t\telement.className = class_name\n\t\t}\n\n\t\t// Style. Add css style property to element\n\t\tif(style){\n\t\t\tfor(key in style) {\n\t\t\t\telement.style[key] = style[key]\n\t\t\t\t//element.setAttribute(\"style\", key +\":\"+ style[key]+\";\");\n\t\t\t}\t\t\n\t\t}\n\n\t\t// Title . Add title attribute to element\n\t\tif(title_label){\n\t\t\telement.title = title_label\n\t\t}\n\t\n\t\t// Dataset Add dataset values to element\t\t\n\t\tif(data_set){\n\t\t\tfor (var key in data_set) {\n\t\t\t\telement.dataset[key] = data_set[key]\n\t\t\t}\n\t\t}\n\n\t\t// Value\n\t\tif(value){\n\t\t\telement.value = value\n\t\t}\n\n\t\t// Click event attached to element\n\t\tif(custom_function_events){\n\t\t\tconst len = custom_function_events.length\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar function_name \t\t= custom_function_events[i].name\n\t\t\t\tvar event_type\t\t\t= custom_function_events[i].type\n\t\t\t\tvar function_arguments\t= custom_function_events[i].function_arguments\t\t\t\t\t\n\n\t\t\t\t// Create event caller\n\t\t\t\tthis.create_custom_events(element, event_type, function_name, function_arguments)\n\t\t\t}\n\t\t}//end if(custom_function_events){\n\t\t\n\t\t// Text content \n\t\tif(text_node){\n\t\t\t//element.appendChild(document.createTextNode(TextNode));\n\t\t\t// Parse html text as object\n\t\t\tif (element_type==='span') {\n\t\t\t\telement.textContent = text_node\n\t\t\t}else{\n\t\t\t\tvar el = document.createElement('span')\n\t\t\t\t\tel.innerHTML = \" \"+text_node // Note that prepend a space to span for avoid Chrome bug on selection\n\t\t\t\telement.appendChild(el)\n\t\t\t}\t\t\t\n\t\t}else if(text_content) {\n\t\t\telement.textContent = text_content\n\t\t}else if(inner_html) {\n\t\t\telement.innerHTML = inner_html\n\t\t}\n\n\n\t\t// Append created element to parent\n\t\tif (parent) {\n\t\t\tparent.appendChild(element)\n\t\t}\n\n\t\t// Dragable\n\t\tif(draggable){\n\t\t\telement.draggable = draggable;\n\t\t}\n\n\t\tif (download) {\n\t\t\telement.setAttribute(\"download\", download)\n\t\t}\n\n\t\treturn element;\n\t},//end create_dom_element\n\n\n\n\t/**\n\t* REMOVE_STRING_DOUBLE_VALUES\n\t*/\n\tremove_string_double_values : function(value, separator) {\n\n\t\tif (value===null) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Split string as array\n\t\tvar ar_elements = value.split(separator)\n\t\tvar ar_unique \t= []\n\n\t\tar_elements.forEach(function(element) {\t\t\t\n\t\t\tif (ar_unique.indexOf(element)===-1) {\n\t\t\t\tar_unique.push(element)\n\t\t\t}\n\t\t})\n\n\t\tvar final_string = ar_unique.join(separator)\n\n\t\treturn final_string;\n\t},//end remove_string_double_values\n\n\n\n\t/**\n\t* TOGGLE_MONEDAS\n\t*/\n\ttoggle_monedas : function() {\n\n\t\t$(\".monedas_wrapper\").toggle()\n\n\t\treturn true\n\t},\n\n\n\n\t/**\n\t* TOGGLE_TIPOS\n\t*/\n\ttoggle_tipos : function() {\n\n\t\t$(\".tipo_header_wrapper, .tipo_add_info\").toggle()\n\n\t\treturn true\n\t},\n\n\n\n\t/**\n\t* LOAD_SNIPPET\n\t* Loads by httprequest a fragment of code (phtml)\n\t*/\n\tload_snippet : function(snippet_name, target_id) {\n\n\t\tconst self = this\n\n\t\tvar trigger_url  = page_globals.__WEB_TEMPLATE_WEB__ + \"/common/trigger.common.php\"\n\t\tvar trigger_vars = {\n\t\t\tmode \t \t : \"load_snippet\",\n\t\t\tsnippet_name : snippet_name\n\t\t}\n\t\t\n\n\t\t// Http request directly in javascript to the API is possible too..\n\t\tvar js_promise = common.get_json_data(trigger_url, trigger_vars).then(function(response){\n\t\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\t\tconsole.log(\"[common.load_snippet] response:\" , response);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!response) {\n\t\t\t\t\t// Error on load data from trigger\n\t\t\t\t\tconsole.warn(\"[common.load_snippet] Error. Received response data is null\");\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tif (target_id) {\n\t\t\t\t\tvar target_obj = document.getElementById(target_id)\t\n\t\t\t\t\tif (target_obj) {\n\t\t\t\t\t\ttarget_obj.innerHTML = response.result\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\n\n\t\t\t\treturn response\n\t\t})\n\n\t\treturn js_promise\n\t},//end load_snippet\n\n\n\n\t/**\n\t* BUILD_DOWNLOAD_DATA_LINK\n\t* \n\t*/\n\tbuild_download_data_link : function(options) {\n\n\t\tconst self = this\n\n\t\t// Options vars\n\t\tvar obj_to_save = options.obj_to_save\n\t\tvar data_type \t= options.data_type || 'json'\n\t\tvar file_name \t= options.file_name || 'download_file'\n\n\t\t//var a = CircularJSON.stringify(obj_to_save, null, 2)\n\t\t//\tconsole.log(\"a:\",a);\n\t\t//return false\n\n\t\t// Label\n\t\tvar label = file_name\n\t\t\n\t\t// Mime\n\t\tvar mime_type = ''\n\t\tvar data \t  = {}\n\t\tswitch(data_type) {\n\t\t\tcase 'csv':\n\t\t\t\tmime_type = 'text/csv'\n\t\t\t\t// Convert json obj to csv\n\t\t\t\tvar csv = self.convert_json_to_csv(obj_to_save)\n\t\t\t\t// Blob data\n\t\t\t\tdata = new Blob([csv], {\n\t\t\t\t    type: mime_type,\n\t\t\t\t    name: 'file.csv'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'json':\t\n\t\t\tdefault:\n\t\t\t\tmime_type = 'application/json'\n\t\t\t\t// Blob data\n\t\t\t\tdata = new Blob([JSON.stringify(obj_to_save, null, 2)], {\n\t\t\t\t    type: mime_type,\n\t\t\t\t    name: 'file.json'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\t\t\n\t\t\n\t\t// Build href from data\n\t\tvar href = URL.createObjectURL(data)\n\n\t\t// link_obj\n\t\tvar link_obj = self.create_dom_element({\n\t\t\telement_type : \"a\",\n\t\t\tclass_name   : \"download_data_link \" + data_type + \" button icon fa-download\",\n\t\t\thref \t\t : href,\n\t\t\tdownload \t : file_name\n\t\t})\n\n\t\t// Icon\n\t\t\t// self.create_dom_element({\n\t\t\t// \telement_type : \"i\",\n\t\t\t// \tclass_name   : \"fa fas fa-download\",\n\t\t\t// \tparent \t\t : link_obj\n\t\t\t// })\n\n\t\t// Label\n\t\tself.create_dom_element({\n\t\t\telement_type : \"span\",\n\t\t\ttext_node    : data_type,\n\t\t\tparent \t\t : link_obj\n\t\t})\n\n\t\t// Beta\n\t\t// self.create_dom_element({\n\t\t// \telement_type : \"i\",\n\t\t// \tclass_name   : \"beta\",\n\t\t// \ttext_node    : \"(beta)\",\n\t\t// \tparent \t\t : link_obj\n\t\t// })\n\n\n\t\treturn link_obj\n\t},//end build_download_data_link\n\n\n\n\t/**\n\t* CONVERT_JSON_TO_CSV\n\t*/\n\tconvert_json_to_csv : function(json_obj) {\n\t\t//console.log(\"json_obj:\",JSON.stringify(json_obj)); return\n\n\t\tvar json = json_obj\n\t\tif(Array.isArray(json)===false) {\n\t\t\tjson = [json]\n\t\t}\n\n\t\tif (json.length===0) {\n\t\t\treturn false\n\t\t}\n\n\t\tvar csv_separator = ';'\n\n\t\tvar fields \t = Object.keys(json[0])\n\t\tvar replacer = function(key, value) { return value === null ? '' : value } \n\t\tvar csv = json.map(function(row){\n\t\t  return fields.map(function(fieldName){\n\t\t  \t\t\n\t\t  \t\tvar current_value = row[fieldName]\t\n\t\t  \t\tvar valor \t\t  = JSON.stringify(current_value, replacer)\t\t  \t\t\n\n\t\t  \t\t/*\n\t\t\t\t\t// Unify format. Remove quotes added ad begining and end by stringify\n\t\t\t\t\tvalor = valor.replace(/(^\\\"|\\\"$)/g, '')\n\t\t\t  \t\t\n\t\t\t\t\t// Replace json objects already stringified like \\\"value to \"value\n\t\t\t\t\tvalor = valor.replace(/(\\\\\\\")/g, '\\\"')\n\n\t\t\t\t\t// Clean json stringified vars\n\t\t\t\t\t//valor = valor.replace(/(\\\"\\[)/g, '\\[')\n\t\t\t\t\t//valor = valor.replace(/(\\]\\\")/g, '\\]')\n\t\t\t\t\t//valor = valor.replace(/(\\\"{)/g, '{')\n\t\t\t\t\t//valor = valor.replace(/(}\\\")/g, '}')\t\t\t\t\t\n\n\t\t\t\t\t// Escape internal quotes (csv escape with double quotes like \"\" for \")\n\t\t\t\t\tvalor = valor.replace(/(\\\")/g, '\\\"\\\"')\n\n\t\t\t\t\t// Add quotes to result in all values\n\t\t\t\t\tvalor = '\"' + valor + '\"'\n\t\t\t\t*/\n\t\t   \t\t//console.log(\"valor [\"+fieldName+\"]:\",valor);\n\t\t    \treturn valor\n\t\t  }).join(csv_separator)\n\t\t})\n\n\t\t// add header column\n\t\tcsv.unshift(fields.join(csv_separator))\n\n\t\t// Create rows separated by \\r\\n\n\t\tcsv = csv.join('\\r\\n')\n\n\t\tif(SHOW_DEBUG===true) {\n\t\t\t// console.log(csv)\n\t\t}\n\t\t\n\t\t\n\t\treturn csv\n\t},//end convert_json_to_csv\n\n\n\n\t/**\n\t* TO_EXPORT_DATA_JSON\n\t*/\n\tto_export_data_json : function(row_object) {\n\t\n\t\tconst self = this\n\n\t\tvar export_obj = {\n\t\t\t// Add common vars\n\t\t\tdata_source_org : \"Numisdata Valencia\",\n\t\t\tdata_source_url : \"https://numisdata.org/valencia/\",\n\t\t\tdata_lang \t \t: page_globals.WEB_CURRENT_LANG_CODE,\n\t\t}\n\n\t\t// Add row_object vars later (order is important for csv)\n\t\tfor(var key in row_object) {\n\n\t\t\tvar value = row_object[key]\n\n\t\t\t// Special cases comma separated values\n\t\t\t//if (key===\"Material links\" || key===\"Equivalents\") {\n\t\t\t//\tvalue = value.split(\", \")\n\t\t\t//}\n\n\t\t\texport_obj[key] = value\n\t\t}\t\t\n\t\t\n\t\tif(SHOW_DEBUG===true) {\n\t\t\t//console.log(\"export_obj:\",export_obj);;\n\t\t}\n\n\t\tself.export_data_json.push(export_obj)\n\n\t\treturn true\n\t},// end to_export_data_json\n\n\n\n\t/**\n\t* ADD_TOOL_TIP\n\t* @return bool\n\t*/\n\tadd_tool_tip : function(item) {\n\t\t\n\t\t// $(item).tooltip()\n\n\t\treturn true\n\t},//end add_tool_tip\n\n\n\n\t/**\n\t* BUILD_PAGINATOR_HTML\n\t* Builds html of paginator from page_nodes\n\t*/\n\tbuild_paginator_html : function(page_nodes_data, container, goto_url) {\n\n\t\tconst self = this\n\n\t\t// wrapper ul\n\t\t\tconst wrapper_ul  = container\n\t\t\t\t  wrapper_ul.dataset.total = page_nodes_data.total\n\n\t\t// iterate nodes\n\t\t\tconst ar_nodes \t\t  = page_nodes_data.ar_nodes\n\t\t\tconst ar_nodes_length = ar_nodes.length\n\t\t\tfor (let i = 0; i < ar_nodes_length; i++) {\n\t\t\t\t\n\t\t\t\tconst node \t\t= ar_nodes[i]\n\t\t\t\tlet label \t\t= node.label\n\t\t\t\tlet class_name \t= \"page \" + node.type + \" \" + node.id\n\t\t\t\tif (node.active===false) {\n\t\t\t\t\tclass_name += \" unactive\"\n\t\t\t\t}\n\n\t\t\t\t// label blank cases \n\t\t\t\t\tif (node.id===\"previous\" || node.id===\"next\" || node.id===\"last\" || node.id===\"first\" ) {\n\t\t\t\t\t\tlabel = \"\"\n\t\t\t\t\t}\n\n\t\t\t\t// switch node.type \n\t\t\t\t\t//switch(node.type){\n\t\t\t\t\t//\tcase \"navigator\":\n\t\t\t\t\t//\t\tclass_name = node.type + \"\"\n\t\t\t\t\t//\t\tbreak;\n\t\t\t\t\t//\tcase \"page\":\n\t\t\t\t\t//\t\tclass_name = node.type + \"\"\n\t\t\t\t\t//\t\tbreak;\n\t\t\t\t\t//}\n\n\t\t\t\t// selected \n\t\t\t\t\tif (node.selected===true) {\n\t\t\t\t\t\tclass_name += \" selected\"\n\t\t\t\t\t}\n\n\t\t\t\t// create_dom_element based on node type \n\t\t\t\t\tif (node.type===\"extra\") {\n\t\t\t\t\t\t// extra (span)\n\t\t\t\t\t\t\tclass_name = node.type\n\n\t\t\t\t\t\t\tconst span = common.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\t\t\tclass_name \t\t: class_name,\n\t\t\t\t\t\t\t\ttext_content \t: label,\n\t\t\t\t\t\t\t\tparent \t\t\t: wrapper_ul\n\t\t\t\t\t\t\t})\n\t\t\t\t\t}else{\n\t\t\t\t\t\t// normal (link)\n\t\t\t\t\t\t\tconst a = common.create_dom_element({\n\t\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\t\tclass_name \t\t: class_name,\n\t\t\t\t\t\t\t\ttext_content \t: label,\n\t\t\t\t\t\t\t\tdataset \t\t: {\n\t\t\t\t\t\t\t\t\toffset : node.offset_value,\n\t\t\t\t\t\t\t\t\tactive : node.active\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tparent \t\t\t: wrapper_ul\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t// link \n\t\t\t\t\t\t\t\tif (node.active===true) {\n\t\t\t\t\t\t\t\t\t/*\n\t\t\t\t\t\t\t\t\tconst params = {\n\t\t\t\t\t\t\t\t\t\t\toffset \t: node.offset_value,\n\t\t\t\t\t\t\t\t\t\t\ttotal \t: page_nodes_data.total\n\t\t\t\t\t\t\t\t\t\t}\t\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\tconst method = typeof goto_url!==\"undefined\" ? goto_url : \"paginator.goto_url\"\n\t\t\t\t\t\t\t\t\ta.addEventListener(\"click\",function(e){\n\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t// exec function custom\n\t\t\t\t\t\t\t\t\t\t\tconst js_promise = new Promise(function(resolve) {\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tlet response\n\t\t\t\t\t\t\t\t\t\t\t\tif (typeof method===\"function\") {\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse = method(params)\n\t\t\t\t\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\t\t\t\t\tresponse = common.execute_function_by_name(method, window, params)\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\tresolve(response)\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\t\tjs_promise.then(function(response){\n\t\t\t\t\t\t\t\t\t\t\t\t// console.log(\"response typeof:\",typeof response, \"- response instanceof:\",response instanceof Promise);\n\t\t\t\t\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t\t\t\t},false) */\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t}//end for loop\n\n\n\t\t// event delegation\n\t\t\twrapper_ul.addEventListener('click', self.paginator_click_event);\n\t\t\n\n\t\treturn wrapper_ul\n\t},//end build_paginator_html\n\n\n\n\t/**\n\t* PAGINATOR_CLICK_EVENT\n\t* Add and manages click events of paginator links (event is delegated on wrap)\n\t*/\n\tpaginator_click_event : function(e) {\n\n\t\tconst element = e.target\n\t\tconst active  = element.dataset.active\n\n\t\tif (active!==\"true\") {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst total \t= element.parentNode.dataset.total \n\t\tconst offset \t= element.dataset.offset\n\t\t\n\n\t\tconst search_form = document.getElementById(\"search_form\")\n\t\tconst js_promise  = catalogo.search(search_form, null, offset, total)\n\n\n\t\t// const options \t= {\n\t\t// \toffset \t: offset,\n\t\t// \ttotal \t: total\n\t\t// }\n\t\t//const js_promise = catalogo.search_rows(options)\n\n\n\t\tjs_promise.then(function(response){\n\n\t\t\t// scroll window to top\tof \tcatalogo_rows_list\t\n\t\t\t\tconst catalogo_rows_list = document.querySelector(\".result\")\n\t\t\t\tcatalogo_rows_list.scrollIntoView({behavior: \"smooth\", block: \"start\", inline: \"start\"})\n\n\t\t})\n\n\t\t//alert(\"paginator_click_event 1\");\n\t\t//console.log(\"paginator_click_event e:\", offset, total);\n\n\t\treturn js_promise\n\t},//end paginator_click_event\n\n\n\n\t/**\n\t* ACTIVATE_TOOLTIPS\n\t*/\n\tactivate_tooltips : function( elements ) {\n\n\t\tif(SHOW_DEBUG===true) {\n\t\t\t//console.log(\"elements:\",elements);\n\t\t}\n\n\t\t$(elements).each(function() {\n\t\t\tnew Tooltip($(this), {\n\t    \t\tplacement: 'top',\n\t    \t});\n\t\t});\t\t\n\t},\n\n\n\n}//end tpl_common\n\n\n\ntpl_common.setup();\n\n\n\nfunction split( val ) {\n  return val.split( /,\\s*/ );\n}\nfunction extractLast( term ) {\n  return split( term ).pop();\n}\n\n\n"]}