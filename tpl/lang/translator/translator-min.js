"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.init_translator=void 0;var _data_manager=require("./data_manager.js"),init_translator=function(e){return build_list(e),!0};exports.init_translator=init_translator;var build_list=function(e){var t=document.getElementById("main"),a=e.data[e.base_lang],n=Object.keys(e.data),r=e.base_lang;n.sort(function(e,t){return e==r?-1:t==r?1:0});for(var l=0;l<n.length;l++){var s=document.createElement("input");s.type="text",s.setAttribute("value",n[l]),s.setAttribute("readonly",!0),s.classList.add("header"),t.appendChild(s)}for(var i in a){var d=[],u={lang:e.base_lang,value:a[i]};d.push(u);for(var o=0;o<n.length;o++){var v=n[o];if(v!==e.base_lang){var c={lang:v,value:e.data[v][i]||null};d.push(c)}}var _=build_line(i,d);t.appendChild(_)}return!0},build_line=function(e,t){for(var a=document.createElement("div"),n=function(n){var r=t[n].value||"",l=t[n].lang,s=document.createElement("input");s.type="text",s.setAttribute("value",r),s.setAttribute("placeholder",e),s.setAttribute("title",e),s.dataset.key=e,s.dataset.lang=l,s.addEventListener("change",function(e){save_lang_file(e.target,l)}),a.appendChild(s)},r=0;r<t.length;r++)n(r);return a},save_lang_file=function(e,t){for(var a={},n=document.querySelectorAll("input[data-lang='"+t+"']"),r=0;r<n.length;r++){var l=n[r].dataset.key,s=n[r].value;a[l]=s}return(0,_data_manager.request)({url:"trigger.translator.php",body:{lang:t,data:a}}).then(function(a){e.classList.remove("saved","not_saved"),a.result<1?(alert("Error on save file "+t+".json"),e.classList.add("not_saved")):(console.log("File saved!:",a),e.classList.add("saved")),setTimeout(function(){e.classList.remove("saved","not_saved")},3e3)}),!0};
//# sourceMappingURL=translator-min.js.map