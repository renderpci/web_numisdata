"use strict";var users={container:null,set_up:function(e){SHOW_DEBUG;const n=this,t=e.row,a=e.main_container,r=e.list_container;if(a){const e=page.parse_ts_web(t)[0];n.render_row(e).then((function(e){a.appendChild(e),event_manager.publish("template_render_end",{item:a})}))}if(r){const e=common.create_dom_element({element_type:"div",class_name:"spinner",parent:r});n.get_users_data().then((function(t){const r=n.render_users_data({parsed_data:t});a.appendChild(r),e.remove()}))}return!0},get_users_data:async function(){const e=await data_manager.request({body:{dedalo_get:"records",table:"activity",ar_fields:["*"],lang:page_globals.WEB_CURRENT_LANG_CODE,limit:0,count:!1}}),n=page.parse_activity_data(e.result);return SHOW_DEBUG,n},render_users_data:function(e){const n=e.parsed_data,t=new DocumentFragment,a={min:1001,max:2e4},r={min:20001,max:6e5},o={min:600001,max:null},m=function(e,n,t,a){const r=Math.min(n,t),o=Math.max(n,t);return a?e>=r&&e<=o:e>r&&e<o},i={gold:[],silver:[],bronze:[],diploma:[]},s=n.length;for(let e=0;e<s;e++){const t=n[e],s=t.activity.what.find((e=>"dd700"===e.key));if(s&&t.full_name){const e=s.value;let n=null;switch(!0){case e>=o.min||1===t.section_id:n="gold";break;case m(e,r.min,r.max,!0):n="silver";break;case m(e,a.min,a.max,!0):n="bronze";break;default:n="diploma"}i[n].push({label:t.full_name,observations:t.observations,value:e,type:n})}}const l=function(e){const n=e.sort((function(e,n){return e.label.localeCompare(n.value,void 0,{numeric:!0,sensitivity:"base"})})),t=new DocumentFragment,a=n.length;for(let e=0;e<a;e++){const a=n[e],r=common.create_dom_element({element_type:"div",class_name:"editor_name",inner_html:a.label,parent:t}),o=a.observations?" | "+a.observations:"";common.create_dom_element({element_type:"span",class_name:"observations",inner_html:o,parent:r})}return t};for(const e in i){const n=common.create_dom_element({element_type:"div",class_name:"editors_block",parent:t});common.create_dom_element({element_type:"h1",class_name:"title",inner_html:tstring[e]||e,parent:n}),n.appendChild(l(i[e]))}return t},render_row:function(e){return new Promise((function(n){const t=new DocumentFragment,a=e.titulo,r=e.entradilla,o=e.cuerpo;if(common.create_dom_element({element_type:"h1",class_name:"title",inner_html:a,parent:t}),r&&r.length>0&&common.create_dom_element({element_type:"p",class_name:"abstract",inner_html:r,parent:t}),e.identify_image&&e.identify_image.length>0){const n=e.identify_image;common.create_dom_element({element_type:"img",class_name:"identify_image",src:n,parent:t})}o&&o.length>0&&common.create_dom_element({element_type:"section",class_name:"content",inner_html:o,parent:t}),n(t)}))}};