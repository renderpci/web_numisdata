!function(){"use strict";const e=function(){};e.prototype.request=async function(e){console.log("++++ data_manager request options:",e);const t=e.url||page_globals.JSON_TRIGGER_URL,n=e.method||"POST",s=e.mode||"cors",a=e.cache||"no-cache",r=e.credentials||"same-origin",o=e.headers||{"Content-Type":"application/json"},c=e.redirect||"follow",i=e.referrer||"no-referrer",l=e.body;l.code||(l.code=page_globals.API_WEB_USER_CODE),l.lang||(l.lang=page_globals.WEB_CURRENT_LANG_CODE),!l.db_name&&page_globals.WEB_DB&&(l.db_name=page_globals.WEB_DB);return fetch(t,{method:n,mode:s,cache:a,credentials:r,headers:o,redirect:c,referrer:i,body:JSON.stringify(l)}).then((function(e){if(!e.ok)throw console.warn("-> handle_errors response:",e),Error(e.statusText);return e})).then(e=>e.json().then(e=>e)).catch(e=>(console.error("!!!!! [page data_manager.request] ERROR:",e),{result:!1,msg:e.message,error:e}))};window.data_manager=new e,window.event_manager=new function(){this.events=[],this.last_token=-1,this.subscribe=function(e,t){const n="event_"+String(++this.last_token),s={event_name:e,token:n,callback:t};return this.events.push(s),n},this.unsubscribe=function(e){return this.events.map((t,n,s)=>{t.token===e&&s.splice(n,1)})},this.publish=function(e,t={}){const n=this.events.filter(t=>t.event_name===e);if(n){return n.map(e=>e.callback(t))}return!1},this.get_events=function(){return this.events},this.fire_event=function(e,t){var n;if(e.ownerDocument)n=e.ownerDocument;else{if(9!=e.nodeType)throw new Error("Invalid node passed to fireEvent: "+e.id);n=e}if(e.dispatchEvent){var s="";switch(t){case"click":case"mousedown":case"mouseup":s="MouseEvents";break;case"focus":case"change":case"blur":case"select":s="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+t+"'."}var a="change"!=t;(r=n.createEvent(s)).initEvent(t,a,!0),r.synthetic=!0,e.dispatchEvent(r,!0)}else if(e.fireEvent){var r;(r=n.createEventObject()).synthetic=!0,e.fireEvent("on"+t,r)}},this.when_in_dom=function(e,t){const n=new MutationObserver((function(s){document.contains(e)&&(n.disconnect(),t(this))}));return n.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),n}},setTimeout((function(){console.log("Activated app_utils !"),console.log("Avilable data_manager:",data_manager),console.log("Avilable event_manager:",event_manager)}),10)}();