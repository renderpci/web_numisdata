"use strict";var _t;function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var common={export_data_json:[],export_data_csv:[],t:(_t={obverse_image:"Obverse image",reverse_image:"Reverse image",section_id:"ID",site:"Site",findspot:"Findspot",type_of_site:"Type of site",weight:"Weight",collection:"Collection",funds:"Funds",bibliographic_ref:"Bibliographic ref",info:"Info",catalogue:"Catalogue",catalogue_number:"Catalogue number",authority:"Authority",mint:"Mint",start_date:"Start date",end_date:"End date",obverse_legend:"Obverse legend",obverse_design:"Obverse design",obverse_symbol:"Obverse symbol",reverse_legend:"Reverse legend",reverse_design:"Reverse design",reverse_symbol:"Reverse symbol",denomination:"Denomination",chronology:"Chronology",material:"Material",material_links:"Material links",diameter:"Diameter",axis:"Axis"},_defineProperty(_t,"funds","Funds"),_defineProperty(_t,"bibliography","Bibliography"),_defineProperty(_t,"equivalents","Equivalents"),_defineProperty(_t,"uri","URI"),_defineProperty(_t,"site_geo_lat","Site GEO lat"),_defineProperty(_t,"site_geo_lon","Site GEO lon"),_t),setup:function(){return $("a.gallery").colorbox({rel:"gal"}),!0},fix_body_height:function(){return!1},draw_rows:function(e){for(var t=document.getElementById(e.target),n=e.ar_rows;t.hasChildNodes();)t.removeChild(t.lastChild);this.export_data_json=[],this.export_data_csv=[];for(var a=n.length,o=0,i=n.length,_=0;_<i;_++){var l=n[_];if(common.draw_row_tipo(l,t),l.monedas)for(var r=common.create_dom_element({element_type:"div",parent:t,class_name:"monedas_wrapper"}),m=l.monedas.length,s=0;s<m;s++){var c=l.monedas[s];c.tipo_object=l,common.draw_row_moneda(c,r),o++}}var d=tstring.tipos||"Tipos",p=tstring.monedas||"Monedas",v=this.create_dom_element({element_type:"div",id:"total_records",parent:t});this.create_dom_element({element_type:"i",class_name:"fas fa-eye",parent:v}).addEventListener("click",function(e){common.toggle_tipos()});this.create_dom_element({element_type:"span",inner_html:d+": "+a,parent:v});this.create_dom_element({element_type:"i",class_name:"fas fa-eye",parent:v}).addEventListener("click",function(e){common.toggle_monedas()});this.create_dom_element({element_type:"span",inner_html:p+": "+o,parent:v});var b=common.export_data_json.filter(function(e){return"coin"===e.data_ref}),f=common.export_data_json.filter(function(e){return"type"===e.data_ref}),g=["data_ref","type_id","data_lang","data_source_url","data_source_org"],u=b.length;for(_=0;_<u;_++){var y=b[_];if(y.types.length>0){var h=y.types[0];f.filter(function(e){return e.type_id===h}).forEach(function(e){for(var t in e)-1===g.indexOf(t)&&(y.hasOwnProperty(t)?!0===SHOW_DEBUG&&console.log("Warning: type property is already used by coin (IGNORED!) ",t):y[t]=e[t])})}}var x=common.create_dom_element({element_type:"div",class_name:"download_buttons_wrapper",parent:t}),j=common.build_download_data_link({obj_to_save:b,data_type:"json",file_name:"sardinia_list.json"});x.appendChild(j);var w=common.build_download_data_link({obj_to_save:b,data_type:"csv",file_name:"sardinia_list.csv"});return x.appendChild(w),!0},draw_row_moneda:function(e,t){var n=this.t,a={data_ref:"coin",types:JSON.parse(e.tipos)},o=e;a[n.section_id]=o.section_id||"";var i=this.create_dom_element({element_type:"div",class_name:"row_container",parent:t});i.addEventListener("click",function(){window.open("mon/"+e.section_id,"_blank")},!1);var _=this.create_dom_element({element_type:"div",class_name:"imagen_anverso",parent:i});if(r=void 0!==o.imagen_anverso[0]?o.imagen_anverso[0].image:null){var l=this.build_thumb_url(r);_.style.backgroundImage="url("+l+")",r=r.replace("/dedalo/media/","/sardinia/media/")}a[n.obverse_image]=window.location.protocol+"//"+window.location.host+r;var r,m=this.create_dom_element({element_type:"div",class_name:"imagen_reverso",parent:i});if(r=void 0!==o.imagen_reverso[0]?o.imagen_reverso[0].image:null){l=this.build_thumb_url(r);m.style.backgroundImage="url("+l+")",r=r.replace("/dedalo/media/","/sardinia/media/")}a[n.reverse_image]=window.location.protocol+"//"+window.location.host+r;var s=this.create_dom_element({element_type:"div",class_name:"right_block",parent:i});if(o.section_id)this.create_dom_element({element_type:"div",class_name:"section_id",text_content:o.section_id,parent:s});if(o.hallazgo)this.create_dom_element({element_type:"div",class_name:"hallazgo",text_content:o.hallazgo,parent:s});if(a[n.site]=o.hallazgo||"",o.peso){var c=o.peso+" g";this.create_dom_element({element_type:"div",class_name:"peso",text_content:c,parent:s})}if(a[n.weight]=o.peso,o.coleccion)this.create_dom_element({element_type:"div",class_name:"coleccion",text_content:o.coleccion,parent:s});if(a[n.collection]=o.coleccion||"",o.fondo)this.create_dom_element({element_type:"div",class_name:"fondo",text_content:o.fondo,parent:s});if(a[n.funds]=o.fondo||"",o.bibliografia)this.create_dom_element({element_type:"div",class_name:"bibliografia",text_content:o.bibliografia,parent:s});if(a[n.bibliographic_ref]=o.bibliografia||"",o.info_publica)this.create_dom_element({element_type:"div",class_name:"info_publica",inner_html:o.info_publica,parent:s});return a[n.info]=o.info_publica||"",this.to_export_data_json(a),!0},draw_row_tipo:function(e,t){var n=this,a=n.t,o={data_ref:"type",type_id:e.section_id},i=common.create_dom_element({element_type:"div",class_name:"tipo_header_wrapper",parent:t});if(e.catalogo){var _=e.catalogo||"",l=common.create_dom_element({element_type:"h1",parent:i,text_content:_,data_set:{section_id:e.section_id}});if(e.catalogo_dato&&e.catalogo_dato.length>0){var r=[];e.catalogo_dato.forEach(function(e){r.push(e.publicacion)}),r.length>0&&(l.title=r.join(", "),$(l).tooltip())}}o[a.catalogue]=e.catalogo||"";var m="",s=e.numero_catalogo||"";if(s.length>0&&(m+=" "+s),o[a.catalogue_number]=e.numero_catalogo||"",e.autoridad){var c=e.autoridad;m+=" "+(c=c.replace(",",", "))}o[a.authority]=void 0!==c?c:"";common.create_dom_element({element_type:"h1",class_name:"catalogo_num",text_content:m,parent:i});if(e.ceca_text){var d=common.create_dom_element({element_type:"div",parent:i,class_name:"ceca_info info_line"});common.create_dom_element({element_type:"div",parent:d,class_name:"info_label",text_content:" | "});var p=common.create_dom_element({element_type:"div",parent:d,class_name:"info_value",text_content:e.ceca_text});if(e.ceca_links)split(e.ceca_links).forEach(function(e){var t=n.create_dom_element({element_type:"a",class_name:"fas fa-external-link-alt",parent:p});t.setAttribute("target","_blank"),t.setAttribute("href",e),t.setAttribute("title","Go to: "+e),$(t).tooltip()})}if(o[a.mint]=e.ceca_text||"",e.denominacion){var v=common.create_dom_element({element_type:"div",parent:i,class_name:"denominacion_info info_line"});common.create_dom_element({element_type:"div",parent:v,class_name:"info_label",text_content:" | "});var b=common.create_dom_element({element_type:"div",parent:v,class_name:"info_value",text_content:e.denominacion});if(e.denominacion_iri)split(e.denominacion_iri).forEach(function(e){var t=n.create_dom_element({element_type:"a",class_name:"fas fa-external-link-alt",parent:b});t.setAttribute("target","_blank"),t.setAttribute("href",e),t.setAttribute("title","Go to: "+e),$(t).tooltip()})}if(o[a.denomination]=e.denominacion||"",e.fecha_inicio){var f=common.create_dom_element({element_type:"div",parent:i,class_name:"fecha_info info_line"});common.create_dom_element({element_type:"div",parent:f,class_name:"info_label",text_content:" | "});var g=e.fecha_inicio;e.fecha_fin&&(g+=" -> "+e.fecha_fin),common.create_dom_element({element_type:"div",parent:f,class_name:"info_value",text_content:g})}o[a.start_date]=e.fecha_inicio||"",o[a.end_date]=e.fecha_fin||"";var u=n.create_dom_element({element_type:"div",class_name:"tipo_add_info",parent:t});if(e&&(e.leyenda_anverso||e.tipo_anverso||e.simbolo_anverso)){n.create_dom_element({element_type:"span",class_name:"title_leyenda",text_content:tstring.anverso+" ",parent:u});if(e.leyenda_anverso)n.create_dom_element({element_type:"div",class_name:"leyenda_anverso",text_content:tstring.leyenda+": "+e.leyenda_anverso,parent:u});if(e.tipo_anverso)n.create_dom_element({element_type:"div",class_name:"tipo_anverso",text_content:tstring.diseno+": "+e.tipo_anverso,parent:u});if(e.simbolo_anverso)n.create_dom_element({element_type:"div",class_name:"simbolo_anverso",text_content:tstring.simbolo+": "+e.simbolo_anverso,parent:u})}if(o[a.obverse_legend]=e.leyenda_anverso||"",o[a.obverse_design]=e.tipo_anverso||"",o[a.obverse_symbol]=e.simbolo_anverso||"",e&&(e.leyenda_reverso||e.tipo_reverso||e.simbolo_reverso)){n.create_dom_element({element_type:"span",class_name:"title_leyenda",text_content:tstring.reverso+" ",parent:u});if(e.leyenda_reverso)n.create_dom_element({element_type:"div",class_name:"leyenda_reverso",text_content:tstring.leyenda+": "+e.leyenda_reverso,parent:u});if(e.tipo_reverso)n.create_dom_element({element_type:"div",class_name:"tipo_reverso",text_content:tstring.diseno+": "+e.tipo_reverso,parent:u});if(e.simbolo_reverso)n.create_dom_element({element_type:"div",class_name:"simbolo_reverso",text_content:tstring.simbolo+": "+e.simbolo_reverso,parent:u})}return o[a.reverse_legend]=e.leyenda_reverso||"",o[a.reverse_design]=e.tipo_reverso||"",o[a.reverse_symbol]=e.simbolo_reverso||"",n.to_export_data_json(o),!0},build_detail:function(e){var t=this,n=t.t,a={data_ref:"coin",types:JSON.parse(e.tipos)},o=e.tipo_object,i=t.create_dom_element({element_type:"div",class_name:"detail_container"}),_=t.create_dom_element({element_type:"div",class_name:"left_detail",parent:i}),l=t.create_dom_element({element_type:"div",class_name:"imagen_anverso",parent:_});if(c=void 0!==e.imagen_anverso[0]?e.imagen_anverso[0].image:null){var r=t.build_thumb_url(c,320,320);l.style.backgroundImage="url("+r+")"}var m=t.create_dom_element({element_type:"div",class_name:"imagen_anverso_big"}),s=t.build_big_image_url(c);m.style.backgroundImage="url("+s+")",a[n.obverse_image]=window.location.protocol+s,(p=t.create_dom_element({element_type:"a",class_name:"fas fa-arrow-alt-circle-down download_image",parent:m})).setAttribute("download","sardinia-"+e.section_id+"-A.jpg"),p.setAttribute("target","_blank"),p.setAttribute("href",s),l.addEventListener("click",function(e){$.colorbox({html:m,transition:"none",speed:300})});var c,d=t.create_dom_element({element_type:"div",class_name:"imagen_reverso",parent:_});if(c=void 0!==e.imagen_reverso[0]?e.imagen_reverso[0].image:null){r=t.build_thumb_url(c,320,320);d.style.backgroundImage="url("+r+")"}var p,v=t.create_dom_element({element_type:"div",class_name:"imagen_reverso_big"});s=t.build_big_image_url(c);v.style.backgroundImage="url("+s+")",a[n.reverse_image]=window.location.protocol+s,(p=t.create_dom_element({element_type:"a",class_name:"fas fa-arrow-alt-circle-down download_image",parent:v})).setAttribute("download","sardinia-"+e.section_id+"-R.jpg"),p.setAttribute("target","_blank"),p.setAttribute("href",s),d.addEventListener("click",function(e){$.colorbox({html:v,transition:"none",speed:300})});var b=t.create_dom_element({element_type:"div",class_name:"right_detail",parent:i}),f=t.create_dom_element({element_type:"div",class_name:"line",parent:b});t.create_dom_element({element_type:"label",class_name:"label_section_id",text_content:tstring.id||"ID",parent:f}),t.create_dom_element({element_type:"div",class_name:"section_id",text_content:e.section_id,parent:f}),a[n.section_id]=e.section_id;var g=t.create_dom_element({element_type:"div",class_name:"separator hallazgo_detail",parent:b});if(e.hallazgo){f=t.create_dom_element({element_type:"div",class_name:"line",parent:g});t.create_dom_element({element_type:"label",text_content:tstring.yacimiento||"Yacimiento",parent:f}),t.create_dom_element({element_type:"div",class_name:"hallazgo",text_content:e.hallazgo,parent:f})}a[n.site]=e.hallazgo||"";var u="",y="";if(void 0!==e.hallazgo_dato[0]&&(u=t.extract_geo(e.hallazgo_dato[0],"lat"),y=t.extract_geo(e.hallazgo_dato[0],"lon")),a[n.site_geo_lat]=u,a[n.site_geo_lon]=y,void 0!==e.hallazgo_dato[0]&&void 0!==e.hallazgo_dato[0].tipologia){f=t.create_dom_element({element_type:"div",class_name:"line",parent:g});t.create_dom_element({element_type:"label",text_content:tstring.tipo_de_yacimiento||"Tipo de yacimiento",parent:f}),t.create_dom_element({element_type:"div",class_name:"tipo_de_hallazgo",text_content:e.hallazgo_dato[0].tipologia,parent:f})}if(a[n.type_of_site]=void 0!==e.hallazgo_dato[0]&&void 0!==e.hallazgo_dato[0].tipologia?e.hallazgo_dato[0].tipologia:"",void 0!==e.hallazgo_dato[0]&&void 0!==e.hallazgo_dato[0].municipio){f=t.create_dom_element({element_type:"div",class_name:"line",parent:g});t.create_dom_element({element_type:"label",text_content:tstring.localizacion||"Localización",parent:f});var h=void 0!==e.hallazgo_dato[0].municipio?e.hallazgo_dato[0].municipio:"";t.create_dom_element({element_type:"div",class_name:"localizacion",text_content:h,parent:f})}a[n.findspot]=void 0!==e.hallazgo_dato[0]&&void 0!==e.hallazgo_dato[0].municipio?e.hallazgo_dato[0].municipio:"";var x=t.create_dom_element({element_type:"div",class_name:"separator ceca_detail",parent:b});if(e.ceca){f=t.create_dom_element({element_type:"div",class_name:"line",parent:x});t.create_dom_element({element_type:"label",text_content:tstring.ceca||"Ceca",parent:f});var j=t.create_dom_element({element_type:"div",class_name:"ceca",text_content:t.remove_string_double_values(e.ceca,","),parent:f});if(e.tipo_object.ceca_links)split(e.tipo_object.ceca_links).forEach(function(e){var n=t.create_dom_element({element_type:"a",class_name:"fas fa-external-link-alt",parent:j});n.setAttribute("target","_blank"),n.setAttribute("href",e),n.setAttribute("title","Go to: "+e),$(n).tooltip()})}if(a[n.mint]=e.ceca||"",e.cronologia){f=t.create_dom_element({element_type:"div",class_name:"line",parent:x});t.create_dom_element({element_type:"label",text_content:tstring.cronologia||"Cronología",parent:f});var w=split(e.cronologia);t.create_dom_element({element_type:"div",class_name:"cronologia",text_content:w[0],parent:f})}if(a[n.start_date]=o.fecha_inicio||"",a[n.end_date]=o.fecha_fin||"",e.tipo_object.autoridad){f=t.create_dom_element({element_type:"div",class_name:"line",parent:x});t.create_dom_element({element_type:"label",text_content:tstring.autoridad||"Autoridad",parent:f});var k="";if(k.length<1){var E=e.tipo_object.autoridad;k=E=E.replace(",",", ")}var A=t.create_dom_element({element_type:"div",class_name:"autoridad",text_content:k,parent:f});if(e.tipo_object.autoridad_dato&&void 0!==e.tipo_object.autoridad_dato[0]&&void 0!==e.tipo_object.autoridad_dato[0].uri)split(e.tipo_object.autoridad_dato[0].uri).forEach(function(e){var n=t.create_dom_element({element_type:"a",class_name:"fas fa-external-link-alt",parent:A});n.setAttribute("target","_blank"),n.setAttribute("href",e),n.setAttribute("title","Go to: "+e),$(n).tooltip()})}if(a[n.authority]=void 0!==k?k:"",e.tipo_object.denominacion){f=t.create_dom_element({element_type:"div",class_name:"line",parent:x});t.create_dom_element({element_type:"label",text_content:tstring.denominacion||"Denominacion",parent:f});var z=t.create_dom_element({element_type:"div",class_name:"denominacion",text_content:e.tipo_object.denominacion,parent:f});if(e.tipo_object.denominacion_iri)split(e.tipo_object.denominacion_iri).forEach(function(e){var n=t.create_dom_element({element_type:"a",class_name:"fas fa-external-link-alt",parent:z});n.setAttribute("target","_blank"),n.setAttribute("href",e),n.setAttribute("title","Go to: "+e),$(n).tooltip()})}if(a[n.denomination]=e.tipo_object.denominacion||"",e.tipo_object.material){f=t.create_dom_element({element_type:"div",class_name:"line",parent:x});t.create_dom_element({element_type:"label",text_content:tstring.material||"Material",parent:f});var O=t.create_dom_element({element_type:"div",class_name:"material",text_content:e.tipo_object.material,parent:f});if(e.tipo_object.material_links)split(e.tipo_object.material_links).forEach(function(e){var n=t.create_dom_element({element_type:"a",class_name:"fas fa-external-link-alt",parent:O});n.setAttribute("target","_blank"),n.setAttribute("href",e),n.setAttribute("title","Go to: "+e),$(n).tooltip()})}a[n.material]=e.tipo_object.material||"",a[n.material_links]=e.tipo_object.material_links||"";var S=t.create_dom_element({element_type:"div",class_name:"separator medida_detail",parent:b});if(e.peso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:S});t.create_dom_element({element_type:"label",text_content:tstring.peso||"Peso",parent:f}),t.create_dom_element({element_type:"div",class_name:"peso",text_content:e.peso+" g",parent:f})}if(a[n.weight]=e.peso||"",e.diametro){f=t.create_dom_element({element_type:"div",class_name:"line",parent:S});t.create_dom_element({element_type:"label",text_content:tstring.diametro||"Diámetro",parent:f}),t.create_dom_element({element_type:"div",class_name:"diametro",text_content:e.diametro+" mm",parent:f})}if(a[n.diameter]=e.diametro||"",e.cuno&&e.cuno.length>0){f=t.create_dom_element({element_type:"div",class_name:"line",parent:S});t.create_dom_element({element_type:"label",text_content:tstring.posicion_cunos||"Posición de cuños",parent:f}),t.create_dom_element({element_type:"div",class_name:"posicion_cunos",text_content:e.cuno+" h",parent:f})}a[n.axis]=e.cuno||"";var R=t.create_dom_element({element_type:"div",class_name:"separator anverso_detail",parent:b});f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});if(t.create_dom_element({element_type:"label",text_content:(tstring.anverso||"ANVERSO")+":",parent:f}),t.create_dom_element({element_type:"div",class_name:"leyenda_anverso",parent:f}),e.tipo_object.leyenda_anverso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:tstring.leyenda||"Leyenda",parent:f}),t.create_dom_element({element_type:"div",class_name:"leyenda_anverso",text_content:e.tipo_object.leyenda_anverso,parent:f})}if(e.tipo_object.tipo_anverso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:tstring.diseno||"Diseño",parent:f}),t.create_dom_element({element_type:"div",class_name:"diseno_anverso",text_content:e.tipo_object.tipo_anverso,parent:f})}if(e.tipo_object.simbolo_anverso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:tstring.simbolo||"Símbolo",parent:f}),t.create_dom_element({element_type:"div",class_name:"simbolo_anverso",text_content:e.tipo_object.simbolo_anverso,parent:f})}if(a[n.obverse_legend]=e.tipo_object.leyenda_anverso||"",a[n.obverse_design]=e.tipo_object.tipo_anverso||"",a[n.obverse_symbol]=e.tipo_object.simbolo_anverso||"",e.tipo_object.leyenda_reverso||e.tipo_object.tipo_reverso||e.tipo_object.simbolo_reverso){R=t.create_dom_element({element_type:"div",class_name:"separator reverso_detail",parent:b}),f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:(tstring.reverso||"REVERSO")+":",parent:f}),t.create_dom_element({element_type:"div",class_name:"leyenda_reverso",parent:f})}if(e.tipo_object.leyenda_reverso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:tstring.leyenda||"Leyenda",parent:f}),t.create_dom_element({element_type:"div",class_name:"leyenda_reverso",text_content:e.tipo_object.leyenda_reverso,parent:f})}if(e.tipo_object.tipo_reverso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:tstring.diseno||"Diseño",parent:f}),t.create_dom_element({element_type:"div",class_name:"diseno_reverso",text_content:e.tipo_object.tipo_reverso,parent:f})}if(e.tipo_object.simbolo_reverso){f=t.create_dom_element({element_type:"div",class_name:"line",parent:R});t.create_dom_element({element_type:"label",text_content:tstring.simbolo||"Símbolo",parent:f}),t.create_dom_element({element_type:"div",class_name:"simbolo_reverso",text_content:e.tipo_object.simbolo_reverso,parent:f})}a[n.reverse_legend]=e.tipo_object.leyenda_reverso||"",a[n.reverse_design]=e.tipo_object.tipo_reverso||"",a[n.reverse_symbol]=e.tipo_object.simbolo_reverso||"";var B=t.create_dom_element({element_type:"div",class_name:"separator biblio_detail",parent:b});if(e.coleccion){f=t.create_dom_element({element_type:"div",class_name:"line",parent:B});t.create_dom_element({element_type:"label",text_content:tstring.coleccion||"coleccion",parent:f}),t.create_dom_element({element_type:"div",class_name:"coleccion",inner_html:e.coleccion,parent:f})}if(a[n.collection]=e.coleccion||"",e.fondo){f=t.create_dom_element({element_type:"div",class_name:"line",parent:B});t.create_dom_element({element_type:"label",text_content:tstring.fondo||"fondo",parent:f}),t.create_dom_element({element_type:"div",class_name:"fondo",inner_html:e.fondo,parent:f})}a[n.funds]=e.fondo||"";var C=[];if(e.bibliografia&&e.bibliografia_ref)for(var D=split(e.bibliografia),L=0;L<D.length;L++){var G=D[L],I="",N="";e.bibliografia_ref&&void 0!==(N=split(e.bibliografia_ref))[L]&&(N=N[L]),e.bibliografia_paginas&&void 0!==(I=split(e.bibliografia_paginas))[L]&&(I=I[L]);f=t.create_dom_element({element_type:"div",class_name:"line",parent:B});t.create_dom_element({element_type:"label",text_content:tstring.bibliografia||"Bibliografía",parent:f});var P=G+" Ref: "+N+" Pag. "+I;C.push(P),t.create_dom_element({element_type:"div",class_name:"bibliografia",text_content:P,parent:f})}if(a[n.bibliographic_ref]=C.join(", "),e.publicaciones&&e.publicaciones.forEach(function(e){var n=t.create_dom_element({element_type:"div",class_name:"line",parent:B});t.create_dom_element({element_type:"label",text_content:tstring.bibliografia||"Bibliografía",parent:n});var a=e.autoria+" "+e.titulo+" "+e.fecha_publicacion;t.create_dom_element({element_type:"div",class_name:"publicaciones",text_content:a,parent:n})}),a[n.bibliography]="undefined"!=typeof bibliografia_title?bibliografia_title:"",e.info_publica&&'<br data-mce-bogus="1">'!==e.info_publica){f=t.create_dom_element({element_type:"div",class_name:"line",parent:B});t.create_dom_element({element_type:"label",text_content:tstring.notas||"Notas",parent:f}),t.create_dom_element({element_type:"div",class_name:"notas",inner_html:e.info_publica,parent:f})}a[n.info]=e.info_publica||"";var M=t.create_dom_element({element_type:"div",class_name:"separator uri_detail",parent:b});if(e.tipo_object.catalogo){f=t.create_dom_element({element_type:"div",class_name:"line",parent:M});t.create_dom_element({element_type:"label",text_content:tstring.refeferencia_bibliografica||"Ref bibliografia",parent:f});var U=[];U.push(e.tipo_object.catalogo),e.tipo_object.numero_catalogo&&U.push(e.tipo_object.numero_catalogo),k&&U.push(k);var W=[];e.tipo_object.ceca_text&&W.push(e.tipo_object.ceca_text),e.tipo_object.denominacion&&W.push(e.tipo_object.denominacion);var T=U.join(" ")+" | "+W.join(" | ");t.create_dom_element({element_type:"div",class_name:"tipo",inner_html:T,parent:f})}if(a[n.catalogue]=e.tipo_object.catalogo||"",a[n.catalogue_number]=e.tipo_object.numero_catalogo||"",e.tipo_object.equivalentes&&e.tipo_object.equivalentes.length>0){f=t.create_dom_element({element_type:"div",class_name:"line",parent:M});t.create_dom_element({element_type:"label",text_content:"",parent:f}),t.create_dom_element({element_type:"div",class_name:"equivalentes",inner_html:e.tipo_object.equivalentes,parent:f})}var q=e.tipo_object.equivalentes.replace(/<br>/g,", ");a[n.equivalents]=q;f=t.create_dom_element({element_type:"div",class_name:"line uri_line",parent:M});t.create_dom_element({element_type:"label",text_content:tstring.uri||"URI",parent:f});var H=t.create_dom_element({element_type:"div",class_name:"uri",parent:f}),J="https://numisdata.org/sardinia/mon/"+e.section_id;return t.create_dom_element({element_type:"a",text_content:J,href:J,parent:H}),a[n.uri]=J||"",t.to_export_data_json(a),SHOW_DEBUG,i},extract_geo:function(e,t){var n="",a=JSON.parse(e.lugar);return void 0!==a[0]&&void 0!==a[0].layer_data[0]&&void 0!==a[0].layer_data[0][t]&&(n=a[0].layer_data[0][t]),n},open_detail:function(e,t){var n=this.build_detail(t);return $.colorbox({html:n,transition:"none",speed:300}),!0},build_thumb_url:function(e,t,n){if(!e||e.length<1)return!1;var a=e,o=t||125,i=n||125,_="/image/"+a.split("/image/").pop();return a=(a=a.replace("/media_test/media_sardinia/dedalo4/","/")).replace("/media/dedalo/","/"),a="//sardinia.numisdata.org/dedalo/lib/dedalo/media_engine/img.php?m=free&w="+o+"&h="+i+"&SID="+_},build_big_image_url:function(e,t,n){if(!e||e.length<1)return!1;var a=e;return a="//numisdata.org"+(a=(a=(a=a.replace("/dedalo/media/","/sardinia/media/")).replace("/sardinia/sardinia/","/sardinia/")).replace("/1.5MB/","/original/"))},create_dom_element:function(e){var t=e.element_type,n=e.parent,a=e.class_name,o=e.style,i=e.data_set;void 0===i&&void 0!==e.dataset&&(i=e.dataset);var _=e.custom_function_events,l=e.title_label,r=e.text_node,m=e.text_content,s=e.inner_html,c=e.href,d=e.id,p=e.draggable,v=e.value,b=e.download,f=document.createElement(t);if(d&&(f.id=d),"a"===t&&(f.href=c||"javascript:;"),a&&(f.className=a),o)for(g in o)f.style[g]=o[g];if(l&&(f.title=l),i)for(var g in i)f.dataset[g]=i[g];if(v&&(f.value=v),_)for(var u=_.length,y=0;y<u;y++){var h=_[y].name,x=_[y].type,j=_[y].function_arguments;this.create_custom_events(f,x,h,j)}if(r)if("span"===t)f.textContent=r;else{var w=document.createElement("span");w.innerHTML=" "+r,f.appendChild(w)}else m?f.textContent=m:s&&(f.innerHTML=s);return n&&n.appendChild(f),p&&(f.draggable=p),b&&f.setAttribute("download",b),f},remove_string_double_values:function(e,t){if(null===e)return null;var n=e.split(t),a=[];return n.forEach(function(e){-1===a.indexOf(e)&&a.push(e)}),a.join(t)},toggle_monedas:function(){return $(".monedas_wrapper").toggle(),!0},toggle_tipos:function(){return $(".tipo_header_wrapper, .tipo_add_info").toggle(),!0},load_snippet:function(e,t){var n=page_globals.__WEB_TEMPLATE_WEB__+"/common/trigger.common.php",a={mode:"load_snippet",snippet_name:e};return common.get_json_data(n,a).then(function(e){if(!0===SHOW_DEBUG&&console.log("[common.load_snippet] response:",e),e||console.warn("[common.load_snippet] Error. Received response data is null"),t){var n=document.getElementById(t);n&&(n.innerHTML=e.result)}return e})},build_download_data_link:function(e){var t=e.obj_to_save,n=e.data_type||"json",a=e.file_name||"download_file",o="",i={};switch(n){case"csv":o="text/csv";var _=this.convert_json_to_csv(t);i=new Blob([_],{type:o,name:"file.csv"});break;case"json":default:o="application/json",i=new Blob([JSON.stringify(t,null,2)],{type:o,name:"file.json"})}var l=URL.createObjectURL(i),r=this.create_dom_element({element_type:"a",class_name:"download_data_link "+n,href:l,download:a});return this.create_dom_element({element_type:"i",class_name:"fas fa-download",parent:r}),this.create_dom_element({element_type:"span",text_node:n,parent:r}),this.create_dom_element({element_type:"i",class_name:"beta",text_node:"(beta)",parent:r}),r},convert_json_to_csv:function(e){var t=e;if(!1===Array.isArray(t)&&(t=[t]),0===t.length)return!1;var n=Object.keys(t[0]),a=function(e,t){return null===t?"":t},o=t.map(function(e){return n.map(function(t){var n=e[t];return JSON.stringify(n,a)}).join(",")});return o.unshift(n.join(",")),o=o.join("\r\n"),!0===SHOW_DEBUG&&console.log(o),o},to_export_data_json:function(e){var t={data_source_org:"Numisdata Sardinia",data_source_url:"https://numisdata.org/sardinia/",data_lang:page_globals.WEB_CURRENT_LANG_CODE};for(var n in e){var a=e[n];t[n]=a}return SHOW_DEBUG,this.export_data_json.push(t),!0}};function split(e){return e.split(/,\s*/)}function extractLast(e){return split(e).pop()}common.setup();
//# sourceMappingURL=common-min.js.map