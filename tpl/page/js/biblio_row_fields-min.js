"use strict";var biblio_row_fields={biblio_object:null,caller:null,get_typology:function(){const e=this.biblio_object.typology||"[]",t=JSON.parse(e);return"1"==(void 0!==t[0]?t[0]:0)?"book":"article"},author:function(){const e=this.biblio_object,t=common.create_dom_element({element_type:"div",class_name:"info_line author"});if(!0===dedalo_logged){common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",text_content:e.section_id+" "+this.get_typology(),href:"/dedalo/lib/dedalo/main/?t=rsc205&id="+e.section_id,parent:t}).setAttribute("target","_blank")}if(e.authors&&e.authors.length>0){const o=e.authors_data,l=o.length,_=[];for(var n=0;n<l;n++){const e=[];o[n].surname&&e.push(o[n].surname),o[n].name&&e.push(o[n].name);const t=e.join(", ");_.push(t)}const a=_.join("; ");common.create_dom_element({element_type:"div",class_name:"info_value",text_content:a,parent:t})}else common.create_dom_element({element_type:"div",class_name:"info_value",text_content:"Undefined author",parent:t});return t},publication_date:function(){const e=this.biblio_object,t=common.create_dom_element({element_type:"div"});let n="";if(e.publication_date&&e.publication_date.length>0){const t=e.publication_date.split("-");n=void 0!==t[0]?parseInt(t[0]):"",t[2],parseInt(t[2])>0&&(n=n+"-"+parseInt(t[2]))}return common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t}),t.classList.remove("hide"),t},row_title:function(){const e=this.biblio_object,t=this.get_typology(),n=[];if(e.pdf)n.push({title:"Download pdf",iri:page_globals.__WEB_MEDIA_BASE_URL__+e.pdf});else if(e.pdf_uri){const t=JSON.parse(e.pdf_uri);n.push(...t)}const o=n.length,l=common.create_dom_element({element_type:"div",class_name:"info_line row_title"}),_=e.title||"",a="book"===t?" italic":"";common.create_dom_element({element_type:"div",class_name:"title"+a+(o>0?" blue":""),text_content:_,parent:l});for(let e=0;e<o;e++){const t=n[e],o=t.title,_=t.iri;common.create_dom_element({element_type:"div",class_name:"pdf",title:o,parent:l}).addEventListener("click",(e=>{window.open(_,"PDF","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes")}))}return l},row_body:function(){const e=this.biblio_object,t=this.get_typology(),n=common.create_dom_element({element_type:"div",class_name:"info_line row_body "+t});if("book"===t){if(e.other_people_full_names&&e.other_people_full_names.length>0){const t=e.other_people_full_names.split(" | "),o=e.other_people_full_roles.split(" | "),l=tstring.in||"In";common.create_dom_element({element_type:"span",class_name:"info_value other_people_full_names grey",text_content:l,parent:n});const _=t.length;for(let e=0;e<_;e++){const o=t[e],l=0!==e?", "+o:" "+o;common.create_dom_element({element_type:"span",class_name:"info_value other_people_full_names grey",text_content:l,parent:n})}const a=void 0!==o[0]?" ("+o[0].toLowerCase()+".): ":" ";common.create_dom_element({element_type:"span",class_name:"info_value other_people_full_names grey",text_content:a,parent:n})}if(e.title_secondary){const t=e.title_secondary?e.title_secondary:"";common.create_dom_element({element_type:"div",class_name:"info_value volume grey italic",text_content:t,parent:n})}if(e.place){const t=e.title_secondary?", ":"";common.create_dom_element({element_type:"div",class_name:"info_value place grey",text_content:t+e.place,parent:n})}}else{if(e.other_people_full_names&&e.other_people_full_names.length>0){const t=e.other_people_full_names.split(" | "),o=e.other_people_full_roles.split(" | "),l=tstring.in||"In";common.create_dom_element({element_type:"span",class_name:"info_value other_people_full_names grey",text_content:l,parent:n});const _=t.length;for(let e=0;e<_;e++){const o=t[e],l=0!==e?", "+o:" "+o;common.create_dom_element({element_type:"span",class_name:"info_value other_people_full_names grey",text_content:l,parent:n})}const a=void 0!==o[0]?" ("+o[0].toLowerCase()+".): ":" ";common.create_dom_element({element_type:"span",class_name:"info_value other_people_full_names grey",text_content:a,parent:n})}if(e.title_secondary){const t=e.title_secondary?e.title_secondary:"",o=e.magazine?", ":"";common.create_dom_element({element_type:"span",class_name:"info_value volume grey italic",text_content:t+o,parent:n})}if(e.magazine&&common.create_dom_element({element_type:"span",class_name:"info_value magazine grey italic",text_content:e.magazine,parent:n}),e.serie){const t=n.children.length>0?" ":"";common.create_dom_element({element_type:"span",class_name:"info_value serie grey",inner_html:t+e.serie,parent:n})}if(e.place){const t=n.children.length>0?", ":"";common.create_dom_element({element_type:"span",class_name:"info_value place grey",text_content:t+e.place,parent:n})}if(e.physical_description){const t=n.children.length>0?", ":"";common.create_dom_element({element_type:"span",class_name:"info_value physical_description grey",text_content:t+e.physical_description,parent:n})}}return n},row_url:function(){const e=this.biblio_object,t=common.create_dom_element({element_type:"div",class_name:"info_line row_url"}),n=e.url_data;if(n&&n.length>0){const e=JSON.parse(n),o=e.length;for(let n=0;n<o;n++){const l=e[n];common.create_dom_element({element_type:"a",class_name:"url_data",title:l.title,text_content:l.title,href:l.iri,parent:t}).target="_blank",!(n%2)&&n<o&&o>1&&common.create_dom_element({element_type:"span",class_name:"separator",text_content:" | ",parent:t})}}return t},descriptors:function(e){const t=this,n=common.create_dom_element({element_type:"div",class_name:"info_line descriptors"}),o=e.split(" - ");for(let e=0;e<o.length;e++){const l=o[e];common.create_dom_element({element_type:"a",class_name:"descriptors_link",text_content:l,parent:n}).addEventListener("click",(function(){t.caller.search_item("descriptors",l)}))}return n},transcription:function(e){const t=new DocumentFragment;for(let n in e){const o=e[n];for(let e=0;e<o.length;e++){const n=o[e].page_number,l=o[e].fragm,_=common.create_dom_element({element_type:"div",class_name:"occurrence",parent:t});common.create_dom_element({element_type:"div",class_name:"page_number",inner_html:(tstring.page||"Page")+" "+n,parent:_}),common.create_dom_element({element_type:"div",class_name:"item_transcription",inner_html:l,parent:_})}}const n=common.create_dom_element({element_type:"div",class_name:"info_value transcription"});return n.appendChild(t),n},render_row_bibliography:function(e){let t=e;const n=t.ref_publications_url;null!=n&&n.includes("/Record/")&&(t=function(e){const t=e;for(const e in t)"string"==typeof t[e]&&null!=t[e]&&t[e].includes(" # ")&&(t[e]=t[e].split(" # ")[0]);return t}(t));const o=common.create_dom_element({element_type:"div",class_name:"info_line row_title"}),l=t.ref_publications_authors?t.ref_publications_authors.replace(/ \| /g,"; "):"";common.create_dom_element({element_type:"span",inner_html:l,parent:o});const _=t.ref_publications_date?" ("+t.ref_publications_date+"): ":"";common.create_dom_element({element_type:"span",inner_html:_,parent:o});const a=t.ref_publications_title?t.ref_publications_title+". ":"",m='["1"]'===t.ref_publications_typology||'["4"]'===t.ref_publications_typology?"<em>"+a+"</em>":a;common.create_dom_element({element_type:"span",inner_html:m,parent:o});const c=t.ref_publications_magazine?"<em>"+t.ref_publications_magazine+" </em>":"";common.create_dom_element({element_type:"span",inner_html:c,parent:o});const i=t.ref_publications_magazine_number?" "+t.ref_publications_magazine_number:"";if(common.create_dom_element({element_type:"span",inner_html:i,parent:o}),t.ref_publications_other_people_full_names&&t.ref_publications_other_people_full_names.length>0){const e=t.ref_publications_other_people_full_names.split(" | "),n=t.ref_publications_other_people_full_roles.split(" | "),l=tstring.in||"In";common.create_dom_element({element_type:"span",text_content:l,parent:o});const _=e.length;for(let t=0;t<_;t++){const n=e[t],l=0!==t?", "+n:" "+n;common.create_dom_element({element_type:"span",text_content:l,parent:o})}const a=void 0!==n[0]?" ("+n[0].toLowerCase()+".): ":" ";common.create_dom_element({element_type:"span",text_content:a,parent:o})}const r=t.ref_publications_title_colective?"<em>"+t.ref_publications_title_colective+"</em>":null,s=r&&t.ref_publications_place?r+", ":r;common.create_dom_element({element_type:"span",inner_html:s,parent:o});const p=t.ref_publications_place?" "+t.ref_publications_place:"";common.create_dom_element({element_type:"span",inner_html:p,parent:o});const d=t.pages?", p. "+t.pages:"";common.create_dom_element({element_type:"span",inner_html:d,parent:o});const u=t.sheet?", "+t.sheet:"";common.create_dom_element({element_type:"span",inner_html:u,parent:o});const h=t.reference?", n. "+t.reference:"";common.create_dom_element({element_type:"span",inner_html:h,parent:o}),common.create_dom_element({element_type:"span",inner_html:".",parent:o});const f=t.ref_publications_url?t.ref_publications_url.split(", ")[0]:"",y=t.ref_publications_url?t.ref_publications_url.split(", ")[1]:"",g=y?' | <a href="'+y+'">'+f+" </a> ":"";return common.create_dom_element({element_type:"span",inner_html:g,parent:o}),o},render_cite_this:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line cite_this"});if(e.autors.authorship_names&&e.autors.authorship_surnames){const n=e.autors.authorship_names.split(" | "),o=e.autors.authorship_surnames.split(" | "),l=[],_=o.length;for(let e=0;e<_;e++){const t=o[e],_=n[e],a=[];_.split(" ").map((e=>""!=e.charAt(0)?a.push(e.charAt(0)):""));const m=a.join(".")+".",c=t.split(" "),i=(c.length>1?c.slice(0,1):c).join(" ")+", "+m;l.push(i)}const a=l.join("; ");common.create_dom_element({element_type:"span",inner_html:a,parent:t});const m=e.publication_data.publication_date.split("-"),c=void 0!==m[0]?parseInt(m[0]):null,i=c?" ("+c+"): ":"";common.create_dom_element({element_type:"span",inner_html:i,parent:t})}const n=[];e.catalog&&n.push("<em>"+e.catalog+"</em>"),e.title&&n.push(e.title);const o=n.join(" ");if(n.length>0&&common.create_dom_element({element_type:"span",inner_html:o+", ",parent:t}),e.publication_data.other_people_data&&e.publication_data.other_people_data.length>0){const n=tstring.in||"in";common.create_dom_element({element_type:"span",text_content:n.toLowerCase()+" ",parent:t});const o=e.publication_data.other_people_data.split(" | "),l=e.publication_data.other_people_name.split(" | "),_=e.publication_data.other_people_surname.split(" | "),a=e.publication_data.other_people_role.split(" | "),m=o.length;for(let e=0;e<m;e++){const n=new DocumentFragment,m=(JSON.parse(o[e]),JSON.parse(l[e])),c=JSON.parse(_[e]),i=JSON.parse(a[e]),r=[],s=m.length;for(let e=0;e<s;e++){const t=c[e],n=m[e],o=[];n.split(" ").map((e=>""!=e.charAt(0)?o.push(e.charAt(0)):""));const l=o.join(".")+".",_=t.split(" "),a=l+" "+(_.length>1?_.slice(0,1):_).join(" ");r.push(a)}const p=r.join(", "),d=i.join("");common.create_dom_element({element_type:"span",text_content:p,parent:n});const u=d.length>0?" ("+d.toLowerCase()+".), ":", ";common.create_dom_element({element_type:"span",text_content:u,parent:n}),t.appendChild(n)}}const l=e.publication_data.title?e.publication_data.title+" ("+page_globals.OWN_CATALOG_ACRONYM+"), ":" ("+page_globals.OWN_CATALOG_ACRONYM+"), ";common.create_dom_element({element_type:"em",inner_html:l,parent:t});const _=e.publication_data.place?e.publication_data.place+", ":"";common.create_dom_element({element_type:"span",inner_html:_,parent:t});const a=e.uri_location;common.create_dom_element({element_type:"a",class_name:"section_id",text_content:a+" ",href:a,parent:t}).setAttribute("target","_blank");const m=new Date,c=window.navigator.language;console.log("tstring:",tstring);const i=new Intl.DateTimeFormat(c).format(m);common.create_dom_element({element_type:"span",inner_html:"["+tstring.accessed+" "+i+"]",parent:t});return t}};