var image_gallery={preButton:null,nextButton:null,popup:null,img1:null,img2:null,caption:null,galleryLength:null,currentIndex:0,galleryPrimClass:"popup-gallery",galleryNode:null,set_up:function(t){const e=this;e.galleryNode=t.galleryNode,this.galleryNode.addEventListener("click",(function(t){"IMG"==t.target.tagName&&(t.preventDefault(),t.stopPropagation(),e.OpenGallery(t))}))},OpenGallery:function(t){const e=this;let n=t;const i=n.target.attributes.title.textContent;let l;l=n.target.dataset.caption?n.target.dataset.caption:"";let s=e.galleryNode.getElementsByTagName("a");const a=e.ParseGallery(s);for(let t=0;t<a.length;t++)if(a[t][0].children[0].attributes.title.textContent==i){this.currentIndex=t;break}this.popup=document.createRange().createContextualFragment('<div id="'+e.galleryPrimClass+'"><div id="gallery-wrapper"><div id="images-wrapper"><img id="img1" src=""><img id="img2" src=""></div><div id="caption-wrapper"><p>'+l+'</p></div><div class="nav-button" id="pre-button"></div><div class="nav-button" id="next-button"></div></div></div>'),this.img1=this.popup.getElementById("img1"),this.img2=this.popup.getElementById("img2"),this.img1.src=a[this.currentIndex][0].attributes.href.value,this.img2.src=a[this.currentIndex][1].attributes.href.value,this.caption=this.popup.getElementById("caption-wrapper").getElementsByTagName("p")[0],this.preButton=this.popup.getElementById("pre-button"),this.nextButton=this.popup.getElementById("next-button"),this.preButton.addEventListener("click",(function(){e.SwitchPic(a,-1)})),this.nextButton.addEventListener("click",(function(){e.SwitchPic(a,1)})),this.galleryLength=a.length,this.CheckNavButtons(),document.getElementsByTagName("body")[0].appendChild(this.popup),document.getElementById(this.galleryPrimClass).addEventListener("click",this.CloseGallery)},ParseGallery:function(t){let e=[].slice.call(t);e=e.filter(t=>t.children.length>0),e=e.filter(t=>t.children[0].title.length>0);let n=[];for(let t=0;t<e.length;t++){const i=e[t].children[0].attributes.title.textContent,l=e.filter(t=>t.children[0].attributes.title.textContent==i);if(n.length>0){null==n.find(t=>t[0].children[0].attributes.title.textContent==i)&&n.push(l)}else n.push(l)}return n},CloseGallery:function(t){t.target.classList.contains("nav-button")?t.stopPropagation():document.getElementById("popup-gallery").remove()},CheckNavButtons:function(){1==this.galleryLength?(this.preButton.classList.add("hidden"),this.nextButton.classList.add("hidden")):0==this.currentIndex?(this.preButton.classList.add("hidden"),this.nextButton.classList.remove("hidden")):this.galleryLength-1==this.currentIndex?(this.preButton.classList.remove("hidden"),this.nextButton.classList.add("hidden")):(this.preButton.classList.remove("hidden"),this.nextButton.classList.remove("hidden"))},SwitchPic:function(t,e){this.currentIndex+=e;let n=t[this.currentIndex];this.img1.src=n[0].attributes.href.value,this.img2.src=n[1].attributes.href.value,n[0].children[0].dataset.caption?this.caption.textContent=n[0].children[0].dataset.caption:this.caption.textContent="",this.CheckNavButtons()}};