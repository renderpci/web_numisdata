"use strict";var row_fields={caller:null,split_data:function(e,t){return e?e.split(t):[]},remove_gaps:function(e,t){return e.split(t).filter(Boolean).join(t)},local_to_remote_paths:function(e){return e.replace(/\/dedalo\/media_test\/media_monedaiberica/g,page_globals.__WEB_MEDIA_BASE_URL__+"/dedalo/media")},draw_item:function(e){const t=this,n=new DocumentFragment;if(!0===dedalo_logged){const o=t.dedalo_link(e,"numisdata3");n.appendChild(o)}n.appendChild(t.catalog_hierarchy(e,"catalog_hierarchy"));const o=common.create_dom_element({element_type:"div",class_name:"identify_coin_wrapper",parent:n});o.appendChild(t.image(e,"ref_coins_image_obverse")),o.appendChild(t.image(e,"ref_coins_image_reverse")),n.appendChild(t.identify_coin(e,"identify_coin")),n.appendChild(t.id_line(e,"id_line")),n.appendChild(t.default(e,"design_obverse")),n.appendChild(t.default(e,"symbol_obverse")),n.appendChild(t.default(e,"legend_obverse",t.local_to_remote_paths)),n.appendChild(t.default(e,"design_reverse")),n.appendChild(t.default(e,"symbol_reverse")),n.appendChild(t.default(e,"legend_reverse",t.local_to_remote_paths)),n.appendChild(t.default(e,"equivalents",(function(e){const n=t.split_data(e,"<br>"),o=[];for(let e=0;e<n.length;e++)o.push(n[e].replace(/ \| /g," "));return o.join(" | ")}))),n.appendChild(t.default(e,"section_id",(function(e){const t=tstring.permanent_uri||"Permanent URI",n=page_globals.__WEB_BASE_URL__+page_globals.__WEB_ROOT_WEB__+"/type/"+e;return t+': <a href="'+n+'">'+n+"</a>"}))),n.appendChild(t.default(e,"public_info",t.local_to_remote_paths)),n.appendChild(t.label(e,"items")),n.appendChild(t.items_list(e,"items_list")),n.appendChild(t.label(e,"findspot")),n.appendChild(t.findspots(e,"findspots"));const a=common.create_dom_element({element_type:"div",class_name:"row_wrapper"});return a.appendChild(n),a},dedalo_link:function(e,t){const n=common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",inner_html:e.section_id+" <small>("+t+")</small>",href:"/dedalo/lib/dedalo/main/?t="+t+"&id="+e.section_id});return n.setAttribute("target","_blank"),n},default:function(e,t,n){const o=this,a=common.create_dom_element({element_type:"div",class_name:"info_line "+t});if(e[t]&&e[t].length>0){const _="function"==typeof n?n(e[t]):o.remove_gaps(e[t]," | ");common.create_dom_element({element_type:"span",class_name:"info_value",inner_html:_.trim(),parent:a})}return a},label:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line "+t});return common.create_dom_element({element_type:"div",class_name:"big_label",text_content:tstring[t]||t,parent:n}),n},catalog_hierarchy:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line inline "+t}),o=e.catalog;if(o&&Object.keys(o).length>0&&o.constructor===Object){const e=o.parents,t=[];for(let n=0;n<e.length&&(t.push(e[n]),"mints"!==e[n].term_table);n++);for(let e=t.length-1;e>=0;e--)common.create_dom_element({element_type:"span",class_name:"breadcrumb "+t[e].term_table,text_content:t[e].term,parent:n}),common.create_dom_element({element_type:"span",class_name:"breadcrumb_symbol",text_content:" > ",parent:n});common.create_dom_element({element_type:"span",class_name:"breadcrumb",text_content:o.term,parent:n})}return n},image:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line inline "+t});return e[t]&&e[t].length>0&&common.create_dom_element({element_type:"img",class_name:"image "+e[t],src:e[t],parent:n}),n},identify_coin:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line inline "+t}),o=this.split_data(e.ref_coins," | "),a=[];for(var _=0;_<o.length;_++)a.push(JSON.parse(o[_]));const m=a[0][0],i=e.ref_coins_union.find(e=>e.section_id===m);if(i){common.create_dom_element({element_type:"span",class_name:t,text_content:i.ref_auction,parent:n});const e=(i.ref_auction_date?i.ref_auction_date.split(" "):[""])[0].split("-").reverse().join("-");e&&common.create_dom_element({element_type:"span",class_name:t,text_content:" | "+e,parent:n}),i.ref_auction_number&&common.create_dom_element({element_type:"span",class_name:t,text_content:", "+(tstring.n||"nÂº")+" "+i.ref_auction_number,parent:n});const o=[];i.weight&&i.weight.length>0&&o.push(i.weight+" g"),i.dies&&i.dies.length>0&&o.push(i.dies+" h"),i.diameter&&i.diameter.length>0&&o.push(i.diameter+" mm");const a=o.join("; ");common.create_dom_element({element_type:"span",class_name:t,text_content:" ("+a+")",parent:n})}return n},id_line:function(e,t){const n=this,o=common.create_dom_element({element_type:"div",class_name:"info_line "+t}),a=[];if(e[t="catalogue"]&&e[t].length>0){const n=e.section_id,o=e[t]+" "+n+"/"+e.number,_=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:o});a.push(_)}if(e[t="denomination"]&&e[t].length>0){const n=e[t],o=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:n});a.push(o)}if(e[t="material"]&&e[t].length>0){const o=n.split_data(e[t]," | ").filter(Boolean).join(", "),_=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:o});a.push(_)}if(t="averages",e.averages_weight&&e.averages_weight.length>0){const n=e.averages_weight+" g ("+e.total_weight_items+");",o=e.averages_diameter+" mm ("+e.total_diameter_items+")",_=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:n+" "+o});a.push(_)}const _=a.length;for(let e=0;e<_;e++){if(e>0&&e<_){common.create_dom_element({element_type:"span",class_name:"info_value separator",text_content:" | ",parent:o})}o.appendChild(a[e])}return o},items_list:function(e,t){const n=this,o=common.create_dom_element({element_type:"div",class_name:"info_line "+t});function a(e,t){const o=common.create_dom_element({element_type:"div",class_name:"sorted_coin",parent:t}),a=common.create_dom_element({element_type:"div",class_name:"images_wrapper",parent:o});common.create_dom_element({element_type:"img",src:e.image_obverse,parent:a}),common.create_dom_element({element_type:"img",src:e.image_reverse,parent:a}),common.create_dom_element({element_type:"div",class_name:"",inner_html:e.collection,parent:o});const _=[];e.weight&&e.weight.length>0&&_.push(e.weight+" g"),e.dies&&e.dies.length>0&&_.push(e.dies+" h"),e.diameter&&e.diameter.length>0&&_.push(e.diameter+" mm");const m=_.join("; ");common.create_dom_element({element_type:"div",class_name:"",inner_html:m,parent:o});const i=page_globals.__WEB_BASE_URL__+page_globals.__WEB_ROOT_WEB__+"/coin/"+e.section_id,l='URI: <a href="'+i+'">'+i+"</a>";common.create_dom_element({element_type:"div",class_name:"",inner_html:l,parent:o});const c=[];if(e.hoard){const t=e.hoard_place?e.hoard+" ("+e.hoard_place+")":e.hoard;c.push(t)}if(e.findspot){const t=e.findspot_place?e.findspot+" ("+e.findspot_place+")":e.findspot;c.push(t)}const s=c.join(" | ");common.create_dom_element({element_type:"div",class_name:"",inner_html:s,parent:o});const r=common.create_dom_element({element_type:"div",class_name:"references",parent:o}),p=e.bibliography_data;for(let e=0;e<p.length;e++)n.draw_bibliographic_reference(p[e],r)}const _=e._coins_group.length;for(let t=0;t<_;t++){const n=e._coins_group[t];if(1==n.typology_id)continue;const _=n.typology;common.create_dom_element({element_type:"div",class_name:"medium_label",text_content:_,parent:o});const m=common.create_dom_element({element_type:"div",class_name:"typology_coins",parent:o}),i=n.coins,l=i.length;for(let t=0;t<l;t++){const n=i[t],o=e.ref_coins_union.find(e=>e.section_id==n);o&&a(o,m)}}return o},draw_bibliographic_reference:function(e,t){const n=e._publications,o=n.length;for(let e=0;e<o;e++){const o=n[e],a=common.create_dom_element({element_type:"div",class_name:"bibliographic_reference",parent:t});common.create_dom_element({element_type:"span",inner_html:" "+(o.title||"")+" ",parent:a}),common.create_dom_element({element_type:"span",inner_html:" "+(o.authors||"")+" ",parent:a}),common.create_dom_element({element_type:"span",inner_html:" "+(o.date||"")+" ",parent:a}),common.create_dom_element({element_type:"span",inner_html:" "+(o.place||"")+" ",parent:a})}return wrapper},findspots:function(e,t){const n=this;console.log("item.ref_coins_findspots_data:",e.ref_coins_findspots_data);const o=common.create_dom_element({element_type:"div",id:"findspots",class_name:"info_line "+t}),a=common.create_dom_element({element_type:"div",class_name:"map_container",parent:o});function _(e,t){console.log("--draw_coin data:",e);const o=common.create_dom_element({element_type:"div",class_name:"find_coin",parent:t}),a=common.create_dom_element({element_type:"div",class_name:"images_wrapper",parent:o});common.create_dom_element({element_type:"img",src:e.image_obverse,parent:a}),common.create_dom_element({element_type:"img",src:e.image_reverse,parent:a});const _=common.create_dom_element({element_type:"div",class_name:"info_wrapper",parent:o});common.create_dom_element({element_type:"div",class_name:"",inner_html:e.collection,parent:_});const m=[];e.weight&&e.weight.length>0&&m.push(e.weight+" g"),e.dies&&e.dies.length>0&&m.push(e.dies+" h"),e.diameter&&e.diameter.length>0&&m.push(e.diameter+" mm");const i=m.join("; ");common.create_dom_element({element_type:"div",class_name:"",inner_html:i,parent:_});const l=page_globals.__WEB_BASE_URL__+page_globals.__WEB_ROOT_WEB__+"/coin/"+e.section_id,c='URI: <a href="'+l+'">'+l+"</a>";common.create_dom_element({element_type:"div",class_name:"",inner_html:c,parent:_}),common.create_dom_element({element_type:"div",class_name:"",inner_html:e.hoard,parent:_});const s=common.create_dom_element({element_type:"div",class_name:"references",parent:_}),r=e.bibliography_data;for(let e=0;e<r.length;e++)n.draw_bibliographic_reference(r[e],s)}const m=[],i=[],l=[],c=e.ref_coins_findspots_data,s=c.length;for(let t=0;t<s;t++){const n=c[t],a=JSON.parse(n.coins)||[],l=a.length;if(l<1){console.warn("! Skipped findspot without zero coins :",c);continue}if(i.find(e=>e===n.section_id))continue;const s=common.create_dom_element({element_type:"div",class_name:"find_wrapper findspot",parent:o});common.create_dom_element({element_type:"div",inner_html:" "+(n.name||"")+" ("+(n.place||"")+") ",parent:s});const r=common.create_dom_element({element_type:"div",text_content:" "+l+" "+(tstring.items||"items")+" ",parent:s}),p=common.create_dom_element({element_type:"div",class_name:"find_coins findspot",parent:o}),d=[];for(let t=0;t<l;t++){const n=a[t],o=e.ref_coins_union.find(e=>e.section_id==n);o&&(_(o,p),d.push(n))}const f=JSON.parse(n.map);f&&m.push({section_id:n.section_id,name:n.name,place:n.place,georef:n.georef,data:f,items:d.length,total_items:l,type:"findspot"}),r.innerHTML=r.innerHTML+"("+d.length+")",i.push(n.section_id)}const r=e.ref_coins_hoard_data,p=r.length;for(let t=0;t<p;t++){const n=r[t],a=JSON.parse(n.coins)||[],i=a.length;if(i<1){console.warn("! Skipped hoard without zero coins :",r);continue}if(l.find(e=>e===n.section_id))continue;const c=common.create_dom_element({element_type:"div",class_name:"find_wrapper hoard",parent:o});common.create_dom_element({element_type:"div",inner_html:" "+(n.name||"")+" ("+(n.place||"")+") ",parent:c});const s=common.create_dom_element({element_type:"div",text_content:" "+i+" "+(tstring.items||"items")+" ",parent:c}),p=common.create_dom_element({element_type:"div",class_name:"find_coins hoard",parent:o}),d=[];for(let t=0;t<i;t++){const n=a[t],o=e.ref_coins_union.find(e=>e.section_id==n);o&&(_(o,p),d.push(n))}s.innerHTML=s.innerHTML+"("+d.length+")";const f=JSON.parse(n.map);f&&m.push({section_id:n.section_id,name:n.name,place:n.place,georef:n.georef,data:f,items:d.length,total_items:i,type:"hoard"}),l.push(n.section_id)}if(console.log("// map_data:",m),m.length>0){common.when_in_dom(a,(function(){n.caller.render_map({target:a,map_position:null,map_data:m})}))}else a.remove();return o},mint:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line mint"});if(e.mint&&e.mint.length>0){common.create_dom_element({element_type:"label",class_name:"",text_content:tstring.mint||"Mint",parent:t});const e=row_object.mint;common.create_dom_element({element_type:"span",class_name:"info_value",text_content:e,parent:t})}return t},authors_alt:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line authors_alt"});if(e.authors_alt&&e.authors_alt.length>0){const n=" ("+(e.authors_alt||"")+"). ";common.create_dom_element({element_type:"div",class_name:"info_value authors_alt",text_content:n,parent:t})}return t},publication_date:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line publication_date"});if(e.publication_date){const n=e.publication_date.split("-");let o=parseInt(n[0]);n[1],parseInt(n[1])>0&&(o=o+"-"+parseInt(n[1])),n[2],parseInt(n[2])>0&&(o=o+"-"+parseInt(n[2])),o=" ("+o+"). ",common.create_dom_element({element_type:"div",class_name:"info_value",text_content:o,parent:t}),t.classList.remove("hide")}return t},title:function(e){const t=this.get_typology(e),n=e.title||"",o="1"==t||"20"==t||"28"==t||"30"==t||"32"==t?" italic":"",a=common.create_dom_element({element_type:"div",class_name:"info_line title"}),_=" "+n+". ";return common.create_dom_element({element_type:"div",class_name:""+o,text_content:_,parent:a}),a},editor:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line editor"});if(e.editor&&e.editor.length>0){const n=" "+(tstring.en||"En")+" "+e.editor+", ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},title_secondary:function(e){this.get_typology(e);const t=e.title_secondary||"",n=common.create_dom_element({element_type:"div",class_name:"info_line row_title"});if(t.length>0){const e=" "+t+" ";common.create_dom_element({element_type:"div",class_name:"title_secondary italic",text_content:e,parent:n})}return n},magazine:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line magazine"});if(e.magazine&&e.magazine.length>0){const n=" "+e.magazine+", ";common.create_dom_element({element_type:"div",class_name:"info_value italic",text_content:n,parent:t})}return t},serie:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line serie"});if(e.serie&&e.serie.length>0){const n=!e.copy||e.copy.length<1?" "+e.serie+", ":" "+e.serie;common.create_dom_element({element_type:"div",class_name:"info_value italic",text_content:n,parent:t})}return t},copy:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line copy"});if(e.copy&&e.copy.length>0){const n=" ("+e.copy+"), ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},physical_description:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line physical_description"});if(e.physical_description&&e.physical_description.length>0){const n=" "+e.physical_description+". ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},editorial:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line editorial"});if(e.editorial&&e.editorial.length>0){const n=" "+e.editorial+". ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},url:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line url"}),n=e.url_data;if(n&&n.length>0){const e=JSON.parse(n),o=e.length;for(let n=0;n<o;n++){const a=e[n],_=a.title&&a.title.length>1?a.title:a.iri;common.create_dom_element({element_type:"a",class_name:"url_data",title:_,text_content:_,href:a.iri,parent:t}).setAttribute("target","_blank"),!(n%2)&&n<o&&o>1&&common.create_dom_element({element_type:"span",class_name:"separator",text_content:" | ",parent:t})}}return t},place:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line place"});return e.place&&e.place.length>0&&common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e.place,parent:t}),t},descriptors:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line descriptors"});return e.descriptors&&e.descriptors.length>0&&common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e.descriptors,parent:t}),t},typology_name:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line typology_name"});return e.typology_name&&e.typology_name.length>0&&common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e.typology_name,parent:t}),t}};