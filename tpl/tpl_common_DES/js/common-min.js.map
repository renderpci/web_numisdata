{"version":3,"sources":["common.js"],"names":["common","export_data_json","export_data_csv","t","_t","obverse_image","reverse_image","section_id","site","findspot","type_of_site","weight","collection","funds","bibliographic_ref","info","catalogue","catalogue_number","authority","mint","start_date","end_date","obverse_legend","obverse_design","obverse_symbol","reverse_legend","reverse_design","reverse_symbol","denomination","chronology","material","material_links","diameter","axis","_defineProperty","setup","$","colorbox","rel","fix_body_height","draw_rows","options","container","document","getElementById","target","ar_rows","hasChildNodes","removeChild","lastChild","this","total_tipos","length","total_monedas","len","i","tipo_object","draw_row_tipo","monedas","monedas_wrapper","create_dom_element","element_type","parent","class_name","monedas_len","j","moneda_obj","draw_row_moneda","tipos_text","tstring","tipos","monedas_text","total_info","id","addEventListener","e","toggle_tipos","inner_html","toggle_monedas","ar_coins","filter","element","data_ref","ar_types","exclue_add","ar_coins_length","row","types","type_id","forEach","current_type","type_key","indexOf","hasOwnProperty","SHOW_DEBUG","console","log","download_buttons_wrapper","button_download_json","build_download_data_link","obj_to_save","data_type","file_name","appendChild","button_download_csv","moneda_wrapper","row_data_json","JSON","parse","row_data","row_container","window","open","imagen_anverso","bg_image","image","bg_image2","build_thumb_url","style","backgroundImage","replace","location","protocol","host","imagen_reverso","right_block","text_content","hallazgo","peso","peso_label","coleccion","fondo","bibliografia","info_publica","to_export_data_json","tipo_container","self","tipo_header_wrapper","catalogo","t_catalogo","data_set","catalogo_dato","ar_title","push","publicacion","title","join","tooltip","info_string","t_numero_catalogo","numero_catalogo","autoridad","autoridad_nombre","ceca_text","ceca_info","ceca_value","ceca_links","split","a","setAttribute","denominacion","denominacion_info","denominacion_value","denominacion_iri","fecha_inicio","fecha_info","fecha","fecha_fin","tipo_add_info","leyenda_anverso","tipo_anverso","simbolo_anverso","leyenda_reverso","tipo_reverso","simbolo_reverso","build_detail","detail_container","left_detail","thumb_url","imagen_anverso_big","big_image_url","build_big_image_url","link","html","transition","speed","imagen_reverso_big","right_detail","line","hallazgo_detail","yacimiento","site_geo_lat","site_geo_lon","hallazgo_dato","extract_geo","tipologia","tipo_de_yacimiento","municipio","localizacion","hallazgo_localizacion","ceca_detail","ceca","remove_string_double_values","cronologia","cronologia_title","autoridad_info_string","nombre","autoridad_dato","uri","medida_detail","diametro","cuno","anverso_detail","anverso","leyenda","diseno","simbolo","reverso","biblio_detail","bibliografia_info_full","bibliografia_ref","bi","current","bibliografia_paginas","bibliografia_info_text","publicaciones","bibliografia_title","autoria","titulo","fecha_publicacion","bibliography","notas","uri_detail","refeferencia_bibliografica","ar_catalogo_text","ar_additions","tipo_info","equivalentes","equivalentes_value","equivalents","div_uri","href","type","geo_value","ar_place","lugar","layer_data","open_detail","button_obj","image_path","width","height","w","h","pop","element_options","dataset","custom_function_events","title_label","text_node","draggable","value","download","createElement","className","key","function_name","name","event_type","function_arguments","create_custom_events","textContent","el","innerHTML","separator","ar_elements","ar_unique","toggle","load_snippet","snippet_name","target_id","trigger_url","page_globals","__WEB_TEMPLATE_WEB__","trigger_vars","mode","get_json_data","then","response","warn","target_obj","result","mime_type","data","csv","convert_json_to_csv","Blob","stringify","URL","createObjectURL","link_obj","json_obj","json","Array","isArray","fields","Object","keys","replacer","map","fieldName","current_value","unshift","row_object","export_obj","data_source_org","data_source_url","data_lang","WEB_CURRENT_LANG_CODE","val","extractLast","term"],"mappings":"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","sourcesContent":["\"use strict\";\n\n\n\nvar common = {\n\n\n\texport_data_json : [],\n\texport_data_csv  : [],\n\n\n\tt : {\n\t\tobverse_image \t \t: \"Obverse image\",\n\t\treverse_image \t \t: \"Reverse image\",\n\t\tsection_id \t\t \t: \"ID\",\n\t\tsite \t\t\t\t: \"Site\",\n\t\tfindspot \t\t \t: \"Findspot\",\n\t\ttype_of_site \t\t: \"Type of site\",\n\t\tweight \t\t\t \t: \"Weight\",\n\t\tcollection \t\t \t: \"Collection\",\n\t\tfunds \t\t\t \t: \"Funds\",\n\t\tbibliographic_ref \t: \"Bibliographic ref\",\n\t\tinfo \t\t\t\t: \"Info\",\n\t\tcatalogue \t\t\t: \"Catalogue\",\n\t\tcatalogue_number \t: \"Catalogue number\",\n\t\tauthority \t\t\t: \"Authority\",\n\t\tmint \t\t\t\t: \"Mint\",\n\t\tstart_date \t\t\t: \"Start date\",\n\t\tend_date \t\t\t: \"End date\",\n\t\tobverse_legend \t\t: \"Obverse legend\",\n\t\tobverse_design \t\t: \"Obverse design\",\n\t\tobverse_symbol \t\t: \"Obverse symbol\",\n\t\treverse_legend \t\t: \"Reverse legend\",\n\t\treverse_design \t\t: \"Reverse design\",\n\t\treverse_symbol \t\t: \"Reverse symbol\",\n\t\tdenomination \t\t: \"Denomination\",\n\t\tchronology \t\t\t: \"Chronology\",\n\t\tmaterial \t\t\t: \"Material\",\n\t\tmaterial_links \t\t: \"Material links\",\n\t\tdiameter \t\t\t: \"Diameter\",\n\t\taxis \t\t\t\t: \"Axis\",\n\t\tfunds \t\t\t\t: \"Funds\",\n\t\tbibliography \t\t: \"Bibliography\",\n\t\tequivalents \t\t: \"Equivalents\",\n\t\turi \t\t\t\t: \"URI\",\n\t\tsite_geo_lat \t\t: \"Site GEO lat\",\n\t\tsite_geo_lon \t\t: \"Site GEO lon\",\n\t},\n\t\n\n\n\tsetup : function() {\n\n\t\tconst self = this\n\t\t/*\n\t\twindow.ready(function(){\n\t\t\tself.fix_body_height()\n\t\t\t//$(\".colorbox\").colorbox({rel:'group1',width:\"80%\", height:\"80%\"});\n\t\t})\n\t\twindow.addEventListener(\"resize\", self.fix_body_height, false)\t\n\t\t*/\n\t\t// Activate tooltips for elements with dataset toggle = tooltip\n\t\t//$(function () {\n\t\t//  $('[data-toggle=\"tooltip\"]').tooltip()\n\t\t//})\n\n\t\t// Activate images onclick gallery\n\t\t$('a.gallery').colorbox({rel:'gal'});\n\n\n\t\treturn true\n\t},//end setup\n\n\n\n\tfix_body_height : function() {\n\t\treturn false\n\n\t\tvar window_height  = window.innerHeight;\t\t\t\n\t\tvar content_height = document.getElementById(\"content\").offsetHeight\t\t\t\n\t\tvar footer_height = document.getElementById(\"footer\").offsetHeight\t\t\t\n\n\t\tif (window_height > (content_height + footer_height)) {\n\t\t\t//document.getElementById(\"content\").style.height = (window_height - footer_height) + \"px\"\n\t\t}\t\t\n\t},//end fix_body_height\n\n\n\n\t/**\n\t* DRAW_ROWS\n\t*/\n\tdraw_rows : function(options) {\n\t\t\n\t\tconst self = this\n\t\n\t\tvar container \t= document.getElementById(options.target)\n\t\tvar ar_rows \t= options.ar_rows\t\t\n\t\t\n\t\t// Clean container div\n\t\twhile (container.hasChildNodes()) {\n\t\t\tcontainer.removeChild(container.lastChild);\n\t\t}\n\n\t\t/// Reset vars\n\t\tself.export_data_json = []\n\t\tself.export_data_csv  = []\n\n\t\t// Total records info\t\t\n\t\tvar total_tipos \t= ar_rows.length\n\t\tvar total_monedas \t= 0\t\t\n\t\n\t\tvar len = ar_rows.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\n\t\t\t// Build dom row\n\t\t\t//var row = self.build_row(ar_rows[i])\n\t\t\t// Add to container\n\t\t\t//target.appendChild(row)\n\n\t\t\tvar tipo_object = ar_rows[i]\n\t\t\t\t\n\n\t\t\t// Tipo. Append row_tipo header to container\n\t\t\tcommon.draw_row_tipo(tipo_object, container)\n\n\t\n\t\t\tif (tipo_object.monedas) {\n\t\t\t\t// Monedas (fichero)\n\t\t\t\tvar monedas_wrapper = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: container,\n\t\t\t\t\tclass_name \t\t: \"monedas_wrapper\"\n\t\t\t\t})\n\t\t\t\tvar monedas_len = tipo_object.monedas.length\n\t\t\t\tfor (var j = 0; j < monedas_len; j++) {\n\n\t\t\t\t\tvar moneda_obj = tipo_object.monedas[j]\n\n\t\t\t\t\t// Add the self tipo data as property\n\t\t\t\t\tmoneda_obj.tipo_object = tipo_object\n\t\t\t\t\t\n\t\t\t\t\t//var moneda_row = common.build_row(moneda_obj)\n\t\t\t\t\t//monedas_wrapper.appendChild(moneda_row)\n\t\t\t\t\tcommon.draw_row_moneda(moneda_obj, monedas_wrapper)\n\n\t\t\t\t\ttotal_monedas++\n\t\t\t\t}\n\t\t\t}\n\n\t\t}//end for (var i = 0; i < len; i++)\n\n\n\t\t// total_records\n\t\tvar tipos_text \t = tstring.tipos   || \"Tipos\"\n\t\tvar monedas_text = tstring.monedas || \"Monedas\"\n\t\tvar total_info \t = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tid   \t\t\t: \"total_records\",\n\t\t\t//inner_html \t\t: tipos_text + \": \" + total_tipos + \" - \" + monedas_text + \": \" + total_monedas,\n\t\t\tparent \t\t\t: container\n\t\t})\n\n\t\t\n\t\tvar icon_tipos = self.create_dom_element({\n\t\t\telement_type \t: \"i\",\n\t\t\tclass_name \t\t: \"fas fa-eye\",\n\t\t\tparent \t\t\t: total_info\n\t\t})\n\t\ticon_tipos.addEventListener(\"click\",function(e){ common.toggle_tipos() })\n\t\tvar text_tipos = self.create_dom_element({\n\t\t\telement_type \t: \"span\",\n\t\t\tinner_html \t\t: tipos_text + \": \" + total_tipos + \"\",\n\t\t\tparent \t\t\t: total_info\n\t\t})\n\t\t\t\t\n\t\tvar icon_monedas  = self.create_dom_element({\n\t\t\telement_type \t: \"i\",\n\t\t\tclass_name \t\t: \"fas fa-eye\",\n\t\t\tparent \t\t\t: total_info\n\t\t})\n\t\ticon_monedas.addEventListener(\"click\",function(e){ common.toggle_monedas() })\n\t\tvar text_monedas = self.create_dom_element({\n\t\t\telement_type \t: \"span\",\n\t\t\tinner_html \t\t: monedas_text + \": \" + total_monedas,\n\t\t\tparent \t\t\t: total_info\n\t\t})\n\n\n\t\t// DOWNLOAD BUTTONS\n\t\t//if (page_globals.SHOW_DEBUG===true) {\n\t\t\tvar clean_ar_rows  = []\n\n\t\t\tvar ar_coins = common.export_data_json.filter(element => element.data_ref===\"coin\")\n\t\t\tvar ar_types = common.export_data_json.filter(element => element.data_ref===\"type\")\n\t\t\t// Already properties defined in coins (avoid duplicate when merge with type properties)\n\t\t\tvar exclue_add = [\n\t\t\t\t\"data_ref\",\n\t\t\t\t\"type_id\",\n\t\t\t\t\"data_lang\",\n\t\t\t\t\"data_source_url\",\n\t\t\t\t\"data_source_org\"\n\t\t\t]\n\t\t\tvar ar_coins_length = ar_coins.length\n\t\t\tfor (var i = 0; i < ar_coins_length; i++) {\n\n\t\t\t\tvar row = ar_coins[i]\n\t\t\t\t\n\t\t\t\tif (row.types.length>0) {\n\t\t\t\t\tvar type_id = row.types[0]\n\t\t\t\t\tvar match_types = ar_types.filter(element => element.type_id===type_id)\n\t\t\t\t\tmatch_types.forEach(function(current_type) {\n\t\t\t\t\t\tfor (var type_key in current_type) {\n\t\t\t\t\t\t\tif(exclue_add.indexOf(type_key) !== -1) continue;\n\n\t\t\t\t\t\t\tif (row.hasOwnProperty(type_key)) {\n\t\t\t\t\t\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\t\t\t\t\t\tconsole.log(\"Warning: type property is already used by coin (IGNORED!) \",type_key)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t// Add type property to coin\n\t\t\t\t\t\t\t\t//row[\"Type \" + type_key] = current_type[type_key]\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t// Add type property to coin\n\t\t\t\t\t\t\t\trow[type_key] = current_type[type_key]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t\t// Build buttons wrapper\n\t\t\tvar download_buttons_wrapper = common.create_dom_element({\n\t\t\t\telement_type : \"div\",\n\t\t\t\tclass_name   : \"download_buttons_wrapper\",\n\t\t\t\tparent \t\t : \tcontainer\n\t\t\t})\t\t\n\t\t\t\n\t\t\t// Build button to download json\n\t\t\tvar button_download_json = common.build_download_data_link({\n\t\t\t\tobj_to_save : ar_coins,\n\t\t\t\tdata_type \t: 'json',\n\t\t\t\tfile_name \t: \"sardinia_list\"  + \".json\"\n\t\t\t})\n\t\t\tdownload_buttons_wrapper.appendChild(button_download_json)\n\t\t\t\n\t\t\t\n\t\t\t// Build button to download csv\n\t\t\tvar button_download_csv = common.build_download_data_link({\n\t\t\t\tobj_to_save : ar_coins,\n\t\t\t\tdata_type \t: 'csv',\n\t\t\t\tfile_name \t: \"sardinia_list\" + \".csv\"\n\t\t\t})\n\t\t\tdownload_buttons_wrapper.appendChild(button_download_csv)\n\t\t//}//end if (page_globals.SHOW_DEBUG===true)\n\n\n\t\treturn true\n\t},//end draw_rows\n\n\n\n\t/**\n\t* DRAW_ROW_MONEDA\n\t* Draw ONE moneda row\n\t* Build DOM objects from json data\n\t*/\n\tdraw_row_moneda : function(moneda_obj, moneda_wrapper) {\n\t\t\n\t\tconst self = this\n\t\tvar t \t = self.t\n\n\t\tvar row_data_json = {\n\t\t\t\"data_ref\" : \"coin\",\n\t\t\t\"types\"    : JSON.parse(moneda_obj.tipos)\n\t\t}\t\t\n\n\t\tvar row_data = moneda_obj\n\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.section_id] = row_data.section_id || ''\n\t\n\t\tvar row_container = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"row_container\",\n\t\t\tparent \t\t\t: moneda_wrapper\n\t\t})\n\t\trow_container.addEventListener(\"click\",function(){\n\t\t\t//self.open_detail(this, row_data)\n\t\t\twindow.open(\"mon/\" + moneda_obj.section_id, '_blank')\n\t\t},false)\t\t\n\n\t\t// imagen_anverso\n\t\tvar imagen_anverso = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"imagen_anverso\",\n\t\t\tparent \t\t\t: row_container\n\t\t\t})\n\t\t\tvar bg_image = typeof(row_data.imagen_anverso[0])!==\"undefined\" ? row_data.imagen_anverso[0].image : null\n\t\t\tif (bg_image) {\n\t\t\t\tvar bg_image2 = self.build_thumb_url(bg_image)\n\t\t\t\timagen_anverso.style.backgroundImage = \"url(\"+bg_image2+\")\"\n\t\t\t\t// For data_json\n\t\t\t\tbg_image = bg_image.replace('/dedalo/media/','/sardinia/media/')\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.obverse_image] = window.location.protocol + \"//\" + window.location.host + bg_image\n\n\t\t// imagen_reverso\n\t\tvar imagen_reverso = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"imagen_reverso\",\n\t\t\tparent \t\t\t: row_container\n\t\t\t})\n\t\t\tvar bg_image = typeof(row_data.imagen_reverso[0])!==\"undefined\" ? row_data.imagen_reverso[0].image : null\n\t\t\tif (bg_image) {\n\t\t\t\t//bg_image = bg_image.replace('/1.5MB/','/thumb/')\n\t\t\t\tvar bg_image2 = self.build_thumb_url(bg_image)\n\t\t\t\timagen_reverso.style.backgroundImage = \"url(\"+bg_image2+\")\"\n\t\t\t\t// For data_json\n\t\t\t\tbg_image = bg_image.replace('/dedalo/media/','/sardinia/media/')\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.reverse_image] = window.location.protocol + \"//\" + window.location.host + bg_image \n\n\t\t// RIGHT_BLOCK\n\t\tvar right_block = self.create_dom_element({ element_type : \"div\", class_name : \"right_block\", parent : row_container })\n\n\t\t\t// section_id\n\t\t\tif (row_data.section_id) {\n\t\t\t\tvar section_id = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"section_id\",\n\t\t\t\t\ttext_content \t: row_data.section_id,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\t\t\t\t\n\t\t\t}\t\t\t\n\n\t\t\t// hallazgo\n\t\t\tif (row_data.hallazgo) {\n\t\t\t\tvar hallazgo = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"hallazgo\",\n\t\t\t\t\ttext_content \t: row_data.hallazgo,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\t\t\t\t\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.site] = row_data.hallazgo || ''\n\t\n\t\t\t// peso\n\t\t\tif (row_data.peso) {\n\t\t\t\tvar peso_label = row_data.peso + \" g\"\n\t\t\t\tvar peso = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"peso\",\n\t\t\t\t\ttext_content \t: peso_label,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\t\t\t\t\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.weight] = row_data.peso\n\n\t\t\t// coleccion\t\t\t\n\t\t\tif (row_data.coleccion) {\n\t\t\t\tvar coleccion = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"coleccion\",\n\t\t\t\t\ttext_content \t: row_data.coleccion,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.collection] = row_data.coleccion || ''\n\n\t\t\t// fondo\t\t\t\n\t\t\tif (row_data.fondo) {\n\t\t\t\tvar fondo = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"fondo\",\n\t\t\t\t\ttext_content \t: row_data.fondo,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.funds] = row_data.fondo || ''\n\n\t\t\t// bibliografia\t\t\t\n\t\t\tif (row_data.bibliografia) {\n\t\t\t\tvar bibliografia = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"bibliografia\",\n\t\t\t\t\ttext_content \t: row_data.bibliografia,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.bibliographic_ref] = row_data.bibliografia || ''\n\n\t\t\t// info_publica\n\t\t\tif (row_data.info_publica) {\n\t\t\t\tvar info_publica = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"info_publica\",\n\t\t\t\t\tinner_html \t \t: row_data.info_publica,\n\t\t\t\t\tparent \t\t\t: right_block\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.info] = row_data.info_publica || ''\n\t\t\n\n\t\t// Add to texport_data_json\n\t\tself.to_export_data_json(row_data_json)\t\t\t\n\n\n\t\treturn true\n\t},//end draw_row_moneda\n\n\n\n\t/**\n\t* DRAW_ROW_TIPO\n\t* Draw ONE tipo row\n\t* Build DOM objects from json data\n\t*/\n\tdraw_row_tipo : function(tipo_object, tipo_container) {\n\n\t\tconst self = this\n\t\tvar t \t = self.t\n\t\n\t\tvar row_data_json = {\n\t\t\t\"data_ref\" \t: \"type\",\n\t\t\t\"type_id\" \t: tipo_object.section_id\n\t\t}\n\n\t\tvar tipo_header_wrapper = common.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name \t\t: \"tipo_header_wrapper\",\n\t\t\tparent \t\t\t: tipo_container\n\t\t})\n\t\n\t\t// Title (catalogo, autoridad, numero_catalogo)\n\t\tif (tipo_object.catalogo) {\n\t\t\tvar t_catalogo \t\t\t= tipo_object.catalogo || ''\n\t\t\t\n\t\t\tvar catalogo = common.create_dom_element({\n\t\t\t\telement_type \t: \"h1\",\n\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\ttext_content \t: t_catalogo,\n\t\t\t\tdata_set \t\t: {\n\t\t\t\t\tsection_id  : tipo_object.section_id\n\t\t\t\t}\n\t\t\t})\n\t\t\t// console.log(\"tipo_object.catalogo_dato:\",tipo_object.catalogo_dato);\n\t\t\tif (tipo_object.catalogo_dato && tipo_object.catalogo_dato.length>0) {\n\t\t\t\tvar ar_title = []\n\t\t\t\ttipo_object.catalogo_dato.forEach(function(element){\n\t\t\t\t\tar_title.push(element.publicacion)\n\t\t\t\t})\n\t\t\t\tif (ar_title.length>0) {\n\t\t\t\t\tcatalogo.title = ar_title.join(\", \") \n\t\t\t\t\t$(catalogo).tooltip()\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.catalogue] = tipo_object.catalogo || ''\n\n\n\t\tvar info_string = ''\n\n\t\t// Numero catÃ¡logo\n\t\tvar t_numero_catalogo \t= tipo_object.numero_catalogo || ''\n\t\tif (t_numero_catalogo.length>0) {\n\t\t\tinfo_string += \" \" + t_numero_catalogo\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.catalogue_number] = tipo_object.numero_catalogo || ''\n\t\t\n\t\n\t\t// Autoridad\t\t\n\t\tif (tipo_object.autoridad) {\n\t\t\tvar autoridad_nombre = tipo_object.autoridad\n\t\t\t\tautoridad_nombre = autoridad_nombre.replace(',', ', ') // Add space between names separated with comma\n\t\t\tinfo_string += \" \" + autoridad_nombre\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.authority] = (typeof autoridad_nombre!==\"undefined\") ? autoridad_nombre : ''\n\n\t\t// info_string\n\t\tvar catalogo_num = common.create_dom_element({\n\t\t\telement_type \t: \"h1\",\n\t\t\tclass_name \t\t: \"catalogo_num\",\n\t\t\ttext_content \t: info_string,\n\t\t\tparent \t\t\t: tipo_header_wrapper\n\t\t})\n\n\n\t\t// Ceca\n\t\tif (tipo_object.ceca_text) {\n\t\t\tvar ceca_info = common.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\tclass_name \t\t: \"ceca_info info_line\"\n\t\t\t})\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: ceca_info,\n\t\t\t\t\tclass_name \t\t: \"info_label\",\n\t\t\t\t\t//text_content \t: tstring['ceca']\n\t\t\t\t\ttext_content \t: \" | \" \n\t\t\t\t})\n\t\t\t\tvar ceca_value = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: ceca_info,\n\t\t\t\t\tclass_name \t\t: \"info_value\",\n\t\t\t\t\ttext_content \t: tipo_object.ceca_text \n\t\t\t\t})\n\t\t\t\tif (tipo_object.ceca_links) {\n\t\t\t\t\tvar ar_uri = split(tipo_object.ceca_links)\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fas fa-external-link-alt\",\n\t\t\t\t\t\t\tparent \t\t\t: ceca_value\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \" + element)\n\t\t\t\t\t\t$(a).tooltip()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.mint] = tipo_object.ceca_text || ''\n\n\n\t\t// Denominacion\n\t\tif (tipo_object.denominacion) {\n\t\t\tvar denominacion_info = common.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\tclass_name \t\t: \"denominacion_info info_line\"\n\t\t\t})\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: denominacion_info,\n\t\t\t\t\tclass_name \t\t: \"info_label\",\n\t\t\t\t\t//text_content \t: tstring['denominacion']\n\t\t\t\t\ttext_content \t: \" | \"\n\t\t\t\t})\n\t\t\t\tvar denominacion_value = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: denominacion_info,\n\t\t\t\t\tclass_name \t\t: \"info_value\",\n\t\t\t\t\ttext_content \t: tipo_object.denominacion\n\t\t\t\t})\n\t\t\t\tif (tipo_object.denominacion_iri) {\n\t\t\t\t\tvar ar_uri = split(tipo_object.denominacion_iri)\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fas fa-external-link-alt\",\n\t\t\t\t\t\t\tparent \t\t\t: denominacion_value\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \" + element)\n\t\t\t\t\t\t$(a).tooltip()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.denomination] = tipo_object.denominacion || ''\n\n\n\t\t// Fecha\n\t\tif (tipo_object.fecha_inicio) {\n\t\t\tvar fecha_info = common.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tparent \t\t\t: tipo_header_wrapper,\n\t\t\t\tclass_name \t\t: \"fecha_info info_line\"\n\t\t\t\t})\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: fecha_info,\n\t\t\t\t\tclass_name \t\t: \"info_label\",\n\t\t\t\t\t//text_content \t: tstring['fecha']\n\t\t\t\t\ttext_content \t: \" | \"\n\t\t\t\t})\n\t\t\t\tvar fecha = tipo_object.fecha_inicio\n\t\t\t\t\tif (tipo_object.fecha_fin) {\n\t\t\t\t\t\tfecha += ' -> ' + tipo_object.fecha_fin\n\t\t\t\t\t}\n\t\t\t\tcommon.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tparent \t\t\t: fecha_info,\n\t\t\t\t\tclass_name \t\t: \"info_value\",\n\t\t\t\t\ttext_content \t: fecha\n\t\t\t\t})\n\t\t}\n\t\t// ROW_DATA_JSON +\n\t\trow_data_json[t.start_date] = tipo_object.fecha_inicio || ''\t\t\n\t\trow_data_json[t.end_date]   = tipo_object.fecha_fin || ''\n\n\n\t\t// INFO LINE\n\t\tvar tipo_add_info = self.create_dom_element({ element_type : \"div\", class_name : \"tipo_add_info\", parent : tipo_container })\n\t\t\n\t\t\t// ANVERSO\n\t\t\tif (tipo_object && (tipo_object.leyenda_anverso || tipo_object.tipo_anverso || tipo_object.simbolo_anverso)) {\n\t\t\t\tvar leyenda_anverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"title_leyenda\",\n\t\t\t\t\t\ttext_content \t: tstring[\"anverso\"]  +\" \",\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\n\t\t\t\tif (tipo_object.leyenda_anverso) {\n\t\t\t\t\tvar leyenda_anverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"leyenda_anverso\",\n\t\t\t\t\t\ttext_content \t: tstring[\"leyenda\"]  +\": \"+ tipo_object.leyenda_anverso,\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (tipo_object.tipo_anverso) {\n\t\t\t\t\tvar tipo_anverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"tipo_anverso\",\n\t\t\t\t\t\ttext_content \t: tstring[\"diseno\"] +\": \"+tipo_object.tipo_anverso,\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (tipo_object.simbolo_anverso) {\n\t\t\t\t\tvar simbolo_anverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"simbolo_anverso\",\n\t\t\t\t\t\ttext_content \t: tstring[\"simbolo\"]  +\": \"+ tipo_object.simbolo_anverso,\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.obverse_legend] = tipo_object.leyenda_anverso || ''\n\t\t\trow_data_json[t.obverse_design] = tipo_object.tipo_anverso || ''\n\t\t\trow_data_json[t.obverse_symbol] = tipo_object.simbolo_anverso || ''\n\n\n\t\t\t// REVERSO\n\t\t\tif (tipo_object && (tipo_object.leyenda_reverso || tipo_object.tipo_reverso || tipo_object.simbolo_reverso)) {\n\t\t\t\tvar leyenda_anverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"span\",\n\t\t\t\t\t\tclass_name   \t: \"title_leyenda\",\n\t\t\t\t\t\ttext_content \t: tstring[\"reverso\"]  +\" \",\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t})\n\t\t\t\tif (tipo_object.leyenda_reverso) {\n\t\t\t\t\tvar leyenda_reverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"leyenda_reverso\",\n\t\t\t\t\t\ttext_content \t: tstring[\"leyenda\"] +\": \"+ tipo_object.leyenda_reverso,\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (tipo_object.tipo_reverso) {\n\t\t\t\t\tvar tipo_reverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"tipo_reverso\",\n\t\t\t\t\t\ttext_content \t: tstring[\"diseno\"]  +\": \"+ tipo_object.tipo_reverso,\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tif (tipo_object.simbolo_reverso) {\n\t\t\t\t\tvar simbolo_reverso = self.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"simbolo_reverso\",\n\t\t\t\t\t\ttext_content \t: tstring[\"simbolo\"]  +\": \"+ tipo_object.simbolo_reverso,\n\t\t\t\t\t\tparent \t\t\t: tipo_add_info\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.reverse_legend] = tipo_object.leyenda_reverso || ''\n\t\t\trow_data_json[t.reverse_design] = tipo_object.tipo_reverso || ''\n\t\t\trow_data_json[t.reverse_symbol] = tipo_object.simbolo_reverso || ''\n\n\n\t\t// Add to export_data_json\n\t\tself.to_export_data_json(row_data_json)\t\t\n\n\n\t\treturn true\n\t},//end draw_row_tipo\n\n\n\n\t/**\n\t* BUILD_DETAIL\n\t* Build DOM objects from json data\n\t*/\n\tbuild_detail : function(row_data) {\n\t\t\n\t\tconst self = this\n\t\tvar t \t = self.t\n\n\t\tvar row_data_json = {\t\t\t\n\t\t\t\"data_ref\" \t\t\t: \"coin\",\n\t\t\t\"types\"    \t\t\t: JSON.parse(row_data.tipos)\n\t\t}\n\n\t\tvar tipo_object = row_data.tipo_object\n\n\t\tvar detail_container = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"detail_container\",\n\t\t})\n\n\n\t\t//LEFT\n\t\tvar left_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"left_detail\",\n\t\t\tparent \t\t\t: detail_container\n\t\t\t})\n\n\t\t\tvar img_size = 320\n\n\t\t\t// imagen_anverso\n\t\t\tvar imagen_anverso = self.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tclass_name   \t: \"imagen_anverso\",\n\t\t\t\tparent \t\t\t: left_detail\n\t\t\t\t})\n\t\t\t\tvar bg_image  = typeof(row_data.imagen_anverso[0])!==\"undefined\" ? row_data.imagen_anverso[0].image : null\t\t\t\n\t\t\t\tif (bg_image) {\n\t\t\t\t\tvar thumb_url = self.build_thumb_url(bg_image,img_size,img_size)\n\t\t\t\t\timagen_anverso.style.backgroundImage = \"url(\"+thumb_url+\")\"\n\t\t\t\t}\t\t\t\t\t\n\n\t\t\t\tvar imagen_anverso_big = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"imagen_anverso_big\"\n\t\t\t\t\t})\n\t\t\t\t\tvar big_image_url = self.build_big_image_url(bg_image)\n\t\t\t\t\timagen_anverso_big.style.backgroundImage = \"url(\"+big_image_url+\")\"\n\t\t\t\t\t\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.obverse_image] = window.location.protocol + big_image_url\t\n\n\t\t\t\tvar link = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\tclass_name   \t: \"fas fa-arrow-alt-circle-down download_image\",\n\t\t\t\t\tparent \t\t\t: imagen_anverso_big\n\t\t\t\t\t})\n\t\t\t\t\tlink.setAttribute('download', 'sardinia-' + row_data.section_id + '-A.jpg');\n\t\t\t\t\tlink.setAttribute('target', '_blank');\n\t\t\t\t\tlink.setAttribute('href', big_image_url);\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\n\t\t\t\timagen_anverso.addEventListener(\"click\",function(e){\n\t\t\t\t\t\t\n\t\t\t\t\t// Build dialog with colorbox\n\t\t\t\t\t// see http://www.jacklmoore.com/colorbox/\n\t\t\t\t\t// Create before load data for performance perception\t\n\t\t\t\t\t$.colorbox({\n\t\t\t\t\t\thtml \t\t: imagen_anverso_big,\n\t\t\t\t\t\ttransition \t: \"none\",\n\t\t\t\t\t\tspeed \t\t: 300,\n\t\t\t\t\t});\n\t\t\t\t\t//$.colorbox.resize()\n\t\t\t\t})\n\n\t\t\t// imagen_reverso\n\t\t\tvar imagen_reverso = self.create_dom_element({\n\t\t\t\telement_type \t: \"div\",\n\t\t\t\tclass_name   \t: \"imagen_reverso\",\n\t\t\t\tparent \t\t\t: left_detail\n\t\t\t\t})\n\t\t\t\tvar bg_image  = typeof(row_data.imagen_reverso[0])!==\"undefined\" ? row_data.imagen_reverso[0].image : null\n\t\t\t\tif (bg_image) {\n\t\t\t\t\tvar thumb_url = self.build_thumb_url(bg_image,img_size,img_size)\n\t\t\t\t\timagen_reverso.style.backgroundImage = \"url(\"+thumb_url+\")\"\n\t\t\t\t}\n\n\t\t\t\tvar imagen_reverso_big = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"imagen_reverso_big\"\n\t\t\t\t\t})\n\t\t\t\t\tvar big_image_url = self.build_big_image_url(bg_image)\n\t\t\t\t\timagen_reverso_big.style.backgroundImage = \"url(\"+big_image_url+\")\"\n\t\t\t\t\t\n\t\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\t\trow_data_json[t.reverse_image] = window.location.protocol + big_image_url\n\n\t\t\t\tvar link = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\tclass_name   \t: \"fas fa-arrow-alt-circle-down download_image\",\n\t\t\t\t\tparent \t\t\t: imagen_reverso_big\n\t\t\t\t\t})\n\t\t\t\t\tlink.setAttribute('download', 'sardinia-' + row_data.section_id + '-R.jpg');\n\t\t\t\t\tlink.setAttribute('target', '_blank');\n\t\t\t\t\tlink.setAttribute('href', big_image_url);\n\n\t\t\t\timagen_reverso.addEventListener(\"click\",function(e){\n\t\t\t\t\t\t\n\t\t\t\t\t// Build dialog with colorbox\n\t\t\t\t\t// see http://www.jacklmoore.com/colorbox/\n\t\t\t\t\t// Create before load data for performance perception\t\n\t\t\t\t\t$.colorbox({\n\t\t\t\t\t\thtml \t\t: imagen_reverso_big,\n\t\t\t\t\t\ttransition \t: \"none\",\n\t\t\t\t\t\tspeed \t\t: 300,\n\t\t\t\t\t});\n\t\t\t\t\t//$.colorbox.resize()\n\t\t\t\t})\n\n\n\t\t// RIGHT\n\t\tvar right_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"right_detail\",\n\t\t\tparent \t\t\t: detail_container\n\t\t\t})\n\t\t\t\n\t\t\t// ID\n\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : right_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\tclass_name   \t: \"label_section_id\",\n\t\t\t\t\ttext_content \t: tstring[\"id\"] || \"ID\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"section_id\",\n\t\t\t\t\ttext_content \t: row_data.section_id,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.section_id] = row_data.section_id\n\t\t\t\n\t\t\n\t\tvar hallazgo_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator hallazgo_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\t\t\t\n\t\t\t\n\t\t\t// Hallazgo\n\t\t\tif (row_data.hallazgo) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : hallazgo_detail})\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.yacimiento || \"Yacimiento\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"hallazgo\",\n\t\t\t\t\ttext_content \t: row_data.hallazgo,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.site] = row_data.hallazgo || ''\n\n\t\t\t// hallazgo dato for export data\n\t\t\t// console.log(\"row_data:\",row_data);\n\t\t\t// ROW_DATA_JSON +\n\t\t\tvar site_geo_lat = ''\n\t\t\tvar site_geo_lon = ''\n\t\t\tif (typeof row_data.hallazgo_dato[0]!==\"undefined\") {\n\t\t\t\tsite_geo_lat = self.extract_geo(row_data.hallazgo_dato[0], \"lat\")\n\t\t\t\tsite_geo_lon = self.extract_geo(row_data.hallazgo_dato[0], \"lon\")\n\t\t\t}\n\t\t\trow_data_json[t.site_geo_lat] = site_geo_lat\n\t\t\trow_data_json[t.site_geo_lon] = site_geo_lon\n\n\t\t\t// Tipo de hallazgo\n\t\t\tif (typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].tipologia)!==\"undefined\") {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : hallazgo_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.tipo_de_yacimiento || \"Tipo de yacimiento\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"tipo_de_hallazgo\",\n\t\t\t\t\ttext_content \t: row_data.hallazgo_dato[0].tipologia,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.type_of_site] = typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].tipologia)!==\"undefined\" ? row_data.hallazgo_dato[0].tipologia : ''\n\n\n\t\t\t// LocalizaciÃ³n\n\t\t\tif (typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].municipio)!==\"undefined\") {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : hallazgo_detail})\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.localizacion || \"LocalizaciÃ³n\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tvar hallazgo_localizacion = typeof(row_data.hallazgo_dato[0].municipio)!==\"undefined\" ? row_data.hallazgo_dato[0].municipio : \"\"\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"localizacion\",\n\t\t\t\t\ttext_content \t: hallazgo_localizacion,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.findspot] = typeof(row_data.hallazgo_dato[0])!==\"undefined\" && typeof(row_data.hallazgo_dato[0].municipio)!==\"undefined\" ? row_data.hallazgo_dato[0].municipio : ''\n\n\n\t\tvar ceca_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator ceca_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\t\t\t// Ceca\n\t\t\tif (row_data.ceca) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.ceca || \"Ceca\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tvar ceca = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"ceca\",\n\t\t\t\t\ttext_content \t: self.remove_string_double_values(row_data.ceca,\",\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tif (row_data.tipo_object.ceca_links) {\n\t\t\t\t\tvar ar_uri = split(row_data.tipo_object.ceca_links)\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fas fa-external-link-alt\",\n\t\t\t\t\t\t\tparent \t\t\t: ceca\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t$(a).tooltip()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.mint] = row_data.ceca || ''\n\n\n\t\t\t// cronologia\n\t\t\tif (row_data.cronologia) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.cronologia || \"CronologÃ­a\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tvar cronologia_title = split(row_data.cronologia)\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"cronologia\",\n\t\t\t\t\ttext_content \t: cronologia_title[0],\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\t// row_data_json[t.chronology] = typeof cronologia_title[0]!==\"undefined\" ? cronologia_title[0] : ''\n\t\t\trow_data_json[t.start_date] = tipo_object.fecha_inicio || ''\n\t\t\trow_data_json[t.end_date] \t= tipo_object.fecha_fin || ''\t\t\t\n\t\t\t\n\n\t\t\t// autoridad\t\t\t\n\t\t\tif (row_data.tipo_object.autoridad) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.autoridad || \"Autoridad\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\n\t\t\t\t// autoridad_info_string\n\t\t\t\tvar autoridad_info_string = \"\"\n\t\t\t\t/*\n\t\t\t\tif (row_data.tipo_object.autoridad_dato && row_data.tipo_object.autoridad_dato.length>0) {\n\t\t\t\t\t// La autoridad puede estar o no publicada.\n\t\t\t\t\t// Lo intentamos...\n\t\t\t\t\tvar ar_autoridad_name = []\n\t\t\t\t\trow_data.tipo_object.autoridad_dato.forEach(function(element){\n\t\t\t\t\t\t//console.log(\"element:\",element);\n\t\t\t\t\t\t\n\t\t\t\t\t\tvar ar_parts = []\n\t\t\t\t\t\tif (element.nombre) {\n\t\t\t\t\t\t\tar_parts.push(element.nombre)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (element.apellidos) {\n\t\t\t\t\t\t\tar_parts.push(element.apellidos)\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar t_autoridad = ar_parts.join(\" \")\n\t\t\t\t\t\tar_autoridad_name.push(t_autoridad)\n\t\t\t\t\t})\n\t\t\t\t\tif (ar_autoridad_name.length>0) {\n\t\t\t\t\t\tautoridad_info_string += \" \" + ar_autoridad_name.join(\", \")\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t\tif (autoridad_info_string.length<1) {\n\t\t\t\t\t// Si la autoridad NO estÃ¡ publicada, cogemos el dato de la columna resuelta de tipo (autoridad)\n\t\t\t\t\tvar nombre = row_data.tipo_object.autoridad\n\t\t\t\t\t\tnombre = nombre.replace(',', ', ') // Add space between names separated with comma\n\t\t\t\t\tautoridad_info_string = nombre\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tvar autoridad = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"autoridad\",\n\t\t\t\t\ttext_content \t: autoridad_info_string,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\n\t\t\t\tif (row_data.tipo_object.autoridad_dato && typeof(row_data.tipo_object.autoridad_dato[0])!==\"undefined\" && typeof(row_data.tipo_object.autoridad_dato[0].uri)!==\"undefined\" ) {\n\t\t\t\t\tvar ar_uri = split(row_data.tipo_object.autoridad_dato[0].uri)\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fas fa-external-link-alt\",\n\t\t\t\t\t\t\tparent \t\t\t: autoridad\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t$(a).tooltip()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.authority] = typeof autoridad_info_string!==\"undefined\" ? autoridad_info_string : ''\n\n\n\t\t\t// denominacion\n\t\t\tif (row_data.tipo_object.denominacion) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.denominacion || \"Denominacion\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tvar denominacion = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"denominacion\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.denominacion,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tif (row_data.tipo_object.denominacion_iri) {\n\t\t\t\t\tvar ar_uri = split(row_data.tipo_object.denominacion_iri)\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fas fa-external-link-alt\",\n\t\t\t\t\t\t\tparent \t\t\t: denominacion\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t$(a).tooltip()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.denomination] = row_data.tipo_object.denominacion || ''\n\n\n\t\t\t// material\n\t\t\tif (row_data.tipo_object.material) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : ceca_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.material || \"Material\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tvar material = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"material\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.material,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tif (row_data.tipo_object.material_links) {\n\t\t\t\t\tvar ar_uri = split(row_data.tipo_object.material_links)\n\t\t\t\t\tar_uri.forEach(function(element){\n\t\t\t\t\t\tvar a = self.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\t\t\tclass_name   \t: \"fas fa-external-link-alt\",\n\t\t\t\t\t\t\tparent \t\t\t: material\n\t\t\t\t\t\t})\n\t\t\t\t\t\ta.setAttribute(\"target\",\"_blank\")\n\t\t\t\t\t\ta.setAttribute(\"href\",element)\n\t\t\t\t\t\ta.setAttribute(\"title\", \"Go to: \"+element)\n\t\t\t\t\t\t$(a).tooltip()\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.material] \t    = row_data.tipo_object.material || ''\n\t\t\trow_data_json[t.material_links] = row_data.tipo_object.material_links || ''\n\n\n\t\tvar medida_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator medida_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\t\t\t// peso\n\t\t\tif (row_data.peso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : medida_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.peso || \"Peso\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"peso\",\n\t\t\t\t\ttext_content \t: row_data.peso + \" g\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.weight] = row_data.peso || ''\n\n\n\t\t\t// diametro\n\t\t\tif (row_data.diametro) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : medida_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.diametro || \"DiÃ¡metro\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"diametro\",\n\t\t\t\t\ttext_content \t: row_data.diametro + \" mm\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.diameter] = row_data.diametro || ''\n\n\n\t\t\t// posicion_cunos\n\t\t\tif (row_data.cuno && row_data.cuno.length>0) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : medida_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring[\"posicion_cunos\"] || \"PosiciÃ³n de cuÃ±os\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"posicion_cunos\",\n\t\t\t\t\ttext_content \t: row_data.cuno + \" h\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.axis] = row_data.cuno || ''\n\n\t\t\n\t\tvar anverso_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator anverso_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\n\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.anverso || \"ANVERSO\")+\":\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"leyenda_anverso\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\n\n\t\t\t// leyenda_anverso\n\t\t\tif (row_data.tipo_object.leyenda_anverso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.leyenda || \"Leyenda\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"leyenda_anverso\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.leyenda_anverso,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// diseno_anverso\n\t\t\tif (row_data.tipo_object.tipo_anverso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.diseno || \"DiseÃ±o\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"diseno_anverso\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.tipo_anverso,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// simbolo_anverso\n\t\t\tif (row_data.tipo_object.simbolo_anverso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.simbolo || \"SÃ­mbolo\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"simbolo_anverso\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.simbolo_anverso,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\t\t\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.obverse_legend] = row_data.tipo_object.leyenda_anverso || ''\n\t\t\trow_data_json[t.obverse_design] = row_data.tipo_object.tipo_anverso || ''\n\t\t\trow_data_json[t.obverse_symbol] = row_data.tipo_object.simbolo_anverso || ''\n\n\n\t\t\t// leyenda_reverso\n\t\t\tif (row_data.tipo_object.leyenda_reverso || row_data.tipo_object.tipo_reverso || row_data.tipo_object.simbolo_reverso) {\n\n\t\t\t\tvar anverso_detail = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"separator reverso_detail\",\n\t\t\t\t\tparent \t\t\t: right_detail\n\t\t\t\t\t})\n\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\t\ttext_content \t: (tstring.reverso || \"REVERSO\")+\":\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"leyenda_reverso\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t}\n\t\t\t// leyenda_reverso\n\t\t\tif (row_data.tipo_object.leyenda_reverso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.leyenda || \"Leyenda\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"leyenda_reverso\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.leyenda_reverso,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// tipo_reverso\n\t\t\tif (row_data.tipo_object.tipo_reverso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.diseno || \"DiseÃ±o\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"diseno_reverso\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.tipo_reverso,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// simbolo_reverso\n\t\t\tif (row_data.tipo_object.simbolo_reverso) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : anverso_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: (tstring.simbolo || \"SÃ­mbolo\"),\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\t\t\t\t\t\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"simbolo_reverso\",\n\t\t\t\t\ttext_content \t: row_data.tipo_object.simbolo_reverso,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.reverse_legend] = row_data.tipo_object.leyenda_reverso || ''\n\t\t\trow_data_json[t.reverse_design] = row_data.tipo_object.tipo_reverso || ''\n\t\t\trow_data_json[t.reverse_symbol] = row_data.tipo_object.simbolo_reverso || ''\n\n\t\t\n\t\tvar biblio_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator biblio_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\t\t\t// coleccion\t\t\t\n\t\t\tif (row_data.coleccion) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.coleccion || \"coleccion\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"coleccion\",\n\t\t\t\t\tinner_html \t\t: row_data.coleccion,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.collection] = row_data.coleccion || ''\n\n\n\t\t\t// fondo\t\t\t\n\t\t\tif (row_data.fondo) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.fondo || \"fondo\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"fondo\",\n\t\t\t\t\tinner_html \t\t: row_data.fondo,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.funds] = row_data.fondo || ''\n\n\n\t\t\t// bibliografia (referencias bibliogrÃ¡ficas)\n\t\t\tvar bibliografia_info_full = []\n\t\t\tif (row_data.bibliografia && row_data.bibliografia_ref) {\t\t\t\t\n\n\t\t\t\tvar bibliografia = split(row_data.bibliografia)\t\t\t\t\n\t\t\t\tfor (var bi = 0; bi < bibliografia.length; bi++) {\n\t\t\t\t\t\n\t\t\t\t\tvar current = bibliografia[bi]\n\n\t\t\t\t\tvar bibliografia_paginas  \t= ''\n\t\t\t\t\tvar bibliografia_ref \t\t= ''\n\n\n\t\t\t\t\tif (row_data.bibliografia_ref) {\n\t\t\t\t\t\tbibliografia_ref = split(row_data.bibliografia_ref)\n\t\t\t\t\t\tif (typeof bibliografia_ref[bi]!==\"undefined\") {\n\t\t\t\t\t\t\tbibliografia_ref = bibliografia_ref[bi]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (row_data.bibliografia_paginas) {\n\t\t\t\t\t\tbibliografia_paginas = split(row_data.bibliografia_paginas)\n\t\t\t\t\t\tif (typeof bibliografia_paginas[bi]!==\"undefined\") {\n\t\t\t\t\t\t\tbibliografia_paginas = bibliografia_paginas[bi]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\t\ttext_content \t: tstring.bibliografia || \"BibliografÃ­a\",\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t\tvar bibliografia_info_text = current + \" Ref: \" + bibliografia_ref + \" Pag. \" + bibliografia_paginas\n\t\t\t\t\tbibliografia_info_full.push(bibliografia_info_text)\n\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\tclass_name   \t: \"bibliografia\",\n\t\t\t\t\t\ttext_content \t: bibliografia_info_text,\n\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.bibliographic_ref] = bibliografia_info_full.join(\", \")\n\n\n\t\t\t// Publicaciones\t\n\t\t\tif (row_data.publicaciones) {\n\t\t\t\t\n\t\t\t\trow_data.publicaciones.forEach(function(element){\n\t\t\t\t\t\n\t\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\t\t\ttext_content \t: tstring.bibliografia || \"BibliografÃ­a\",\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t\t\tvar bibliografia_title = element.autoria +\" \"+ element.titulo + \" \" + element.fecha_publicacion\n\n\t\t\t\t\t\tself.create_dom_element({\n\t\t\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\t\t\tclass_name   \t: \"publicaciones\",\n\t\t\t\t\t\t\ttext_content \t: bibliografia_title,\n\t\t\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t\t\t})\n\t\t\t\t})\t\t\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.bibliography] = typeof bibliografia_title!==\"undefined\" ? bibliografia_title : ''\n\n\n\t\t\t// info publica\n\t\t\tif (row_data.info_publica && row_data.info_publica!=='<br data-mce-bogus=\"1\">') {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : biblio_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.notas || \"Notas\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"notas\",\n\t\t\t\t\tinner_html \t\t: row_data.info_publica,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.info] = row_data.info_publica || ''\n\n\t\t\n\t\tvar uri_detail = self.create_dom_element({\n\t\t\telement_type \t: \"div\",\n\t\t\tclass_name   \t: \"separator uri_detail\",\n\t\t\tparent \t\t\t: right_detail\n\t\t\t})\n\t\t\t\n\t\t\t// TIPO . Title (catalogo, autoridad, numero_catalogo)\n\t\t\tif (row_data.tipo_object.catalogo) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : uri_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.refeferencia_bibliografica || \"Ref bibliografia\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tvar ar_catalogo_text = []\n\t\t\t\tar_catalogo_text.push(row_data.tipo_object.catalogo)\n\t\t\t\tif (row_data.tipo_object.numero_catalogo) {\n\t\t\t\t\tar_catalogo_text.push(row_data.tipo_object.numero_catalogo)\n\t\t\t\t}\n\t\t\t\tif (autoridad_info_string) {\n\t\t\t\t\tar_catalogo_text.push(autoridad_info_string)\n\t\t\t\t}\n\t\t\t\tvar ar_additions = []\n\t\t\t\tif (row_data.tipo_object.ceca_text) {\n\t\t\t\t\tar_additions.push(row_data.tipo_object.ceca_text)\n\t\t\t\t}\n\t\t\t\tif (row_data.tipo_object.denominacion) {\n\t\t\t\t\tar_additions.push(row_data.tipo_object.denominacion)\n\t\t\t\t}\n\t\t\t\tvar tipo_info = ar_catalogo_text.join(\" \") + \" | \" + ar_additions.join(\" | \")\n\t\t\t\tvar catalogo = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"tipo\",\n\t\t\t\t\tinner_html \t\t: tipo_info,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\t/*\n\t\t\t\tconsole.log(\"row_data.tipo_object.publicacion:\",row_data.tipo_object.publicacion);\n\t\t\t\tif (row_data.tipo_object.publicacion && row_data.tipo_object.publicacion.length>0) {\n\t\t\t\t\tvar ar_title = []\n\t\t\t\t\trow_data.tipo_object.publicacion.forEach(function(element){\n\t\t\t\t\t\tar_title.push(element)\n\t\t\t\t\t})\n\t\t\t\t\tif (ar_title.length>0) {\n\t\t\t\t\t\tcatalogo.title = ar_title.join(\", \") \n\t\t\t\t\t\t$(catalogo).tooltip()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\trow_data_json[t.catalogue] \t\t  = row_data.tipo_object.catalogo || ''\n\t\t\trow_data_json[t.catalogue_number] = row_data.tipo_object.numero_catalogo || ''\n\n\n\t\t\t// equivalentes\n\t\t\tif (row_data.tipo_object.equivalentes && row_data.tipo_object.equivalentes.length>0) {\n\t\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line\", parent : uri_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: \"\", //tstring.equivalentes || \"Equivalentes\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"equivalentes\",\n\t\t\t\t\tinner_html  \t: row_data.tipo_object.equivalentes,\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t}\n\t\t\t// ROW_DATA_JSON +\n\t\t\tvar equivalentes_value = row_data.tipo_object.equivalentes.replace(/<br>/g,\", \")\n\t\t\trow_data_json[t.equivalents] = equivalentes_value\n\n\n\t\t\t// URI\n\t\t\tvar line = self.create_dom_element({element_type : \"div\", class_name : \"line uri_line\", parent : uri_detail})\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"label\",\n\t\t\t\t\ttext_content \t: tstring.uri || \"URI\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tlet div_uri = self.create_dom_element({\n\t\t\t\t\telement_type \t: \"div\",\n\t\t\t\t\tclass_name   \t: \"uri\",\n\t\t\t\t\tparent \t\t\t: line\n\t\t\t\t})\n\t\t\t\tvar uri = \"https://numisdata.org/sardinia/mon/\" + row_data.section_id\n\t\t\t\tself.create_dom_element({\n\t\t\t\t\telement_type \t: \"a\",\n\t\t\t\t\ttext_content \t: uri,\n\t\t\t\t\thref \t\t\t: uri,\n\t\t\t\t\tparent \t\t\t: div_uri\n\t\t\t\t})\n\t\t\t\t// ROW_DATA_JSON +\n\t\t\t\trow_data_json[t.uri] = uri || ''\n\n\t\t\n\n\n\t\t// Add to texport_data_json\n\t\tself.to_export_data_json(row_data_json)\n\t\tif(SHOW_DEBUG===true) {\n\t\t\t//console.log(\"row_data_json:\",row_data_json);\n\t\t}\n\n\n\t\treturn detail_container\n\t},//end build_detail\n\n\n\n\textract_geo : function(row, type) {\n\n\t\tvar geo_value = ''\n\n\t\t//console.log(\"row:\",row);\n\t\tvar ar_place = JSON.parse(row.lugar)\n\t\t// console.log(\"ar_place:\",ar_place);\n\t\tif (typeof ar_place[0]!==\"undefined\" && typeof ar_place[0].layer_data[0]!==\"undefined\" && typeof ar_place[0].layer_data[0][type]!==\"undefined\") {\n\t\t\tgeo_value = ar_place[0].layer_data[0][type]\n\t\t}\n\n\t\treturn geo_value\n\t},//end extract_geo\n\n\n\n\t/**\n\t* OPEN_DETAIL\n\t*/\n\topen_detail : function(button_obj, row_data) {\n\n\t\tconst self = this\n\n\t\tvar detail_container = self.build_detail(row_data)\n\t\t//detail_container.appendChild( button_obj.cloneNode(true) )\n\n\t\t// Build dialog with colorbox\n\t\t// see http://www.jacklmoore.com/colorbox/\n\t\t// Create before load data for performance perception\t\n\t\t$.colorbox({\n\t\t\thtml: detail_container,\n\t\t\ttransition : \"none\",\n\t\t\tspeed : 300\n\t\t});\n\n\t\t//setTimeout(function(){\n\t\t//\t$.colorbox.resize()\n\t\t//\tconsole.log(\"detail_container:\",detail_container);\n\t\t//},3000)\n\t\t\n\t\treturn true\n\t},//end open_detail\n\n\n\n\tbuild_thumb_url : function(image_path, width, height) {\n\n\t\tif (!image_path || image_path.length<1) {\n\t\t\treturn false\n\t\t}\n\n\t\tvar bg_image  = image_path\n\n\t\tvar w = width  || 125\n\t\tvar h = height || 125\n\t\t\t\n\t\tvar file_name = '/image/' + bg_image.split('/image/').pop();\t\t\n\n\t\tbg_image = bg_image.replace('/media_test/media_sardinia/dedalo4/','/')\n\t\tbg_image = bg_image.replace('/media/dedalo/','/')\n\t\t//bg_image = \"http://sardinia.antropolis.net/dedalo/lib/dedalo/media_engine/img.php?m=free&w=\"+w+\"&h=\"+h+\"&SID=\" + file_name\n\t\t//bg_image = \"//numisdata.org/sardinia/dedalo/lib/dedalo/media_engine/img.php?m=free&w=\"+w+\"&h=\"+h+\"&SID=\" + file_name\n\t\tbg_image = \"//sardinia.numisdata.org/dedalo/lib/dedalo/media_engine/img.php?m=free&w=\"+w+\"&h=\"+h+\"&SID=\" + file_name\n\n\t\treturn bg_image\n\t},//end build_thumb_url\n\n\n\n\tbuild_big_image_url : function(image_path, width, height) {\n\n\t\tif (!image_path || image_path.length<1) {\n\t\t\treturn false\n\t\t}\n\n\t\tvar bg_image  = image_path\n\t\n\t\t//bg_image = bg_image.replace('/dedalo4/media_test/media_sardinia/','/sardinia/dedalo/media/')\n\t\t\n\t\t// Fix dedalo path for call to web path\n\t\tbg_image = bg_image.replace('/dedalo/media/','/sardinia/media/')\n\t\t// Fix development path\n\t\tbg_image = bg_image.replace('/sardinia/sardinia/','/sardinia/')\n\t\t// Replace default quality for original file\n\t\tbg_image = bg_image.replace('/1.5MB/','/original/')\n\n\t\tvar file_name = bg_image\n\t\n\t\t//bg_image = \"http://sardinia.antropolis.net\" + file_name\n\t\tbg_image = \"//numisdata.org\" + file_name\n\n\t\treturn bg_image\n\t},//end build_big_image_url\n\n\n\n\t/**\n\t* CREATE_DOM_ELEMENT\n\t* Builds single dom element\n\t*/\n\tcreate_dom_element : function(element_options) {\n\n\t\tvar element_type\t\t\t= element_options.element_type\n\t\tvar parent\t\t\t\t\t= element_options.parent\n\t\tvar class_name\t\t\t\t= element_options.class_name\n\t\tvar style\t\t\t\t\t= element_options.style\n\t\tvar data_set\t\t\t\t= element_options.data_set\n\t\t\tif (typeof data_set===\"undefined\" && typeof element_options.dataset!==\"undefined\") data_set = element_options.dataset\n\t\tvar custom_function_events\t= element_options.custom_function_events\n\t\tvar title_label\t\t\t\t= element_options.title_label\n\t\tvar text_node\t\t\t\t= element_options.text_node\n\t\tvar text_content\t\t\t= element_options.text_content\n\t\tvar inner_html\t\t\t\t= element_options.inner_html\n\t\tvar href\t\t\t\t\t= element_options.href\n\t\tvar id \t\t\t\t\t\t= element_options.id\n\t\tvar draggable\t\t\t\t= element_options.draggable\n\t\tvar value\t\t\t\t\t= element_options.value\n\t\tvar download\t\t\t\t= element_options.download\n\t\t\n\t\tvar element = document.createElement(element_type);\n\t\n\t\t// Add id property to element\n\t\tif(id){\n\t\t\telement.id = id;\n\t\t}\n\n\t\t// A element. Add href property to element\n\t\tif(element_type === 'a'){\n\n\t\t\tif(href){\n\t\t\t\telement.href =href;\n\t\t\t}else{\n\t\t\t\telement.href = 'javascript:;';\n\t\t\t}\n\t\t\n\t\t}\n\t\t\n\t\t// Class name. Add css classes property to element\n\t\tif(class_name){\n\t\t\telement.className = class_name\n\t\t}\n\n\t\t// Style. Add css style property to element\n\t\tif(style){\n\t\t\tfor(key in style) {\n\t\t\t\telement.style[key] = style[key]\n\t\t\t\t//element.setAttribute(\"style\", key +\":\"+ style[key]+\";\");\n\t\t\t}\t\t\n\t\t}\n\n\t\t// Title . Add title attribute to element\n\t\tif(title_label){\n\t\t\telement.title = title_label\n\t\t}\n\t\n\t\t// Dataset Add dataset values to element\t\t\n\t\tif(data_set){\n\t\t\tfor (var key in data_set) {\n\t\t\t\telement.dataset[key] = data_set[key]\n\t\t\t}\n\t\t}\n\n\t\t// Value\n\t\tif(value){\n\t\t\telement.value = value\n\t\t}\n\n\t\t// Click event attached to element\n\t\tif(custom_function_events){\n\t\t\tconst len = custom_function_events.length\n\t\t\tfor (var i = 0; i < len; i++) {\n\t\t\t\tvar function_name \t\t= custom_function_events[i].name\n\t\t\t\tvar event_type\t\t\t= custom_function_events[i].type\n\t\t\t\tvar function_arguments\t= custom_function_events[i].function_arguments\t\t\t\t\t\n\n\t\t\t\t// Create event caller\n\t\t\t\tthis.create_custom_events(element, event_type, function_name, function_arguments)\n\t\t\t}\n\t\t}//end if(custom_function_events){\n\t\t\n\t\t// Text content \n\t\tif(text_node){\n\t\t\t//element.appendChild(document.createTextNode(TextNode));\n\t\t\t// Parse html text as object\n\t\t\tif (element_type==='span') {\n\t\t\t\telement.textContent = text_node\n\t\t\t}else{\n\t\t\t\tvar el = document.createElement('span')\n\t\t\t\t\tel.innerHTML = \" \"+text_node // Note that prepend a space to span for avoid Chrome bug on selection\n\t\t\t\telement.appendChild(el)\n\t\t\t}\t\t\t\n\t\t}else if(text_content) {\n\t\t\telement.textContent = text_content\n\t\t}else if(inner_html) {\n\t\t\telement.innerHTML = inner_html\n\t\t}\n\n\n\t\t// Append created element to parent\n\t\tif (parent) {\n\t\t\tparent.appendChild(element)\n\t\t}\n\n\t\t// Dragable\n\t\tif(draggable){\n\t\t\telement.draggable = draggable;\n\t\t}\n\n\t\tif (download) {\n\t\t\telement.setAttribute(\"download\", download)\n\t\t}\n\n\t\treturn element;\n\t},//end create_dom_element\n\n\n\n\tremove_string_double_values : function(value, separator) {\n\n\t\tif (value===null) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Split string as array\n\t\tvar ar_elements = value.split(separator)\n\t\tvar ar_unique \t= []\n\n\t\tar_elements.forEach(function(element) {\t\t\t\n\t\t\tif (ar_unique.indexOf(element)===-1) {\n\t\t\t\tar_unique.push(element)\n\t\t\t}\n\t\t})\n\n\t\tvar final_string = ar_unique.join(separator)\n\n\t\treturn final_string;\n\t},//end remove_string_double_values\n\n\n\n\ttoggle_monedas : function() {\n\n\t\t$(\".monedas_wrapper\").toggle()\n\n\t\treturn true\n\t},\n\n\n\n\ttoggle_tipos : function() {\n\n\t\t$(\".tipo_header_wrapper, .tipo_add_info\").toggle()\n\n\t\treturn true\n\t},\n\n\n\n\t/**\n\t* LOAD_SNIPPET\n\t* Loads by httprequest a fragment of code (phtml)\n\t*/\n\tload_snippet : function(snippet_name, target_id) {\n\n\t\tconst self = this\n\n\t\tvar trigger_url  = page_globals.__WEB_TEMPLATE_WEB__ + \"/common/trigger.common.php\"\n\t\tvar trigger_vars = {\n\t\t\tmode \t \t : \"load_snippet\",\n\t\t\tsnippet_name : snippet_name\n\t\t}\n\t\t\n\n\t\t// Http request directly in javascript to the API is possible too..\n\t\tvar js_promise = common.get_json_data(trigger_url, trigger_vars).then(function(response){\n\t\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\t\tconsole.log(\"[common.load_snippet] response:\" , response);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (!response) {\n\t\t\t\t\t// Error on load data from trigger\n\t\t\t\t\tconsole.warn(\"[common.load_snippet] Error. Received response data is null\");\t\t\t\t\n\t\t\t\t}\n\t\n\t\t\t\tif (target_id) {\n\t\t\t\t\tvar target_obj = document.getElementById(target_id)\t\n\t\t\t\t\tif (target_obj) {\n\t\t\t\t\t\ttarget_obj.innerHTML = response.result\n\t\t\t\t\t}\n\t\t\t\t}\t\t\t\n\n\t\t\t\treturn response\n\t\t})\n\n\t\treturn js_promise\n\t},//end load_snippet\n\n\n\n\t/**\n\t* BUILD_DOWNLOAD_DATA_LINK\n\t* \n\t*/\n\tbuild_download_data_link : function(options) {\n\n\t\tconst self = this\n\n\t\t// Options vars\n\t\tvar obj_to_save = options.obj_to_save\n\t\tvar data_type \t= options.data_type || 'json'\n\t\tvar file_name \t= options.file_name || 'download_file'\n\n\t\t//var a = CircularJSON.stringify(obj_to_save, null, 2)\n\t\t//\tconsole.log(\"a:\",a);\n\t\t//return false\n\n\t\t// Label\n\t\tvar label = file_name\n\t\t\n\t\t// Mime\n\t\tvar mime_type = ''\n\t\tvar data \t  = {}\n\t\tswitch(data_type) {\n\t\t\tcase 'csv':\n\t\t\t\tmime_type = 'text/csv'\n\t\t\t\t// Convert json obj to csv\n\t\t\t\tvar csv = self.convert_json_to_csv(obj_to_save)\n\t\t\t\t// Blob data\n\t\t\t\tdata = new Blob([csv], {\n\t\t\t\t    type: mime_type,\n\t\t\t\t    name: 'file.csv'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase 'json':\t\n\t\t\tdefault:\n\t\t\t\tmime_type = 'application/json'\n\t\t\t\t// Blob data\n\t\t\t\tdata = new Blob([JSON.stringify(obj_to_save, null, 2)], {\n\t\t\t\t    type: mime_type,\n\t\t\t\t    name: 'file.json'\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t}\t\t\n\t\t\n\t\t// Build href from data\n\t\tvar href = URL.createObjectURL(data)\n\n\t\t// link_obj\n\t\tvar link_obj = self.create_dom_element({\n\t\t\telement_type : \"a\",\n\t\t\tclass_name   : \"download_data_link \" + data_type,\n\t\t\thref \t\t : href,\n\t\t\tdownload \t : file_name\n\t\t})\n\n\t\t// Icon\n\t\tself.create_dom_element({\n\t\t\telement_type : \"i\",\n\t\t\tclass_name   : \"fas fa-download\",\n\t\t\tparent \t\t : link_obj\n\t\t})\n\n\t\t// Label\n\t\tself.create_dom_element({\n\t\t\telement_type : \"span\",\n\t\t\ttext_node    : data_type,\n\t\t\tparent \t\t : link_obj\n\t\t})\n\n\t\t// Beta\n\t\tself.create_dom_element({\n\t\t\telement_type : \"i\",\n\t\t\tclass_name   : \"beta\",\n\t\t\ttext_node    : \"(beta)\",\n\t\t\tparent \t\t : link_obj\n\t\t})\n\n\n\t\treturn link_obj\n\t},//end build_download_data_link\n\n\n\n\tconvert_json_to_csv : function(json_obj) {\n\t\t//console.log(\"json_obj:\",JSON.stringify(json_obj));\n\n\t\tvar json = json_obj\n\t\tif(Array.isArray(json)===false) {\n\t\t\tjson = [json]\n\t\t}\n\n\t\tif (json.length===0) {\n\t\t\treturn false\n\t\t}\n\n\t\tvar fields \t = Object.keys(json[0])\n\t\tvar replacer = function(key, value) { return value === null ? '' : value } \n\t\tvar csv = json.map(function(row){\n\t\t  return fields.map(function(fieldName){\n\t\t  \t\t\n\t\t  \t\tvar current_value = row[fieldName]\t\n\t\t  \t\tvar valor \t\t  = JSON.stringify(current_value, replacer)\t\t  \t\t\n\n\t\t  \t\t/*\n\t\t\t\t\t// Unify format. Remove quotes added ad begining and end by stringify\n\t\t\t\t\tvalor = valor.replace(/(^\\\"|\\\"$)/g, '')\n\t\t\t  \t\t\n\t\t\t\t\t// Replace json objects already stringified like \\\"value to \"value\n\t\t\t\t\tvalor = valor.replace(/(\\\\\\\")/g, '\\\"')\n\n\t\t\t\t\t// Clean json stringified vars\n\t\t\t\t\t//valor = valor.replace(/(\\\"\\[)/g, '\\[')\n\t\t\t\t\t//valor = valor.replace(/(\\]\\\")/g, '\\]')\n\t\t\t\t\t//valor = valor.replace(/(\\\"{)/g, '{')\n\t\t\t\t\t//valor = valor.replace(/(}\\\")/g, '}')\t\t\t\t\t\n\n\t\t\t\t\t// Escape internal quotes (csv escape with double quotes like \"\" for \")\n\t\t\t\t\tvalor = valor.replace(/(\\\")/g, '\\\"\\\"')\n\n\t\t\t\t\t// Add quotes to result in all values\n\t\t\t\t\tvalor = '\"' + valor + '\"'\n\t\t\t\t*/\n\t\t   \t\t//console.log(\"valor [\"+fieldName+\"]:\",valor);\n\t\t    \treturn valor\n\t\t  }).join(',')\n\t\t})\n\n\t\t// add header column\n\t\tcsv.unshift(fields.join(','))\n\n\t\t// Create rows separated by \\r\\n\n\t\tcsv = csv.join('\\r\\n')\n\n\t\tif(SHOW_DEBUG===true) {\n\t\t\tconsole.log(csv)\n\t\t}\n\t\t\n\t\t\n\t\treturn csv\n\t},//end convert_json_to_csv\n\n\n\n\t/**\n\t* TO_EXPORT_DATA_JSON\n\t*/\n\tto_export_data_json : function(row_object) {\n\t\n\t\tconst self = this\n\n\t\tvar export_obj = {\n\t\t\t// Add common vars\n\t\t\tdata_source_org : \"Numisdata Sardinia\",\n\t\t\tdata_source_url : \"https://numisdata.org/sardinia/\",\n\t\t\tdata_lang \t \t: page_globals.WEB_CURRENT_LANG_CODE,\n\t\t}\n\n\t\t// Add row_object vars later (order is important for csv)\n\t\tfor(var key in row_object) {\n\n\t\t\tvar value = row_object[key]\n\n\t\t\t// Special cases comma separated values\n\t\t\t//if (key===\"Material links\" || key===\"Equivalents\") {\n\t\t\t//\tvalue = value.split(\", \")\n\t\t\t//}\n\n\t\t\texport_obj[key] = value\n\t\t}\t\t\n\t\t\n\t\tif(SHOW_DEBUG===true) {\n\t\t\t//console.log(\"export_obj:\",export_obj);;\n\t\t}\n\n\t\tself.export_data_json.push(export_obj)\n\n\t\treturn true\n\t},// end to_export_data_json\n\n\n\n}//end common\n\n\n\ncommon.setup();\n\n\n\nfunction split( val ) {\n  return val.split( /,\\s*/ );\n}\nfunction extractLast( term ) {\n  return split( term ).pop();\n}\n\n//var CircularJSON=function(JSON,RegExp){var specialChar=\"~\",safeSpecialChar=\"\\\\x\"+(\"0\"+specialChar.charCodeAt(0).toString(16)).slice(-2),escapedSafeSpecialChar=\"\\\\\"+safeSpecialChar,specialCharRG=new RegExp(safeSpecialChar,\"g\"),safeSpecialCharRG=new RegExp(escapedSafeSpecialChar,\"g\"),safeStartWithSpecialCharRG=new RegExp(\"(?:^|([^\\\\\\\\]))\"+escapedSafeSpecialChar),indexOf=[].indexOf||function(v){for(var i=this.length;i--&&this[i]!==v;);return i},$String=String;function generateReplacer(value,replacer,resolve){var doNotIgnore=false,inspect=!!replacer,path=[],all=[value],seen=[value],mapp=[resolve?specialChar:\"[Circular]\"],last=value,lvl=1,i,fn;if(inspect){fn=typeof replacer===\"object\"?function(key,value){return key!==\"\"&&replacer.indexOf(key)<0?void 0:value}:replacer}return function(key,value){if(inspect)value=fn.call(this,key,value);if(doNotIgnore){if(last!==this){i=lvl-indexOf.call(all,this)-1;lvl-=i;all.splice(lvl,all.length);path.splice(lvl-1,path.length);last=this}if(typeof value===\"object\"&&value){if(indexOf.call(all,value)<0){all.push(last=value)}lvl=all.length;i=indexOf.call(seen,value);if(i<0){i=seen.push(value)-1;if(resolve){path.push((\"\"+key).replace(specialCharRG,safeSpecialChar));mapp[i]=specialChar+path.join(specialChar)}else{mapp[i]=mapp[0]}}else{value=mapp[i]}}else{if(typeof value===\"string\"&&resolve){value=value.replace(safeSpecialChar,escapedSafeSpecialChar).replace(specialChar,safeSpecialChar)}}}else{doNotIgnore=true}return value}}function retrieveFromPath(current,keys){for(var i=0,length=keys.length;i<length;current=current[keys[i++].replace(safeSpecialCharRG,specialChar)]);return current}function generateReviver(reviver){return function(key,value){var isString=typeof value===\"string\";if(isString&&value.charAt(0)===specialChar){return new $String(value.slice(1))}if(key===\"\")value=regenerate(value,value,{});if(isString)value=value.replace(safeStartWithSpecialCharRG,\"$1\"+specialChar).replace(escapedSafeSpecialChar,safeSpecialChar);return reviver?reviver.call(this,key,value):value}}function regenerateArray(root,current,retrieve){for(var i=0,length=current.length;i<length;i++){current[i]=regenerate(root,current[i],retrieve)}return current}function regenerateObject(root,current,retrieve){for(var key in current){if(current.hasOwnProperty(key)){current[key]=regenerate(root,current[key],retrieve)}}return current}function regenerate(root,current,retrieve){return current instanceof Array?regenerateArray(root,current,retrieve):current instanceof $String?current.length?retrieve.hasOwnProperty(current)?retrieve[current]:retrieve[current]=retrieveFromPath(root,current.split(specialChar)):root:current instanceof Object?regenerateObject(root,current,retrieve):current}var CircularJSON={stringify:function stringify(value,replacer,space,doNotResolve){return CircularJSON.parser.stringify(value,generateReplacer(value,replacer,!doNotResolve),space)},parse:function parse(text,reviver){return CircularJSON.parser.parse(text,generateReviver(reviver))},parser:JSON};return CircularJSON}(JSON,RegExp);\n\n/*\n$('body').on('mouseenter mouseleave','.dropdown',function(e){\n  var _d=$(e.target).closest('.dropdown');_d.addClass('show');\n  setTimeout(function(){\n    _d[_d.is(':hover')?'addClass':'removeClass']('show');\n    $('[data-toggle=\"dropdown\"]', _d).attr('aria-expanded',_d.is(':hover'));\n  },300);\n});\n*/"]}