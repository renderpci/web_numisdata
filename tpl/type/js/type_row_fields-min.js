var type_row_fields_min=function(e){"use strict";const t=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#17becf"];function n(e,t){if(this.constructor===n)throw new Error("Abstract class 'chart_wrapper' cannot be instantiated");n._n_charts_created++,this.id=n._n_charts_created,this.div_wrapper=e,this._display_download=t.display_download||!1,this._download_chart_container=void 0,this.plot_container=void 0,this._display_control_panel=t.display_control_panel||!1,this._controls_container=void 0,this._controls_toggle=void 0,this.controls_content_container=void 0}function a(){}function o(e,t){if(this.constructor===o)throw new Error("Abstract class 'd3_chart_wrapper' cannot be instantiated");n.call(this,e,t),this.svg=void 0,this._overflow=t.overflow||!1,this._outer_height=t.outer_height||"500px"}n._n_charts_created=0,n.prototype.id_string=function(){return`chart${this.id}`},n.prototype.render=function(){this.div_wrapper.replaceChildren(),this.render_plot(),this._display_control_panel&&this.render_control_panel(),this._display_download&&this._render_download_panel()},n.prototype._render_download_panel=function(){const e=this.get_supported_export_formats();if(!e.length)return;this.download_chart_container=common.create_dom_element({element_type:"div",id:`${this.id_string()}_download_chart_container`,class_name:"o-purple download_chart_container",parent:this.div_wrapper});const t=common.create_dom_element({element_type:"select",id:`${this.id_string()}_chart_export_format`,class_name:"chart_format_select",parent:this.download_chart_container});for(const n of e)common.create_dom_element({element_type:"option",value:n,text_content:n.toUpperCase(),parent:t});common.create_dom_element({element_type:"input",type:"button",class_name:"btn primary button_download chart",value:tstring.download||"Download",parent:this.download_chart_container}).addEventListener("click",(()=>{this.download_chart(t.value)}))},n.prototype.render_plot=function(){this.plot_container=common.create_dom_element({element_type:"div",id:`${this.id_string()}_plot_container`,class_name:"o-purple plot_container",parent:this.div_wrapper})},n.prototype.render_control_panel=function(){const e=this;this._controls_container=common.create_dom_element({element_type:"div",id:`${this.id_string()}_control_panel`,class_name:"control_panel",parent:this.div_wrapper}),this._controls_toggle=common.create_dom_element({element_type:"div",id:`${this.id_string()}_control_panel_toggle`,text_content:tstring.control_panel||"Control panel",class_name:"o-red control_panel_toggle opened",parent:this._controls_container}),this._controls_toggle.addEventListener("click",(function(){e._controls_toggle.classList.toggle("opened"),e.controls_content_container.classList.toggle("hide")})),this.controls_content_container=common.create_dom_element({element_type:"div",id:`${this.id_string()}_control_panel_content`,class_name:"o-green control_panel_content hide",parent:this._controls_container})},n.prototype.download_chart=function(e){const t=`chart.${e}`,n=`download_chart_as_${e}`;if(void 0===this[n])throw new Error(`${n} is not implemented!`);this[n](t)},n.prototype.get_supported_export_formats=function(){return[]},a.sqrt=function(e){return Math.ceil(Math.sqrt(e.length))},a.sturges=function(e){return Math.ceil(Math.log2(e.length))+1},a.rice=function(e){return Math.ceil(2*Math.pow(e.length,1/3))},a.doane=function(e){const t=e.length;if(t<2)throw new Error("Doane's rule needs at least 2 datapoints");const n=Math.sqrt(6*(t-2)/((t+1)*(t+3))),a=d3.deviation(e),o=d3.mean(e),r=d3.sum(e),i=Math.sqrt(t*(t+1))/(t-2)*((r-t*o)/(t*Math.pow(a,3)));return 1+Math.ceil(Math.log2(t))+Math.ceil(Math.log2(1+Math.abs(i)/n))},a.scott=function(e){if(e.length<2)throw new Error("Cannot compute standard deviation of an array with less than 2 values");return Math.ceil((d3.max(e)-d3.min(e))*Math.pow(e.length,1/3)/(3.49*d3.deviation(e)))},a.freedman_diaconis=function(e){const t=d3.quantile(e,.75),n=d3.quantile(e,.25),a=t-n;if(n===t)throw new Error("IQR is 0!");return Math.ceil((d3.max(e)-d3.min(e))*Math.pow(e.length,1/3)/(2*a))},Object.setPrototypeOf(o.prototype,n.prototype),o.prototype.render_plot=function(){n.prototype.render_plot.call(this),this.svg=d3.select(this.plot_container).append("svg").attr("version","1.1").attr("xmlns","http://www.w3.org/2000/svg"),this._overflow?(this.svg.attr("width",null).attr("height",this._outer_height),this.plot_container.style="overflow: auto;"):this.svg.attr("width","100%")},o.prototype.get_supported_export_formats=function(){return["svg"]},o.prototype.download_chart_as_svg=function(e){const t=this.svg.node().outerHTML,n=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),a=URL.createObjectURL(n),o=common.create_dom_element({element_type:"a",href:a});o.setAttribute("download",e),o.click(),o.remove(),URL.revokeObjectURL(a)};const r={Basis:d3.curveBasis,"Basis closed":d3.curveBasisClosed,"Basis open":d3.curveBasisOpen,Bundle:d3.curveBundle,"Bump X":d3.curveBumpX,"Bump Y":d3.curveBumpY,Cardinal:d3.curveCardinal,"Cardinal closed":d3.curveCardinalClosed,"Cardinal open":d3.curveCardinalOpen,"Catmull-Rom":d3.curveCatmullRom,"Catmull-Rom closed":d3.curveCatmullRomClosed,"Catmull-Rom open":d3.curveCatmullRomOpen,Linear:d3.curveLinear,"Linear closed":d3.curveLinearClosed,"Monotone X":d3.curveMonotoneX,"Monotone Y":d3.curveMonotoneY,Natural:d3.curveNatural,Step:d3.curveStep,"Step after":d3.curveStepAfter,"Step before":d3.curveStepBefore};function i(e,n,i){if(o.call(this,e,i),this._color=i.color||t[0],this._whiskers_quantiles=i.whiskers_quantiles||null,!n.length)throw new Error("Data array is empty");this._data=n,this._data_extent=d3.extent(n),this._metrics=function(e,t=null){const n={max:null,upper_fence:null,quartile3:null,median:null,mean:null,iqr:null,quartile1:null,lower_fence:null,min:null};return n.min=d3.min(e),n.quartile1=d3.quantile(e,.25),n.median=d3.median(e),n.mean=d3.mean(e),n.quartile3=d3.quantile(e,.75),n.max=d3.max(e),n.iqr=n.quartile3-n.quartile1,n.lower_fence=t?d3.quantile(e,t[0]/100):n.quartile1-1.5*n.iqr,n.upper_fence=t?d3.quantile(e,t[1]/100):n.quartile3+1.5*n.iqr,n}(n,this._whiskers_quantiles),this._outliers=n.filter((e=>e<this._metrics.lower_fence||e>this._metrics.upper_fence)),this._full_height=453,this._full_width=300,this._chart={},this._chart.margin={top:5,right:0,bottom:5,left:40},this._chart.width=this._full_width-this._chart.margin.left-this._chart.margin.right,this._chart.height=this._full_height-this._chart.margin.top-this._chart.margin.bottom,this._chart.yscale=d3.scaleLinear().range([this._chart.height,0]).domain(this._data_extent).clamp(!0),this._chart.yaxis=d3.axisLeft(this._chart.yscale).tickFormat((e=>e.toFixed(1))),this._chart.violin_scale=.8,this._chart.box_scale=.3,this._chart.n_bins=a.sturges(this._data),this._chart.histogram=d3.bin().domain(this._data_extent).thresholds(function(e,t,n){const a=(t-e)/(n-1);return d3.range(n).map((t=>e+t*a))}(this._data_extent[0],this._data_extent[1],this._chart.n_bins+1)),this._chart.bins=this._chart.histogram(this._data),this._chart.violin_curve=r.Basis,this._graphics={root_g:null}}Object.setPrototypeOf(i.prototype,o.prototype),i.prototype.render_plot=function(){o.prototype.render_plot.call(this),this.svg.attr("viewBox",`0 0 ${this._full_width} ${this._full_height}`),this._graphics.root_g=this.svg.append("g").attr("transform",`translate(${this._chart.margin.left},${this._chart.margin.top})`),this._render_y_axis(),this._render_violin(),this._render_box()},i.prototype._render_y_axis=function(){this._graphics.root_g.append("g").call(this._chart.yaxis).selectAll("g.tick").selectAll("text").style("font-size",15)},i.prototype._render_violin=function(){const e=this._chart.bins,t=this._chart.violin_scale,n=this._chart.yscale,a=this._chart.violin_curve,o=this._graphics.root_g.append("g"),r=d3.max(e,(e=>e.length)),i=d3.scaleLinear().range([0,this._chart.width]).domain([-r,r]);this._data.length<=1||o.append("path").datum(e).style("stroke","gray").style("stroke-width",.4).style("fill","#d2d2d2").attr("d",d3.area().x0((e=>i(-e.length*t))).x1((e=>i(e.length*t))).y((e=>n(e.x0))).curve(a))},i.prototype._render_box=function(){const e=this._chart.yscale,t=this._metrics,n=this._chart.box_scale*this._chart.width,a=this._graphics.root_g.append("g").attr("transform",`translate(${this._chart.width/2},0)`),o=a.append("g");for(const t of this._outliers)o.append("circle").attr("cx",0).attr("cy",e(t)).attr("r",4).style("fill",this._color).style("opacity",.7);const r=a.append("g");r.append("line").attr("x1",0).attr("y1",e(t.lower_fence)).attr("x2",0).attr("y2",e(t.upper_fence)).attr("stroke",this._color).attr("stroke-width",2),r.append("line").attr("x1",-n/2).attr("y1",e(t.lower_fence)).attr("x2",n/2).attr("y2",e(t.lower_fence)).attr("stroke",this._color).attr("stroke-width",2),r.append("line").attr("x1",-n/2).attr("y1",e(t.upper_fence)).attr("x2",n/2).attr("y2",e(t.upper_fence)).attr("stroke",this._color).attr("stroke-width",2);const i=a.append("g");this._data.length>1&&i.append("rect").attr("x",-n/2).attr("y",e(t.quartile3)).attr("width",n).attr("height",e(t.quartile1)-e(t.quartile3)).attr("fill",this._color),i.append("line").attr("x1",-n/2).attr("y1",e(t.median)).attr("x2",n/2).attr("y2",e(t.median)).attr("stroke","black").attr("stroke-width",3),i.append("circle").attr("cx",0).attr("cy",e(t.median)).attr("r",4.5).style("fill","white").attr("stroke","black").attr("stroke-width",2)};function l(e,t,n){o.call(this,e,n),this._data=t}Object.setPrototypeOf(l.prototype,o.prototype),l.prototype.render_plot=function(){o.prototype.render_plot.call(this),this.svg.attr("viewBox","0 0 100 100");const e=2*Math.PI/this._data.length;let t=Math.PI/2;const n=d3.max(this._data),a=d3.scaleLinear().domain([0,n]).range([0,50]),r=this.svg.append("g").attr("transform","translate(50,50)");for(const n of this._data){const o=r.append("g");o.append("line").attr("x1",0).attr("y1",0).attr("x2",50*Math.cos(t)).attr("y2",-50*Math.sin(t)).attr("stroke","#e3e3e3").attr("stroke-width",.6),o.append("line").attr("x1",0).attr("y1",0).attr("x2",a(n)*Math.cos(t)).attr("y2",-a(n)*Math.sin(t)).attr("stroke","black").attr("stroke-width",1),t-=e}r.append("circle").style("fill","black").attr("r",2.5)};const _={caller:null,type:"",equivalents:"",weight_chat_wrapper:null,diameter_chart_wrapper:null,axis_chart_wrapper:null,draw_item:function(e){const n=this,a=new DocumentFragment;if(!0===dedalo_logged){const t=n.dedalo_link(e,"numisdata3");a.appendChild(t)}const o=document.querySelector(".golden-separator");common.create_dom_element({element_type:"span",class_name:"cite_this_record",text_content:tstring.cite_this_record||"cite this record",parent:o}).addEventListener("click",(async function(){const t=(await page.load_main_catalog()).result[0],a=t.publication_data[0];t.autors={authorship_data:e.authorship_data||null,authorship_names:e.authorship_names||null,authorship_surnames:e.authorship_surnames||null,authorship_roles:e.authorship_roles||null},t.catalog=null,t.title="<em>"+n.type+"</em>",t.publication_data=a,t.uri_location=window.location;const o=biblio_row_fields.render_cite_this(t),r=common.create_dom_element({element_type:"div",class_name:"float-cite",parent:document.body});r.addEventListener("mouseup",(function(){r.classList.add("copy"),o.classList.add("copy");const e=window.getSelection(),t=document.createRange();t.selectNodeContents(o),e.removeAllRanges(),e.addRange(t),document.execCommand("copy"),window.getSelection().removeAllRanges()})),common.create_dom_element({element_type:"div",class_name:"float-label",text_content:tstring.cite_this_record||"Cite this record",parent:r});common.create_dom_element({element_type:"div",class_name:"close-buttom",parent:r}).addEventListener("click",(function(){})),document.body.addEventListener("click",(function(e){document.body.removeEventListener("click",(function(e){})),r.remove()})),r.appendChild(o),common.create_dom_element({element_type:"div",class_name:"float-text_copy",text_content:tstring.click_to_copy||"Click to copy",parent:r})})),a.appendChild(n.catalog_hierarchy(e,"catalog_hierarchy")),a.appendChild(n.creators(e,"creators"));const r=common.create_dom_element({element_type:"div",class_name:"identify_coin_wrapper gallery",parent:a});r.appendChild(n.image(e,"ref_coins_image_obverse")),r.appendChild(n.image(e,"ref_coins_image_reverse")),common.create_dom_element({element_type:"div",id:"embedded-gallery",parent:a}),a.appendChild(n.id_line(e,"id_line"));const _=common.create_dom_element({element_type:"div",class_name:"sides_wrapper",parent:a}),c=common.create_dom_element({element_type:"div",class_name:"obverse_wrapper",parent:_});c.appendChild(n.default(e,"design_obverse")),c.appendChild(n.default(e,"symbol_obverse")),e.legend_obverse&&c.appendChild(page.render_legend({value:e.legend_obverse,style:"median legend_obverse_box"})),c.appendChild(n.default(e,"legend_obverse_transcription"));const s=common.create_dom_element({element_type:"div",class_name:"reverse_wrapper",parent:_});if(s.appendChild(n.default(e,"design_reverse")),s.appendChild(n.default(e,"symbol_reverse")),e.legend_reverse&&s.appendChild(page.render_legend({value:e.legend_reverse,style:"median legend_reverse_box"})),s.appendChild(n.default(e,"legend_reverse_transcription")),a.appendChild(n.default(e,"public_info",page.local_to_remote_path)),a.appendChild(n.default(e,"equivalents",(function(e){const t=page.split_data(e,"<br>"),a=[];for(let e=0;e<t.length;e++)a.push(t[e].replace(/ \| /g," "));return n.equivalents=a.join(" | "),n.equivalents}))),e.related_types){e.related_types;const t=e.related_types_data,n=tstring.related_types||"Related types",o=t.length,r=[];for(let e=0;e<o;e++){const n=t[e],a=(n.mint?n.mint:"...")+" "+(n.mint_number?n.mint_number:"..")+"/"+(n.number?n.number:".."),o=!!n.section_id&&n.section_id,i=page_globals.__WEB_ROOT_WEB__+"/type/"+o,l=o?'<a href="'+i+'">'+a+"</a>":a;r.push(l)}common.create_dom_element({element_type:"span",class_name:"info_value related_types",inner_html:n+": "+r.join(" | "),parent:a})}const m=e.bibliography_data;if(a.appendChild(n.draw_bibliographic_reference(m)),a.appendChild(n.default(e,"section_id",(function(e){const t=tstring.permanent_uri||"Permanent URI",n=page_globals.__WEB_ROOT_WEB__+"/type/"+e;return t+': <span class="uri">'+(page_globals.__WEB_BASE_URL__+n)+"</span>"}))),e.uri&&e.uri.length>0)for(let t=0;t<e.uri.length;t++){const o=e.uri[t];a.appendChild(n.default(e,"section_id",(function(e){return(tstring.uri||"URI")+" "+o.label+': <span class="uri"><a href="'+o.value+'" target="_blank">'+o.value+"</a></span>"})))}if(e._coins_group&&e._coins_group.length>0){const t=e._coins_group.filter((e=>"1"!=e.typology_id));if(t.length>0){const o=n.label(e,"coins");a.appendChild(o);const r=n.items_list(e,"items_list",t);o.addEventListener("mouseup",(e=>{e.preventDefault(),r.classList.toggle("hide")})),a.appendChild(r)}}let d=t[0];e.denomination_data&&e.denomination_data.length&&e.denomination_data[0].color&&(d=e.denomination_data[0].color);const p=e.catalog,h=p.full_coins_reference_calculable?p.full_coins_reference_calculable:[],u=p.full_coins_reference_diameter_max?p.full_coins_reference_diameter_max.filter(((e,t)=>e&&h[t])):[],f=p.full_coins_reference_weight.filter(((e,t)=>e&&h[t]))?p.full_coins_reference_weight:[],g=p.full_coins_reference_axis?p.full_coins_reference_axis.filter((e=>e)):[],y=Array(12).fill(0);for(const e of g)y[e%12]++;if(u.length||f.length||g.length){const e=common.create_dom_element({element_type:"div",id:"type_analytics"});if(a.appendChild(e),f.length){const t=common.create_dom_element({element_type:"div",class_name:"type_analytics_component",parent:e}),a=common.create_dom_element({element_type:"div",class_name:"info_line separator",parent:t});common.create_dom_element({element_type:"div",class_name:"big_label",text_content:tstring.weight||"Weight",parent:a});const o=common.create_dom_element({element_type:"div",class_name:"chart_wrapper",parent:t});n.weight_chat_wrapper=new i(o,f,{color:d,whiskers_quantiles:[10,90]}),n.weight_chat_wrapper.render()}if(u.length){const t=common.create_dom_element({element_type:"div",class_name:"type_analytics_component",parent:e}),a=common.create_dom_element({element_type:"div",class_name:"info_line separator",parent:t});common.create_dom_element({element_type:"div",class_name:"big_label",text_content:tstring.diameter||"Diameter",parent:a});const o=common.create_dom_element({element_type:"div",class_name:"chart_wrapper",parent:t});n.diameter_chart_wrapper=new i(o,u,{color:d,whiskers_quantiles:[10,90]}),n.diameter_chart_wrapper.render()}if(g.length){const t=common.create_dom_element({element_type:"div",class_name:"type_analytics_component",parent:e}),a=common.create_dom_element({element_type:"div",class_name:"info_line separator",parent:t});common.create_dom_element({element_type:"div",class_name:"big_label",text_content:tstring.die_position||"Die axis",parent:a});const o=common.create_dom_element({element_type:"div",class_name:"chart_wrapper",parent:t});n.axis_chart_wrapper=new l(o,y,{}),n.axis_chart_wrapper.render()}}if(e.ref_coins_findspots_data&&e.ref_coins_findspots_data.length>0||e.ref_coins_hoard_data&&e.ref_coins_hoard_data.length>0){const t=tstring.findspots+"/"+tstring.hoards+"/"+tstring.mints;a.appendChild(n.label(e,t)),a.appendChild(n.hoards_and_findspots(e,t))}const v=common.create_dom_element({element_type:"div",class_name:"row_wrapper"});return v.appendChild(a),v},dedalo_link:function(e,t){const n=common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",inner_html:e.section_id+" <small>("+t+")</small>",href:"/dedalo/lib/dedalo/main/?t="+t+"&id="+e.section_id});return n.setAttribute("target","_blank"),n},default:function(e,t,n){const a=common.create_dom_element({element_type:"div",class_name:"info_line "+t});if(e[t]&&e[t].length>0){const o=["design_obverse","design_reverse","symbol_reverse","symbol_obverse"],r="function"==typeof n?n(e[t]):page.remove_gaps(e[t]," | ");if(o.includes(t)){const n={$and:[{id:t,q:e[t],op:"="}]},o=psqo_factory.build_safe_psqo(n),i=psqo_factory.encode_psqo(o),l=page_globals.__WEB_ROOT_WEB__+"/catalog/?psqo="+i;common.create_dom_element({element_type:"a",class_name:"info_value underline-text",inner_html:r.trim(),href:l,parent:a})}else common.create_dom_element({element_type:"span",class_name:"info_value",inner_html:r.trim(),parent:a})}return a},label:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line separator "+t});return common.create_dom_element({element_type:"div",class_name:"big_label",text_content:tstring[t]||t,parent:n}),n},catalog_hierarchy:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line inline "+t}),a=e.catalog;if(a&&Object.keys(a).length>0&&a.constructor===Object){const e=a.parents,t=[];for(let n=0;n<e.length&&(t.push(e[n]),"mints"!==e[n].term_table);n++);for(let e=t.length-1;e>=0;e--){if("mints"===t[e].term_table){const a=t[e].term_data?JSON.parse(t[e].term_data)[0]:"";common.create_dom_element({element_type:"a",class_name:"breadcrumb link link_mint",href:page_globals.__WEB_ROOT_WEB__+"/mint/"+a,target:"_blank",text_content:t[e].term,parent:n})}else common.create_dom_element({element_type:"span",class_name:"breadcrumb "+t[e].term_table,text_content:t[e].term,parent:n});common.create_dom_element({element_type:"span",class_name:"breadcrumb_symbol",text_content:" > ",parent:n})}const o=a.ref_mint_number?a.ref_mint_number+"/":"";common.create_dom_element({element_type:"span",class_name:"breadcrumb",text_content:page_globals.OWN_CATALOG_ACRONYM+" "+o+a.term,parent:n})}return n},creators:function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"info_line "+t});if(e.creators_data&&e.creators_data.length>0){const t=JSON.parse(e.creators_data),o=e.creators_names?e.creators_names.split(" | "):[],r=e.creators_surnames?e.creators_surnames.split(" | "):[],i=e.creators_roles?e.creators_roles.split("|"):[],l=[],_=t.length;for(var a=0;a<_;a++){const e=o[a]?o[a]:"",t=r[a]?r[a]:"",n=i[a]?"("+i[a]+")":"",_=(e+" "+t).trim()+" "+n;l.push(_.trim())}common.create_dom_element({element_type:"span",class_name:"creators",text_content:l.join(" | "),parent:n})}return n},image:function(e,t){const n=this,a=common.create_dom_element({element_type:"div",class_name:"info_line inline "+t});if(e[t]&&e[t].length>0){const o=e[t],r=common.create_dom_element({element_type:"a",class_name:"image_link",href:o,parent:a});common.create_dom_element({element_type:"img",class_name:"image",src:o,title:e.number,dataset:{caption:n.type+" | "+n.equivalents},parent:r})}return a},identify_coin:function(e,t){},id_line:function(e,t){const n=this,a=common.create_dom_element({element_type:"div",class_name:"info_line "+t}),o=[];if(e[t="catalogue"]&&e[t].length>0){const a=e.mint_number?e.mint_number+"/":"",r=e[t]+" "+a+e.number;n.type=r;const i=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:r});o.push(i)}if(e[t="denomination"]&&e[t].length>0){const a=e[t],r=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:a});o.push(r),n.create_float_prompt(e,r,"denomination_data")}if(e[t="material"]&&e[t].length>0){const n=page.split_data(e[t]," | ").filter(Boolean).join(", ");var r=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:n});o.push(r)}if(n.create_float_prompt(e,r,"material_data"),t="averages",e.averages_weight&&e.averages_weight.length>0){const n=e.averages_weight?e.averages_weight.replace(".",",")+" g ("+e.total_weight_items+")":"",a=e.averages_diameter?"; "+e.averages_diameter.replace(".",",")+" mm ("+e.total_diameter_items+")":"",r=common.create_dom_element({element_type:"span",class_name:"info_value "+t,text_content:n+a});o.push(r)}const i=o.length;for(let e=0;e<i;e++)e>0&&e<i&&common.create_dom_element({element_type:"span",class_name:"info_value separator",text_content:" | ",parent:a}),a.appendChild(o[e]);return a},items_list:function(e,t,n){const a=this,o=common.create_dom_element({element_type:"div",class_name:"info_line "+t}),r=n.length;for(let t=0;t<r;t++){const r=n[t],i=r.coins?r.coins.length:0;if(i<1)continue;if(1==r.typology_id)continue;const l=r.typology;common.create_dom_element({element_type:"div",class_name:"medium_label",text_content:l+" ("+i+")",parent:o});const _=common.create_dom_element({element_type:"div",class_name:"coins_list typology_coins gallery",parent:o}),c=r.coins,s=c.length;for(let t=0;t<s;t++){const n=c[t],o=e.ref_coins_union.find((e=>e.section_id==n));if(o){const e=a.draw_coin(o);_.appendChild(e)}}}return o},draw_coin:function(e){const t=this;function n(){this.removeEventListener("load",n,!1);const e=this,t=this.hires;setTimeout((function(){e.src=t}),1e3)}const a=common.create_dom_element({element_type:"div",class_name:"sorted_coin"}),o=common.create_dom_element({element_type:"div",class_name:"images_wrapper",parent:a}),r=common.create_dom_element({element_type:"a",class_name:"image_link",href:e.image_obverse,parent:o}),i=common.create_dom_element({element_type:"img",src:e.image_obverse_thumb,title:e.section_id,loading:"lazy",parent:r});i.hires=e.image_obverse,i.addEventListener("load",n,!1);const l=common.create_dom_element({element_type:"a",class_name:"image_link",href:e.image_reverse,parent:o}),_=common.create_dom_element({element_type:"img",src:e.image_reverse_thumb,title:e.section_id,loading:"lazy",parent:l});if(_.hires=e.image_reverse,_.addEventListener("load",n,!1),e.collection&&e.collection.length>0){const t=e.former_collection&&e.former_collection.length>0?e.collection+" ("+e.former_collection+")":e.collection,n=e.number&&e.number.length>0?t+" "+e.number:t;i.setAttribute("data-caption",n),_.setAttribute("data-caption",n),common.create_dom_element({element_type:"div",class_name:"golden-color",inner_html:n,parent:a})}function c(e,t,n,a){if(e.name.length<1)return;let o="";const r=common.create_dom_element({element_type:"div",class_name:"line_full",parent:t});return e.name&&(o+=a+" "+e.name,common.create_dom_element({element_type:"span",class_name:n+" golden-color",inner_html:a+" "+e.name,parent:r})),e.date&&(o+=" "+e.date,common.create_dom_element({element_type:"span",class_name:n+" golden-color",inner_html:" "+e.date,parent:r})),e.number&&(o+=", "+e.number,common.create_dom_element({element_type:"span",class_name:n+" golden-color",inner_html:", "+e.number,parent:r})),e.lot&&(o+=", "+(tstring.lot||"lot")+" "+e.lot,common.create_dom_element({element_type:"span",class_name:n+" golden-color",inner_html:", "+(tstring.lot||"lot")+" "+e.lot,parent:r})),i.setAttribute("data-caption",o),_.setAttribute("data-caption",o),!0}if(e.photographer){const t=i.dataset.caption||"";i.setAttribute("data-caption",t+'<spam> | </spam> <i class="fa fa-camera"></i> '+e.photographer)}if(e.ref_auction_group)for(let t=0;t<e.ref_auction_group.length;t++)e.ref_auction_group[t].lot=e.number,c(e.ref_auction_group[t],a,"identify_coin","");if(e.ref_related_coin_auction_group)for(let t=0;t<e.ref_related_coin_auction_group.length;t++)e.ref_related_coin_auction_group[t].lot=e.number,c(e.ref_related_coin_auction_group[t],a,"identify_coin","= ");const s=[];e.weight&&e.weight.length>0&&s.push(e.weight.replace(".",",")+" g"),e.diameter&&e.diameter.length>0&&s.push(e.diameter.replace(".",",")+" mm"),e.dies&&e.dies.length>0&&s.push(e.dies+" h");const m=s.join("; ");common.create_dom_element({element_type:"div",class_name:"",inner_html:m,parent:a});const d=[];let p="";if(e.hoard){const t=e.hoard_place?e.hoard+" ("+e.hoard_place+")":e.hoard;p=(tstring.hoard||"Hoard")+": ",d.push(t)}if(e.findspot){const t=e.findspot_place?e.findspot+" ("+e.findspot_place+")":e.findspot;p=(tstring.findspot||"Findspot")+": ",d.push(t)}const h=d.join(" | ");if(common.create_dom_element({element_type:"div",class_name:"",inner_html:p+h,parent:a}),e.public_info&&e.public_info.length>0&&common.create_dom_element({element_type:"div",inner_html:e.public_info,parent:a}),e.technique&&e.technique.length>0){const t=(tstring.technique||"Technique")+": ";common.create_dom_element({element_type:"div",inner_html:t+e.technique,parent:a})}const u=common.create_dom_element({element_type:"div",class_name:"countermarks_wrapper",parent:a});e.countermark_obverse&&e.countermark_obverse.length>0&&common.create_dom_element({element_type:"span",class_name:"countermark_obverse",inner_html:e.countermark_obverse,parent:u}),e.countermark_reverse&&e.countermark_reverse.length>0&&common.create_dom_element({element_type:"span",class_name:"countermark_reverse",inner_html:e.countermark_reverse,parent:u});const f=common.create_dom_element({element_type:"div",class_name:"references",parent:a}),g=e.bibliography_data;if(g&&g.length>0&&"object"==typeof g[0]){const e=t.draw_bibliographic_reference(g);e&&f.appendChild(e)}const y=page_globals.__WEB_ROOT_WEB__+"/coin/"+e.section_id;page_globals.__WEB_BASE_URL__;const v='<a class="icon_link" target="_blank" href="'+y+'"> '+page_globals.OWN_CATALOG_ACRONYM+" </a>";if(common.create_dom_element({element_type:"span",class_name:"uri-text",inner_html:v,parent:a}),e.uri&&e.uri.length>0)for(let t=0;t<e.uri.length;t++){const n=e.uri[t];n.label;const o='<a class="icon_link info_value" href="'+n.value+'" target="_blank"> '+n.label+"</a>";common.create_dom_element({element_type:"span",class_name:"",inner_html:o,parent:a})}return a},draw_bibliographic_reference:function(e){const t=new DocumentFragment,n=e,a=n?n.length:0;for(let e=0;e<a;e++){const a=biblio_row_fields.render_row_bibliography(n[e]);common.create_dom_element({element_type:"div",class_name:"bibliographic_reference",parent:t}).appendChild(a)}return t},hoards_and_findspots:function(e,t){SHOW_DEBUG;const n=this,a=common.create_dom_element({element_type:"div",id:"findspots",class_name:"info_line "+t}),o=common.create_dom_element({element_type:"div",class_name:"map_container hide_opacity map",parent:a});function r(e,t){const a=common.create_dom_element({element_type:"div",class_name:"find_coin",parent:t}),o=common.create_dom_element({element_type:"div",class_name:"images_wrapper",parent:a}),r=common.create_dom_element({element_type:"a",class_name:"image_link",href:e.image_obverse,parent:o});common.create_dom_element({element_type:"img",src:e.image_obverse,title:e.section_id,dataset:{caption:n.type+" | "+n.equivalents},parent:r}).loading="lazy";const i=common.create_dom_element({element_type:"a",class_name:"image_link",href:e.image_reverse,parent:o});common.create_dom_element({element_type:"img",src:e.image_reverse,title:e.section_id,dataset:{caption:n.type+" | "+n.equivalents},parent:i}).loading="lazy";const l=common.create_dom_element({element_type:"div",class_name:"info_wrapper",parent:a});common.create_dom_element({element_type:"div",class_name:"",inner_html:e.collection,parent:l});const _=[];e.weight&&e.weight.length>0&&_.push(e.weight.replace(".",",")+" g"),e.diameter&&e.diameter.length>0&&_.push(e.diameter.replace(".",",")+" mm"),e.dies&&e.dies.length>0&&_.push(e.dies+" h");const c=_.join("; ");common.create_dom_element({element_type:"div",class_name:"",inner_html:c,parent:l});const s=page_globals.__WEB_ROOT_WEB__+"/coin/"+e.section_id;page_globals.__WEB_BASE_URL__;const m='<a class="icon_link" target="_blank" href="'+s+'"> '+page_globals.OWN_CATALOG_ACRONYM+" </a>";if(common.create_dom_element({element_type:"span",class_name:"",inner_html:m,parent:l}),e.uri&&e.uri.length>0)for(let t=0;t<e.uri.length;t++){const n=e.uri[t];n.label;const a='<a class="icon_link info_value" href="'+n.value+'" target="_blank"> '+n.label+"</a>";common.create_dom_element({element_type:"span",class_name:"",inner_html:a,parent:l})}common.create_dom_element({element_type:"div",class_name:"",inner_html:e.hoard,parent:l});const d=common.create_dom_element({element_type:"div",class_name:"references",parent:l}),p=e.bibliography_data;d.appendChild(n.draw_bibliographic_reference(p))}const i=[],l=[],_=[],c=e.ref_coins_hoard_data,s=c.length;if(s){const u=n.label(e,tstring.hoards);a.appendChild(u);const f=common.create_dom_element({element_type:"div",class_name:"hoard_container",parent:a});u.addEventListener("mouseup",(e=>{e.preventDefault(),f.classList.toggle("hide")}));for(let g=0;g<s;g++){const y=c[g],v=JSON.parse(y.coins)||[],b=v.length;if(b<1){console.warn("! Skipped hoard without zero coins :",c);continue}if(_.find((e=>e==y.section_id)))continue;const w=common.create_dom_element({element_type:"div",class_name:"find_wrapper hoard",parent:f});common.create_dom_element({element_type:"span",inner_html:" "+(y.name||"")+" ("+(y.place||"")+") ",parent:w});const x=common.create_dom_element({element_type:"span",text_content:" | ",parent:w}),k=common.create_dom_element({element_type:"div",class_name:"find_coins hoard gallery",parent:f}),C=[];for(let L=0;L<b;L++){const E=v[L],O=e.coin_references.find((e=>e.section_id==E));O&&(r(O,k),C.push(E))}x.innerHTML=x.innerHTML+C.length+" "+(tstring.of||"of")+" "+b+" "+(tstring.coins||"coins");const q=JSON.parse(y.map);q&&i.push({section_id:y.section_id,name:y.name,place:y.place,georef:y.georef,data:q,items:C.length,total_items:b,type:"hoard",marker_icon:page.maps_config.markers.hoard}),_.push(y.section_id)}}const m=e.ref_coins_findspots_data,d=m.length;if(d){const B=n.label(e,tstring.findspots);a.appendChild(B);const M=common.create_dom_element({element_type:"div",class_name:"findspots_container",parent:a});B.addEventListener("mouseup",(e=>{e.preventDefault(),M.classList.toggle("hide")}));for(let R=0;R<d;R++){const A=m[R],S=JSON.parse(A.coins)||[],W=S.length;if(W<1){console.warn("! Skipped findspot without zero coins :",m);continue}if(l.find((e=>e==A.section_id)))continue;const N=common.create_dom_element({element_type:"div",class_name:"find_wrapper findspot",parent:M});common.create_dom_element({element_type:"span",inner_html:" "+(A.name||"")+" ("+(A.place||"")+") ",parent:N});const T=common.create_dom_element({element_type:"span",text_content:" | ",parent:N}),$=common.create_dom_element({element_type:"div",class_name:"find_coins findspot gallery",parent:M}),j=[];for(let D=0;D<W;D++){const I=S[D],U=e.coin_references.find((e=>e.section_id==I));U&&(r(U,$),j.push(I))}const z=JSON.parse(A.map);z&&i.push({section_id:A.section_id,name:A.name,place:A.place,georef:A.georef,data:z,items:j.length,total_items:W,type:"findspot",marker_icon:page.maps_config.markers.findspot}),T.innerHTML=T.innerHTML+j.length+" "+(tstring.of||"of")+" "+W+" "+(tstring.coins||"coins"),l.push(A.section_id)}}const p=e.mint_data||[],h=p.length;if(h>0)for(let J=0;J<h;J++){const Y=p[J],H=JSON.parse(Y.relations_coins)||[],P=H.length,F=[];for(let G=0;G<P;G++){const Q=H[G];e.coin_references.find((e=>e.section_id==Q))&&F.push(Q)}const X=JSON.parse(Y.map);X&&i.push({section_id:Y.section_id,name:Y.name,place:Y.place,georef:Y.georef,data:X,items:F.length,total_items:P,type:"mint",marker_icon:page.maps_config.markers.mint})}if(i.length>0){function K(){n.caller.draw_map({container:o,map_position:null,map_data:i})}common.when_in_dom(o,K)}else o.remove();return a},mint:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line mint"});if(e.mint&&e.mint.length>0){common.create_dom_element({element_type:"label",class_name:"",text_content:tstring.mint||"Mint",parent:t});const e=row_object.mint;common.create_dom_element({element_type:"span",class_name:"info_value",text_content:e,parent:t})}return t},authors_alt:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line authors_alt"});if(e.authors_alt&&e.authors_alt.length>0){const n=" ("+(e.authors_alt||"")+"). ";common.create_dom_element({element_type:"div",class_name:"info_value authors_alt",text_content:n,parent:t})}return t},publication_date:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line publication_date"});if(e.publication_date){const n=e.publication_date.split("-");let a=parseInt(n[0]);n[1],parseInt(n[1])>0&&(a=a+"-"+parseInt(n[1])),n[2],parseInt(n[2])>0&&(a=a+"-"+parseInt(n[2])),a=" ("+a+"). ",common.create_dom_element({element_type:"div",class_name:"info_value",text_content:a,parent:t}),t.classList.remove("hide")}return t},title:function(e){const t=this.get_typology(e),n=e.title||"",a="1"==t||"20"==t||"28"==t||"30"==t||"32"==t?" italic":"",o=common.create_dom_element({element_type:"div",class_name:"info_line title"}),r=" "+n+". ";return common.create_dom_element({element_type:"div",class_name:""+a,text_content:r,parent:o}),o},editor:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line editor"});if(e.editor&&e.editor.length>0){const n=" "+(tstring.en||"En")+" "+e.editor+", ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},title_secondary:function(e){const t=e.title_secondary||"",n=common.create_dom_element({element_type:"div",class_name:"info_line row_title"});if(t.length>0){const e=" "+t+" ";common.create_dom_element({element_type:"div",class_name:"title_secondary italic",text_content:e,parent:n})}return n},magazine:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line magazine"});if(e.magazine&&e.magazine.length>0){const n=" "+e.magazine+", ";common.create_dom_element({element_type:"div",class_name:"info_value italic",text_content:n,parent:t})}return t},serie:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line serie"});if(e.serie&&e.serie.length>0){const n=!e.copy||e.copy.length<1?" "+e.serie+", ":" "+e.serie;common.create_dom_element({element_type:"div",class_name:"info_value italic",text_content:n,parent:t})}return t},copy:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line copy"});if(e.copy&&e.copy.length>0){const n=" ("+e.copy+"), ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},physical_description:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line physical_description"});if(e.physical_description&&e.physical_description.length>0){const n=" "+e.physical_description+". ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},editorial:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line editorial"});if(e.editorial&&e.editorial.length>0){const n=" "+e.editorial+". ";common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t})}return t},url:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line url"}),n=e.url_data;if(n&&n.length>0){const e=JSON.parse(n),a=e.length;for(let n=0;n<a;n++){const o=e[n],r=o.title&&o.title.length>1?o.title:o.iri;common.create_dom_element({element_type:"a",class_name:"url_data",title:r,text_content:r,href:o.iri,parent:t}).setAttribute("target","_blank"),!(n%2)&&n<a&&a>1&&common.create_dom_element({element_type:"span",class_name:"separator",text_content:" | ",parent:t})}}return t},place:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line place"});return e.place&&e.place.length>0&&common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e.place,parent:t}),t},descriptors:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line descriptors"});return e.descriptors&&e.descriptors.length>0&&common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e.descriptors,parent:t}),t},typology_name:function(e){const t=common.create_dom_element({element_type:"div",class_name:"info_line typology_name"});return e.typology_name&&e.typology_name.length>0&&common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e.typology_name,parent:t}),t},create_float_prompt:function(e,t,n){if(e[n]&&e[n].length>0){t.classList.add("active-pointer"),t.classList.add("underline-text");const a=document.getElementById("main"),o=common.create_dom_element({element_type:"div",class_name:"float-prompt hide",parent:a}),r="material_data"===n?e.material:e[n][0].term,i=[{$and:[{field:e[n][0].table,value:r,op:"="}]}],l=psqo_factory.encode_psqo(i),_=page_globals.__WEB_ROOT_WEB__+"/catalog/?psqo="+l;common.create_dom_element({element_type:"a",class_name:"prompt-label underline-text",inner_html:e[n][0].term,href:_,parent:o});const c=common.create_dom_element({element_type:"div",class_name:"close-buttom",parent:o});if(e[n][0].definition&&common.create_dom_element({element_type:"p",class_name:"prompt-description",inner_html:e[n][0].definition,parent:o}),e[n][0].iri.length>0){const t=page.split_data(e[n][0].iri," | ");for(let e=0;e<t.length;e++)common.create_dom_element({element_type:"a",class_name:"image_link underline-text",target:"_blank",href:t[e],inner_html:t[e],parent:o})}t.addEventListener("click",(function(e){const t=document.getElementsByClassName("float-prompt");for(let e=0;e<t.length;e++)t[e].classList.contains("hide")||t[e].classList.add("hide");o.style.left=e.clientX+"px",o.style.top=e.clientY+"px",o.classList.remove("hide")})),c.addEventListener("click",(function(){o.classList.add("hide")}))}}};return e.type_row_fields=_,e}({});
//# sourceMappingURL=type_row_fields-min.js.map