var image_gallery={galleryListener:null,preButton:null,nextButton:null,popup:null,img1:null,img2:null,caption:null,galleryLength:null,currentIndex:0,setup:{galleryPrimId:"popup-container",galleryNode:null,containerId:null},set_up:function(t){const e=this;e.setup={...e.setup,...t},e.galleryListener=function(t){"IMG"==t.target.tagName&&(t.preventDefault(),t.stopPropagation(),e.OpenGallery(t))},e.setup.galleryNode.addEventListener("click",e.galleryListener)},set_up_embedded:function(t){const e=this;e.setup={...e.setup,...t};let i=e.setup.galleryNode;this.currentIndex=0;const n=e.ParseGallery(i);this.popup=document.createRange().createContextualFragment('<div id="'+e.setup.galleryPrimId+'"><div id="gallery-wrapper"><div class="nav-button" id="pre-button"></div><div id="images-wrapper"><img id="img1" src=""><img id="img2" src=""></div><div class="nav-button" id="next-button"></div></div></div>'),this.img1=this.popup.getElementById("img1"),this.img2=this.popup.getElementById("img2"),this.img1.src=n[0][0].attributes.href.value,this.img2.src=n[0][1].attributes.href.value,this.caption="",this.preButton=this.popup.getElementById("pre-button"),this.nextButton=this.popup.getElementById("next-button"),this.preButton.addEventListener("click",(function(){e.SwitchPic(n,-1)})),this.nextButton.addEventListener("click",(function(){e.SwitchPic(n,1)})),this.galleryLength=n.length,2==this.galleryLength&&(this.galleryLength=1),this.CheckNavButtons(),document.getElementById(e.setup.containerId).appendChild(this.popup)},OpenGallery:function(t){const e=this;galleryNode=e.setup.galleryNode;const i=t.target.attributes.title.textContent;let n=galleryNode.getElementsByTagName("a");const s=e.ParseGallery(n);for(let t=0;t<s.length;t++)if(s[t][0].children[0].attributes.title.textContent==i){this.currentIndex=t;break}this.popup=document.createRange().createContextualFragment('<div id="'+e.setup.galleryPrimId+'"><div id="gallery-wrapper"><div id="images-wrapper"><img id="img1" src=""><img id="img2" src=""></div><div id="caption-wrapper"><p></p></div><div class="nav-button" id="pre-button"></div><div class="nav-button" id="next-button"></div></div></div>'),this.img1=this.popup.getElementById("img1"),this.img2=this.popup.getElementById("img2"),this.img1.src=s[this.currentIndex][0].attributes.href.value,this.img2.src=s[this.currentIndex][1].attributes.href.value,this.caption=this.popup.getElementById("caption-wrapper").getElementsByTagName("p")[0],this.caption.innerHTML=s[this.currentIndex][0].children[0].dataset.caption,this.preButton=this.popup.getElementById("pre-button"),this.nextButton=this.popup.getElementById("next-button"),this.preButton.addEventListener("click",(function(){e.SwitchPic(s,-1)})),this.nextButton.addEventListener("click",(function(){e.SwitchPic(s,1)})),this.galleryLength=s.length,this.CheckNavButtons(),document.getElementsByTagName("body")[0].appendChild(this.popup),document.getElementById(e.setup.galleryPrimId).addEventListener("click",this.CloseGallery)},ParseGallery:function(t){let e=[].slice.call(t);e=e.filter((t=>t.children.length>0)),e=e.filter((t=>t.children[0].title.length>0));let i=[];for(let t=0;t<e.length;t++){const n=e[t].children[0].attributes.title.textContent,s=e.filter((t=>t.children[0].attributes.title.textContent==n));if(i.length>0){null==i.find((t=>t[0].children[0].attributes.title.textContent==n))&&i.push(s)}else i.push(s)}return i},CloseGallery:function(t){t.target.classList.contains("nav-button")?t.stopPropagation():document.getElementById("popup-container").remove()},CheckNavButtons:function(){1==this.galleryLength?(this.preButton.classList.add("hidden"),this.nextButton.classList.add("hidden")):0==this.currentIndex?(this.preButton.classList.add("hidden"),this.nextButton.classList.remove("hidden")):this.galleryLength-1==this.currentIndex?(this.preButton.classList.remove("hidden"),this.nextButton.classList.add("hidden")):(this.preButton.classList.remove("hidden"),this.nextButton.classList.remove("hidden"))},SwitchPic:function(t,e){this.currentIndex+=e;let i=t[this.currentIndex];this.img1.src=i[0].attributes.href.value,this.img2.src=i[1].attributes.href.value,i[0].children[0].dataset.caption?this.caption.innerHTML=i[0].children[0].dataset.caption:this.caption.innerHTML="",this.CheckNavButtons()},removeGallery:function(){this.setup.galleryNode.removeEventListener("click",this.galleryListener)}};