"use strict";var page={trigger_url:page_globals.__WEB_ROOT_WEB__+"/web/trigger.web.php",setup:function e(){var t=this;return window.ready(function(){t.hilite_lang(page_globals.WEB_CURRENT_LANG_CODE)}),!0},hilite_lang:function e(t){var n=document.getElementById("page_lang_selector");if(n)for(var i=n.querySelectorAll("a"),o=0;o<i.length;o++)-1!==i[o].href.indexOf(t)&&i[o].classList.add("selected");return!0},load_more_items:function e(i){var o=JSON.parse(i.dataset.template_map),a=document.getElementById(i.dataset.target),_=document.createElement("div");_.classList.add("spinner_list"),a.appendChild(_);var t={mode:"load_more_items",template_map:o},n;return common.get_json_data(this.trigger_url,t,!0).then(function(e){if(console.log("[page.load_more_items] response",e),null===e)console.log("[page.load_more_items] Error. Null response");else{var t=document.createElement("div");t.innerHTML=e.html;for(var n=t.children;0<n.length;)a.appendChild(n[0]);o.offset=o.offset+o.max_records,i.dataset.template_map=JSON.stringify(o),o.offset>=o.total_records&&(i.style.display="none")}_.remove()})},adjust_image_size:function e(i){i.style.opacity=0;var t=document.createElement("img");return t.src=i.style.backgroundImage.replace(/"/g,"").replace(/url\(|\)$/gi,""),t.addEventListener("load",function(e){var t,n;this.width<this.height&&i.classList.add("vertical"),i.style.opacity=1},!1),!0},build_documents_list:function e(r,d,c){var t;return new Promise(function(e,t){for(var n=common.create_dom_element({element_type:"ul",id:"documentos_container",parent:d}),i=r.length,o=0;o<i;o++){var a=r[o];switch(a.type){case"fragment":var _=page.draw_fragment({section_id:a.section_id,tag_id:a.tag_id,interview_section_id:a.interview_section_id,caso_section_id:a.caso_section_id,term_section_id:a.term_section_id,image:common.get_posterframe_from_video(a.video_url),video_url:a.video_url,title:a.title||"",link:c},n);break;case"document":default:page.draw_document({section_id:a.section_id,title:a.title,fecha:a.dating,image:a.image,evento_section_id:a.evento_section_id,link:!0},n)}}e(n)})},build_fragments_list:function e(c,s,l){var t;return new Promise(function(e,t){for(var n=common.create_dom_element({element_type:"ul",id:"fragments_container",parent:s}),i=[],o=c.length,a=0;a<o;a++){var _=c[a],r=common.get_posterframe_from_video(_.video_url),d=page.draw_fragment({section_id:_.section_id,tag_id:_.tag_id,interview_section_id:_.interview_section_id,caso_section_id:_.caso_section_id,evento_section_id:_.evento_section_id,term_section_id:_.term_section_id,image:r,video_url:_.video_url,link:l,title:"",key:a},n);i.push(d)}e(i)})},draw_fragment:function e(t,n){var i=this,o=t.section_id,a=t.image,_=t.title,r=t.video_url,d=t.tag_id,c=t.interview_section_id,s=t.term_section_id,l=t.caso_section_id,m=t.evento_section_id,g=t.link||!1,u=t.key,p=common.create_dom_element({element_type:"li",parent:n,class_name:"",data_set:{section_id:o,tag_id:d,video:r}}),f;return g&&p.addEventListener("click",function(){window.location.href=page_globals.__WEB_ROOT_WEB__+"/testimonio/"+o+"."+d+"."+l+"."+c+"."+s+"."+m},!1),common.create_dom_element({element_type:"div",parent:p,text_node:u+1,class_name:"fragment_image"}).style.backgroundImage="url("+a+")",p},draw_document:function e(t,n){var i=this,o=t.section_id,a=t.title,_=common.timestamp_to_fecha(t.fecha),r=t.image,d=t.evento_section_id,c=t.link||!1,s=common.create_dom_element({element_type:"li",parent:n,class_name:"",data_set:{section_id:o}});c&&s.addEventListener("click",function(){window.location.href=page_globals.__WEB_ROOT_WEB__+"/documento/"+d+"."+o},!1);var l=common.create_dom_element({element_type:"div",parent:s,class_name:"document_title",text_content:a}),m=common.create_dom_element({element_type:"div",parent:l,class_name:"document_date",text_content:_}),g;return common.create_dom_element({element_type:"div",parent:s,class_name:"document_image"}).style.backgroundImage="url("+r+")",s},convert_draw_data:function e(t){console.log("draw_data:",t)},adjust_footer_position:function e(){var t=!1,n=document.getElementById("wrapper");if(!n)return console.log("top_container not found !"),!1;var i=n.offsetHeight,o;window.innerHeight<i&&(t=!0),!0===SHOW_DEBUG&&console.log("scrollbar:",t);var a=document.getElementById("footer");return!1===t?a.classList.add("fixed"):a.classList.remove("fixed"),t}};page.setup();
//# sourceMappingURL=page-min.js.map