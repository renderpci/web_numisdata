"use strict";var main_home={form:null,form_container:null,set_up:function(e){const n=this;return n.form_container=e.form_container,n.form=new form_factory,n.form_node=n.render_form(),n.form_container.appendChild(n.form_node),!0},render_form:function(){const e=this,n=new DocumentFragment,o=common.create_dom_element({element_type:"div",class_name:"form-row fields",parent:n}),t=(e.form.item_factory({id:"global_search",name:"global_search",label:tstring.global_search||"global_search",q_column:"global_search",eq:"MATCH",eq_in:"",eq_out:"",class_name:"global_search",parent:o,callback:function(n){const o=n.node_input;let t;common.create_dom_element({element_type:"div",class_name:"search_operators_info",parent:o.parentNode}).addEventListener("click",(function(n){if(n.stopPropagation(),t)return t.remove(),void(t=null);t=e.form.full_text_search_operators_info(),o.parentNode.appendChild(t)})),window.addEventListener("click",(function(e){t&&!o.contains(e.target)&&(t.remove(),t=null)}))}}),common.create_dom_element({element_type:"div",class_name:"form-group field button_submit",parent:n}));common.create_dom_element({element_type:"input",type:"submit",id:"submit",value:tstring.search||"Search",class_name:"btn btn-light btn-block primary",parent:t}).addEventListener("click",(function(n){n.preventDefault(),e.form_submit()}));const r=common.create_dom_element({element_type:"form",id:"search_form",class_name:"form-inline"});return r.appendChild(n),r},form_submit:function(){const e=this.form_node;return new Promise(e?function(e){const n=document.getElementById("global_search");if(n){const o=n.value;o.leng<2&&e(!1);const t={$and:[{id:"global_search",field:"global_search",q:o,op:"="}]},r=psqo_factory.build_safe_psqo(t),a=psqo_factory.encode_psqo(r);window.location.href="./catalog/?psqo="+a,e(!0)}else e(!1)}:function(n){console.error("Error on submit. Invalid form_node.",e),n(!1)})}};