"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function e(t){return typeof t}:function e(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}var common={get_json_data:function e(t,r,o){var a=t+"?d="+Date.now(),i=JSON.stringify(r),n=-1!=navigator.userAgent.indexOf("MSIE"),l=/rv:11.0/i.test(navigator.userAgent);if(n||l){var s=tstring.incompatible_browser||"Warning: Internet explorer is not supported. Please use a modern browser like Chrome, Firefox, Safari, Opera, Edje..";return alert(s),!1}return void 0===o&&(o=!0),new Promise(function(t,r){var n=new XMLHttpRequest;n.open("POST",a,o),n.setRequestHeader("Content-type","application/json"),n.responseType="json",n.onload=function(e){200===n.status?t(n.response):r(Error("Reject error. Data don't load. error code: "+n.statusText+" - url: "+a))},n.onerror=function(e){r(Error("There was a network error. data_send: "+a+"?"+i+"statusText: "+n.statusText))},n.send(i)})},create_dom_element:function e(t){var r=t.element_type,n=t.parent,o=t.class_name,a=t.style,i=t.data_set;void 0===i&&void 0!==t.dataset&&(i=t.dataset);var l=t.custom_function_events,s=t.title_label,d=t.text_node,c=t.text_content,u=t.inner_html,m=t.href,p=t.id,_=t.draggable,f=t.value,v=t.download,g=t.src,y=t.type,h=document.createElement(r);if(p&&(h.id=p),"a"===r&&(h.href=m||"javascript:;"),o&&(h.className=o),a)for(b in a)h.style[b]=a[b];if(s&&(h.title=s),i)for(var b in i)h.dataset[b]=i[b];if(f&&(h.value=f),y&&h.setAttribute("type",y),l)for(var w=l.length,E=0;E<w;E++){var S=l[E].name,C=l[E].type,x=l[E].function_arguments;this.create_custom_events(h,C,S,x)}if(d)if("span"===r)h.textContent=d;else{var T=document.createElement("span");T.innerHTML=" "+d,h.appendChild(T)}else c?h.textContent=c:u&&(h.innerHTML=u);return n&&n.appendChild(h),_&&(h.draggable=_),v&&h.setAttribute("download",v),g&&(h.src=g),h},build_player:function e(t){!0===SHOW_DEBUG&&console.log("[common.build_player] options",t);var r=this,n=t.type||["video/mp4"],o=t.src||[""];Array.isArray(o)||(o=[o]);var a=document.createElement("video");a.id=t.id||"video_player",a.controls=t.controls||!0,a.poster=t.poster||"",a.className=t.class||"video-js video_hidden",a.preload=t.preload||"auto",a.dataset.setup="{}",t.height&&(a.height=t.height),t.width&&(a.width=t.width);for(var i=0;i<o.length;i++){var l=document.createElement("source");l.src=o[i],l.type=n[i],a.appendChild(l)}var s=o[0],d=parseInt(r.get_query_variable(s,"vbegin")),c=t.ar_subtitles||null;if(c)for(var i=0;i<c.length;i++){var u=c[i],m=document.createElement("track");m.kind="subtitles",m.src=u.src,m.srclang=u.srclang,m.label=u.label,u.srclang===t.default&&(m.default=!0),a.appendChild(m)}var p=document.createElement("p");p.className="vjs-no-js";var _=document.createTextNode("To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video"),f;return p.appendChild(_),a.appendChild(p),setTimeout(function(){window.ready(function(e){(f=videojs(a)).ready(function(){this.addClass("video_show"),void 0!==t.ar_restricted_fragments&&0<t.ar_restricted_fragments.length&&this.on("timeupdate",function(e){r.skip_restricted(this,t.ar_restricted_fragments,d)})}),!0===t.play&&f.play()})},1),a},skip_restricted:function e(t,r,n){var o=parseInt(t.currentTime()),a=o+parseInt(n);SHOW_DEBUG;for(var i=r.length,l=0;l<i;l++){var s=r[l],d=s.tcin_secs,c=s.tcout_secs;if(d<a&&a<c){var u=c-n;t.currentTime(u),!0===SHOW_DEBUG&&(console.log("+++ Jumped to end time :",a,c),console.log("item:",s,"tcin_secs",n,"player_current_time",o,"time_to_jump_secs",u))}}return!0},timestamp_to_fecha:function e(t){if(!t||t.length<4)return null;if(10===t.length)var r=t.substring(0,4),n=t.substring(5,7),o,a=(o=t.substring(8,10))+"-"+n+"-"+r;else var i=function e(t){return t<10?"0"+t:t},l=new Date(t),r=l.getFullYear(),n=l.getMonth(),o,a=i(o=l.getDate())+"-"+i(n+1)+"-"+r;return a},local_to_remote_path:function e(t){if(!t)return null;var r=page_globals.WEB_ENTITY;return t=(t=t.replace("/dedalo4/","/dedalo/")).replace("/media_test/media_"+r,"/media"),t=page_globals.__WEB_BASE_URL__+t},get_posterframe_from_video:function e(t){var r=t,n=(r=(r=r.replace(/\/404\//g,"/posterframe/")).replace(/\.mp4/g,".jpg")).split("?");return void 0!==n[0]&&(r=n[0]),r},open_note:function e(t,r){for(var n=r.length-1;0<=n;n--){var o=r[n];if(t.dataset.tag_id===o.id)return $.colorbox({html:o.label,transition:"none"}),!0}return!1},set_background_color:function e(t,r){t.setAttribute("crossOrigin","");var n,o=(new BackgroundColorTheif).getBackGroundColor(t);return r.style.backgroundColor="rgb("+o[0]+","+o[1]+","+o[2]+")",o},build_slider:function e(f){var v=f.container,t;return new Promise(function(e){for(var t=common.create_dom_element({element_type:"ul",class_name:"slides",parent:v}),r=f.ar_elements.length,n=0;n<r;n++){var o=f.ar_elements[n],a=o.image,i=o.title||null,l=o.text||null;if(!(a.length<4)){var s=common.create_dom_element({element_type:"li",class_name:"row_image",parent:t}),d;common.create_dom_element({element_type:"div",class_name:"image_bg",parent:s}).style.backgroundImage="url("+a+")";var c=common.create_dom_element({element_type:"div",class_name:"image_text",parent:s}),u=common.create_dom_element({element_type:"h1",text_content:i,parent:c}),m=common.create_dom_element({element_type:"a",parent:u}),p=common.create_dom_element({element_type:"span",text_content:l,parent:c});if(0===n){var _=new Image;_.addEventListener("load",function(){e(t)},!1),_.src=a}}}})},get_scrollbar_width:function e(){var t=document.createElement("div");t.style.visibility="hidden",t.style.width="100px",t.style.msOverflowStyle="scrollbar",document.body.appendChild(t);var r=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var o=n.offsetWidth;return t.parentNode.removeChild(t),r-o},has_scrollbar:function e(){var t;if("number"==typeof window.innerWidth)return window.innerWidth>=document.documentElement.clientWidth;var r=document.documentElement||document.body,n,o;void 0!==r.currentStyle&&(n=r.currentStyle.overflow),n=n||window.getComputedStyle(r,"").overflow,void 0!==r.currentStyle&&(o=r.currentStyle.overflowY),o=o||window.getComputedStyle(r,"").overflowY;var a=r.scrollHeight>r.clientHeight,i=/^(visible|auto)$/.test(n)||/^(visible|auto)$/.test(o),l,s;return a&&i||("scroll"===n||"scroll"===o)},clone_deep:function e(t){var r=this,n,o;if("object"!==_typeof(t))return t;if(!t)return t;if("[object Array]"===Object.prototype.toString.apply(t)){for(n=[],o=0;o<t.length;o+=1)n[o]=r.clone_deep(t[o]);return n}for(o in n={},t)t.hasOwnProperty(o)&&(n[o]=r.clone_deep(t[o]));return n},get_query_variable:function e(t,r){for(var n,o=t.split("?")[1].split("&"),a=0;a<o.length;a++){var i=o[a].split("=");if(i[0]==r)return i[1]}return!1}};function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}!function(){var e;(function e(t,r,n){n=n||window;var o=!1,a=function e(){o||(o=!0,requestAnimationFrame(function(){n.dispatchEvent(new CustomEvent(r)),o=!1}))};n.addEventListener(t,a)})("resize","optimizedResize")}();
//# sourceMappingURL=common-min.js.map