"use strict";var common={get_json_data:function(e,t,n){const o=e+"?d="+Date.now(),r=JSON.stringify(t);var a=-1!=navigator.userAgent.indexOf("MSIE"),i=/rv:11.0/i.test(navigator.userAgent);if(a||i){var l=tstring.incompatible_browser||"Warning: Internet explorer is not supported. Please use a modern browser like Chrome, Firefox, Safari, Opera, Edje..";return alert(l),!1}return void 0===n&&(n=!0),new Promise((function(e,t){var a=new XMLHttpRequest;a.open("POST",o,n),a.setRequestHeader("Content-type","application/json"),a.responseType="json",a.onload=function(n){200===a.status?e(a.response):t(Error("Reject error. Data don't load. error code: "+a.statusText+" - url: "+o))},a.onerror=function(e){t(Error("There was a network error. data_send: "+o+"?"+r+"statusText: "+a.statusText))},a.send(r)}))},create_dom_element:function(e){const t=e.element_type,n=e.parent,o=e.class_name,r=e.style,a=e.data_set||e.dataset,i=e.custom_function_events,l=e.title_label||e.title,s=e.text_node,_=e.text_content,c=e.inner_html,p=e.href,m=e.id,u=e.draggable,d=e.value,f=e.download,g=e.src,h=e.placeholder,v=e.type,b=e.target,y=document.createElement(t);if(m&&(y.id=m),"a"===t&&(y.href=p||"javascript:;",b&&(y.target=b)),o&&(y.className=o),r)for(w in r)y.style[w]=r[w];if(l&&(y.title=l),a)for(var w in a)y.dataset[w]=a[w];if(d&&(y.value=d),v&&y.setAttribute("type",v),i){const e=i.length;for(let t=0;t<e;t++){const e=i[t].name,n=i[t].type,o=i[t].function_arguments;this.create_custom_events(y,n,e,o)}}if(s)if("span"===t)y.textContent=s;else{const e=document.createElement("span");e.insertAdjacentHTML("afterbegin"," "+s),y.appendChild(e)}else _?y.textContent=_:c&&y.insertAdjacentHTML("afterbegin",c);return n&&n.appendChild(y),u&&(y.draggable=u),f&&y.setAttribute("download",f),g&&(y.src=g),h&&(y.placeholder=h),y},build_player:function(e){!0===SHOW_DEBUG&&console.log("[common.build_player] options",e);const t=this;var n=e.type||["video/mp4"],o=e.src||[""];Array.isArray(o)||(o=[o]);const r=document.createElement("video");r.id=e.id||"video_player",r.controls=e.controls||!0,r.poster=e.poster||common.get_posterframe_from_video(o),r.className=e.class||"video-js video_hidden hide",r.preload=e.preload||"auto",r.dataset.setup="{}",e.height&&(r.height=e.height),e.width&&(r.width=e.width);for(let e=0;e<o.length;e++){const t=document.createElement("source");t.src=o[e],t.type=n[e],r.appendChild(t)}const a=e.ar_subtitles||null;if(a)for(let t=0;t<a.length;t++){const n=a[t],o=document.createElement("track");o.kind="subtitles",o.src=n.src,o.srclang=n.srclang,o.label=n.label,n.srclang===e.default&&(o.default=!0),r.appendChild(o)}const i=document.createElement("p");i.className="vjs-no-js";const l=document.createTextNode("To view this video please enable JavaScript, and consider upgrading to a web browser that supports HTML5 video");return i.appendChild(l),r.appendChild(i),setTimeout((function(){window.ready((function(n){const a=videojs(r);a.ready((function(){if(this.addClass("video_show"),this.removeClass("hide"),void 0!==e.ar_restricted_fragments&&e.ar_restricted_fragments.length>0){const n=o[0],r=parseInt(t.get_query_variable(n,"vbegin"));this.on("timeupdate",(function(n){t.skip_restricted(this,e.ar_restricted_fragments,r)}))}})),!0===e.play&&a.play()}))}),1),r},skip_restricted:function(e,t,n){const o=parseInt(e.currentTime()),r=o+parseInt(n);SHOW_DEBUG;const a=t.length;for(let i=0;i<a;i++){const a=t[i],l=a.tcin_secs,s=a.tcout_secs;if(r>l&&r<s){const t=s-n;e.currentTime(t),!0===SHOW_DEBUG&&(console.log("+++ Jumped to end time :",r,s),console.log("item:",a,"tcin_secs",n,"player_current_time",o,"time_to_jump_secs",t))}}return!0},timestamp_to_fecha:function(e){if(!e||e.length<4)return null;if(10===e.length){var t=e.substring(0,4),n=e.substring(5,7);const a=[];(r=e.substring(8,10))&&"00"!=r&&a.push(r),n&&"00"!=n&&a.push(n),t&&"00"!=t&&a.push(t);var o=a.join("-")}else{var r,a=new Date(e);t=a.getFullYear(),n=a.getMonth();function i(e){return e<10?"0"+e:e}o=i(r=a.getDate())+"-"+i(n+1)+"-"+t}return o},local_to_remote_path:function(e){if(!e)return null;if(-1===e.indexOf("http://")&&-1===e.indexOf("https://")){const t=page_globals.WEB_ENTITY;"/"!==(e=(e=e.replace("/dedalo4/","/dedalo/")).replace("/media_test/media_"+t,"/media")).charAt(0)&&(e="/"+e),e=page_globals.__WEB_MEDIA_BASE_URL__+e}return e},get_posterframe_from_video:function(e){var t=e,n=(t=(t=t.replace(/\/404\//g,"/posterframe/")).replace(/\.mp4/g,".jpg")).split("?");return void 0!==n[0]&&(t=n[0]),t},get_media_engine_url:function(e,t,n,o){const r=o?e:/^.{3,}_.{3,}_(\d{1,})\.[\S]{3,4}$/.exec(e)[1];return __WEB_MEDIA_ENGINE_URL__+"/"+t+"/"+r+(n?"/"+n:"")},open_note:function(e,t){for(var n=t.length-1;n>=0;n--){var o=t[n];if(e.dataset.tag_id===o.id)return $.colorbox({html:o.label,transition:"none"}),!0}return!1},set_background_color:function(e,t){e.setAttribute("crossOrigin","");const n=(new BackgroundColorTheif).getBackGroundColor(e);return t.style.backgroundColor="rgb("+n[0]+","+n[1]+","+n[2]+")",n},build_slider:function(e){const t=e.container;return new Promise((function(n){var o=common.create_dom_element({element_type:"ul",class_name:"slides",parent:t});const r=e.ar_elements.length;for(let t=0;t<r;t++){const r=e.ar_elements[t],_=r.image,c=r.title||null,p=r.text||null;if(!(_.length<4)){var a=common.create_dom_element({element_type:"li",class_name:"row_image",parent:o});common.create_dom_element({element_type:"div",class_name:"image_bg",parent:a}).style.backgroundImage="url("+_+")";var i=common.create_dom_element({element_type:"div",class_name:"image_text",parent:a}),l=common.create_dom_element({element_type:"h1",text_content:c,parent:i});common.create_dom_element({element_type:"a",parent:l}),common.create_dom_element({element_type:"span",text_content:p,parent:i});if(0===t){var s=new Image;s.addEventListener("load",(function(){n(o)}),!1),s.src=_}}}}))},get_scrollbar_width:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var o=n.offsetWidth;return e.parentNode.removeChild(e),t-o},has_scrollbar:function(){if("number"==typeof window.innerWidth){return window.innerWidth>=document.documentElement.clientWidth}const e=document.documentElement||document.body;var t,n;void 0!==e.currentStyle&&(t=e.currentStyle.overflow),t=t||window.getComputedStyle(e,"").overflow,void 0!==e.currentStyle&&(n=e.currentStyle.overflowY),n=n||window.getComputedStyle(e,"").overflowY;var o=e.scrollHeight>e.clientHeight,r=/^(visible|auto)$/.test(t)||/^(visible|auto)$/.test(n);return o&&r||("scroll"===t||"scroll"===n)},clone_deep:function(e){const t=this;let n,o;if("object"!=typeof e)return e;if(!e)return e;if("[object Array]"===Object.prototype.toString.apply(e)){for(n=[],o=0;o<e.length;o+=1)n[o]=t.clone_deep(e[o]);return n}for(o in n={},e)e.hasOwnProperty(o)&&(n[o]=t.clone_deep(e[o]));return n},get_query_variable:function(e,t){const n=e.split("?")[1].split("&");for(var o=0;o<n.length;o++){const e=n[o].split("=");if(e[0]==t)return e[1]}return!1},register_events:function(e,t){for(let n in t){const o=t[n];e.addEventListener(n,(function(e){for(let t in o)o[t](e)}))}return!0},clean_gaps:function(e,t=" | ",n=", "){if(!e)return"";return(e=(e=(e=e.trim()).replace(/^\| |\| {1,2}\|| \|+$/g,"")).trim()).split(t).filter(e=>e.length>0).join(n)},when_in_dom:function(e,t){if(document.contains(e))return t();const n=new MutationObserver((function(o){document.contains(e)&&(n.disconnect(),t())}));return n.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),n},remove_gaps:function(e,t){return e.split(t).filter(Boolean).join(t)},split_data:function(e,t){return e?e.split(t):[]},clean_date:function(e,t){const n=e?e.split(t):[],o=[];for(let e=0;e<n.length;e++){const t=n[e].split("-"),r=[];if(t[2]&&"00 00:00:00"!==t[2]){const e=t[2].split(" ")[0];r.push(e)}t[1]&&"00"!==t[1]&&r.push(t[1]),t[0]&&"0000"!==t[0]&&r.push(t[0]);const a=r.join("-");o.push(a)}return o},download_item:function(e,t){return fetch(e).then((function(e){return e.blob()})).then((function(e){const n=URL.createObjectURL(e),o=common.create_dom_element({element_type:"a",href:n,download:t||"image.jpg"});o.click(),o.remove()})),!0},is_node:function(e){return!!(e instanceof HTMLElement||e.nodeType)}};function ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}function form_factory(){this.form_items=[],this.node=null,this.item_factory=function(e){const t=this.build_form_item(e);return this.build_form_node(t,e.parent),"function"==typeof e.callback&&e.callback(t),this.form_items[e.id]=t,t},this.build_form_item=function(e){return{id:e.name,name:e.name,label:e.label,class_name:e.class_name||null,q:e.q||"",q_selected:[],q_selected_eq:e.q_selected_eq||"=",q_column:e.q_column,q_splittable:e.q_splittable||!1,sql_filter:e.sql_filter||null,eq:e.eq||"LIKE",eq_in:void 0!==e.eq_in?e.eq_in:"",eq_out:void 0!==e.eq_out?e.eq_out:"%",is_term:e.is_term||!1,callback:e.callback||!1,list_format:e.list_format||null,wrapper:e.wrapper||null,node_input:null,node_values:null,input_type:e.input_type,input_values:e.input_values}},this.build_form_node=function(e,t){const n=common.create_dom_element({element_type:"div",class_name:"form-group field "+e.class_name,parent:t});switch(e.input_type){case"range_slider":const t=common.create_dom_element({element_type:"div",class_name:"range_slider_labels",parent:n}),o=(common.create_dom_element({element_type:"input",type:"text",id:e.id+"_in",class_name:"form-control range_slider_value value_in",parent:t}),common.create_dom_element({element_type:"span",class_name:"form-control range_slider_label node_label",inner_html:e.label,parent:t}),common.create_dom_element({element_type:"input",type:"text",id:e.id+"_out",class_name:"form-control range_slider_value value_out",parent:t}),common.create_dom_element({element_type:"div",id:e.id,class_name:"form-control "+(e.class_name?" "+e.class_name:""),parent:n}));e.node_input=o;break;case"select":const r=common.create_dom_element({element_type:"select",id:e.id,class_name:"form-control ui-autocomplete-select"+(e.class_name?" "+e.class_name:""),value:e.q||"",parent:n});for(let t=0;t<e.input_values.length;t++)e.input_values[t],common.create_dom_element({element_type:"option",value:e.input_values[t].value,inner_html:e.input_values[t].label,parent:r});r.addEventListener("change",(function(t){console.log("e.target.value:",t.target.value),t.target.value&&(e.q=t.target.value,console.log("form_item:",e))})),e.node_input=r;break;default:const a=common.create_dom_element({element_type:"input",type:"text",id:e.id,class_name:"form-control ui-autocomplete-input"+(e.class_name?" "+e.class_name:""),placeholder:e.label,value:e.q||"",parent:n});a.addEventListener("keyup",(function(t){e.q=t.target.value})),e.node_input=a}const o=common.create_dom_element({element_type:"div",class_name:"container_values",parent:n});return e.node_values=o,!0},this.build_operators_node=function(){const e=common.create_dom_element({element_type:"div",class_name:"form-group field field_operators"}),t=(common.create_dom_element({element_type:"span",class_name:"radio operators",text_content:tstring.operator||"Operator",parent:e}),common.create_dom_element({element_type:"input",type:"radio",id:"operator_or",parent:e}));t.setAttribute("name","operators"),t.setAttribute("value","OR");common.create_dom_element({element_type:"label",text_content:tstring.or||"or",parent:e}).setAttribute("for","operator_or");const n=common.create_dom_element({element_type:"input",type:"radio",id:"operator_and",name:"operators",parent:e});n.setAttribute("name","operators"),n.setAttribute("value","AND"),n.setAttribute("checked","checked");return common.create_dom_element({element_type:"label",text_content:tstring.and||"and",parent:e}).setAttribute("for","operator_and"),e},this.add_selected_value=function(e,t,n){const o=e.node_values,r=o.querySelectorAll(".input_values");for(let e=r.length-1;e>=0;e--)if(n===r[e].value)return!1;const a=common.create_dom_element({element_type:"div",class_name:"line_value",parent:o});common.create_dom_element({element_type:"i",class_name:"icon remove fal far fa-trash-alt",parent:a}).addEventListener("click",(function(){const t=e.q_selected.indexOf(n);t>-1&&(e.q_selected.splice(t,1),this.parentNode.remove(),!0===SHOW_DEBUG&&console.log("form_item.q_selected removed value:",n,e.q_selected))}));common.create_dom_element({element_type:"span",class_name:"value_label",text_content:t,parent:a});return common.create_dom_element({element_type:"input",class_name:"input_values",parent:a}).value=n,e.q_selected.push(n),e.node_input.value="",e.q="",!0},this.build_filter=function(){const e=this.form_items,t=[];for(let[n,o]of Object.entries(e)){const e=!0===o.is_term?"OR":"AND",n={};if(n[e]=[],o.q.length>0&&"*"!==o.q||o.sql_filter){const t="AND",r={};r[t]=[];const a={field:o.q_column,value:`'${o.eq_in}${o.q}${o.eq_out}'`,op:o.eq,sql_filter:o.sql_filter,wrapper:o.wrapper};r[t].push(a),n[e].push(r)}if(o.q_selected.length>0)for(let t=0;t<o.q_selected.length;t++){const r=o.q_selected[t],a="AND",i={};i[a]=[];const l={field:o.q_column,value:"LIKE"===o.q_selected_eq?`'%${r}%'`:`'${r}'`,op:o.q_selected_eq,sql_filter:o.sql_filter,wrapper:o.wrapper};i[a].push(l),n[e].push(i)}n[e].length>0&&t.push(n)}if(SHOW_DEBUG,t.length<1)return!1;const n=this.node.querySelector('input[name="operators"]:checked'),o={};return o[n?n.value:"AND"]=t,o},this.full_text_search_operators_info=function(){const e=common.create_dom_element({element_type:"div",class_name:"full_text_search_operators_info"}),t=[{op:tstring.operator,info:tstring.description},{op:"+",info:tstring.include_the_word||"Include, the word must be present."},{op:"-",info:tstring.exclude_the_word||"Exclude, the word must not be present."},{op:">",info:tstring.increase_ranking||"Include, and increase ranking value."},{op:"<",info:tstring.decrease_ranking||"Include, and decrease the ranking value."},{op:"()",info:tstring.group_words||"Group words into subexpressions (allowing them to be included, excluded, ranked, and so forth as a group)."},{op:"~",info:tstring.negate_word||"Negate a word’s ranking value."},{op:"*",info:tstring.wildcard_at_end||"Wildcard at the end of the word."},{op:"“”",info:tstring.defines_phrase||"Defines a phrase (as opposed to a list of individual words, the entire phrase is matched for inclusion or exclusion)."}];for(let n=0;n<t.length;n++)common.create_dom_element({element_type:"div",class_name:"op",text_content:t[n].op,parent:e}),common.create_dom_element({element_type:"div",class_name:"info",text_content:t[n].info,parent:e});return e}}function map_factory(){this.target=null,this.data=null,this.source_maps={},this.popup_builder=null,this.map=null,this.layer_control=!1,this.loaded_document=!1,this.icon_main=null,this.icon_finds=null,this.icon_uncertain=null,this.popupOptions=null,this.current_layer=null,this.current_group=null,this.option_selected=null,this.initial_map_data={lat:40.65993615913156,lon:-3.2304345278385687,zoom:5,alt:0},this.source_maps=[{name:"osm",url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",default:!0},{name:"arcgis",url:"//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}"}],this.icon_main=null,this.popup_options,this.init=function(e){!0===SHOW_DEBUG&&console.log("--\x3e init options:",e);const t=e.source_maps||this.source_maps,n=e.popup_builder||this.build_popup_content,o=e.map_position||this.initial_map_data,r=e.map_container,a=e.popup_options||{maxWidth:420,closeButton:!1,className:"map_popup"},i=e.marker_icon?L.icon(e.marker_icon):L.icon({iconUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/lib/leaflet/images/naranja.png",shadowUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/lib/leaflet/images/marker-shadow.png",iconSize:[47,43],shadowSize:[41,41],iconAnchor:[10,19],shadowAnchor:[0,20],popupAnchor:[12,-20]});return this.source_maps=t,this.map_position=o,this.map_container=r,this.popup_builder=n,this.popup_options=a,this.icon_main=i,this.render_base_map()},this.render_base_map=function(){const e=this;return new Promise((function(t){e.map&&(e.map.off(),e.map.remove());const n=e.map_position,o=parseFloat(n.lat),r=parseFloat(n.lon),a=parseInt(n.zoom);parseInt(n.alt);e.map=null,e.layer_control=!1,e.loaded_document=!1,e.icon_finds=null,e.icon_uncertain=null,e.popupOptions=null,e.current_layer=null,e.current_group=null,e.option_selected=null;let i=null;const l={};for(let t=0;t<e.source_maps.length;t++){const n=e.source_maps[t],o=new L.TileLayer(n.url,n.options);l[n.name]=o,0!==t&&!0!==n.default||(i=o)}e.map=new L.map(e.map_container,{layers:[i],center:new L.LatLng(o,r),zoom:a}),e.layer_control=L.control.layers(l).addTo(e.map),e.map.scrollWheelZoom.disable(),e.popupOptions=e.popup_options,t(e.map)}))},this.parse_data_to_map=function(e,t){const n=this;return new Promise((function(t){if(n.current_group&&n.current_group.clearLayers(),!e||e.length<1)return t(n.map_container),!1;const o=n.group_by_place(e),r=[];for(let e=o.length-1;e>=0;e--){const t=o[e],a=t.marker_icon?L.icon(t.marker_icon):n.icon_main,i=n.popup_builder(t),l=L.popup(n.popupOptions).setLatLng([t.lat,t.lon]).setContent(i),s=L.marker([t.lat,t.lon],{icon:a}).bindPopup(l);s.on("click",(function(e){event_manager.publish("map_selected_marker",{item:t,event:e})})),r.push(s)}if(n.current_group=L.layerGroup(r),n.current_group.addTo(n.map),r&&r.length>0){const e=new L.featureGroup(r);e&&n.map.fitBounds(e.getBounds())}t(n.map_container)}))},this.group_by_place=function(e){const t=[],n=e.length;for(let o=0;o<n;o++){const n=e[o],r=t.find(e=>e.lat===n.lat&&e.lon===n.lon);if(r)r.group.push(n.data);else{const e={lat:n.lat,lon:n.lon,marker_icon:n.marker_icon,group:[n.data]};t.push(e)}}return t},this.build_popup_content=function(e){console.log("(!) Using default build_popup_content function:",e);const t=common.create_dom_element({element_type:"div",class_name:"popup_wrapper",inner_html:"TITLE: "+e.title+" ["+e.section_id+"]"});return t},this.reset_map=function(){const e=this.initial_map_data;return this.map.setView(new L.LatLng(e.lat,e.lon),e.zoom),!0}}!function(e,t,n){n=n||window;var o=!1;n.addEventListener(e,(function(){o||(o=!0,requestAnimationFrame((function(){n.dispatchEvent(new CustomEvent(t)),o=!1})))}))}("resize","optimizedResize");var page={trigger_url:page_globals.__WEB_ROOT_WEB__+"/web/trigger.web.php",maps_config:{source_maps:[{name:"DARE",url:"//dh.gu.se/tiles/imperium/{z}/{x}/{y}.png",options:{maxZoom:11},default:!0},{name:"OSM",url:"//{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{maxZoom:19}},{name:"Map Tiles",url:"https://api.maptiler.com/maps/basic/256/{z}/{x}/{y}@2x.png?key=udlBrEEE2SPm1In5dCNb",options:{maxZoom:20}},{name:"ARCGIS",url:"//server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{}}],popup_options:{maxWidth:420,closeButton:!1,className:"map_popup"},markers:{mint:{iconUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/images/map/purple.png",shadowUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/images/map/marker-shadow.png",iconSize:[47,43],shadowSize:[41,41],iconAnchor:[10,19],shadowAnchor:[0,20],popupAnchor:[12,-20]},findspot:{iconUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/images/map/orange.png",shadowUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/images/map/marker-shadow.png",iconSize:[47,43],shadowSize:[41,41],iconAnchor:[10,19],shadowAnchor:[0,20],popupAnchor:[12,-20]},hoard:{iconUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/images/map/green.png",shadowUrl:page_globals.__WEB_TEMPLATE_WEB__+"/assets/images/map/marker-shadow.png",iconSize:[47,43],shadowSize:[41,41],iconAnchor:[10,19],shadowAnchor:[0,20],popupAnchor:[12,-20]}}},setup:function(){var e=this;return window.ready((function(){e.hilite_lang(page_globals.WEB_CURRENT_LANG_CODE);const t=document.getElementById("footer");t&&setTimeout((function(){t.classList.remove("hidded")}),500)})),!0},hilite_lang:function(e){const t=document.getElementById("page_lang_selector");if(t){const n=t.querySelectorAll("a");for(let t=0;t<n.length;t++)-1!==n[t].href.indexOf(e)&&n[t].classList.add("selected")}return!0},load_more_items:function(e){var t=JSON.parse(e.dataset.template_map),n=document.getElementById(e.dataset.target),o=document.createElement("div");o.classList.add("spinner_list"),n.appendChild(o);var r={mode:"load_more_items",template_map:t};return common.get_json_data(this.trigger_url,r,!0).then((function(r){if(console.log("[page.load_more_items] response",r),null===r)console.log("[page.load_more_items] Error. Null response");else{var a=document.createElement("div");a.innerHTML=r.html;for(var i=a.children;i.length>0;)n.appendChild(i[0]);t.offset=t.offset+t.max_records,e.dataset.template_map=JSON.stringify(t),t.offset>=t.total_records&&(e.style.display="none")}o.remove()}))},adjust_image_size:function(e){e.style.opacity=0;var t=document.createElement("img");return t.src=e.style.backgroundImage.replace(/"/g,"").replace(/url\(|\)$/gi,""),t.addEventListener("load",(function(t){var n=this.width;this.height>n&&e.classList.add("vertical"),e.style.opacity=1}),!1),!0},adjust_footer_position:function(){let e=!1;const t=document.getElementById("wrapper");if(!t)return console.log("top_container not found !"),!1;t.offsetHeight>window.innerHeight&&(e=!0);!0===SHOW_DEBUG&&console.log("scrollbar:",e);const n=document.getElementById("footer");return!1===e?n.classList.add("fixed"):n.classList.remove("fixed"),e},activate_tooltips:function(e){SHOW_DEBUG,$(e).each((function(){new Tooltip($(this),{placement:"top"})}))},build_paginator_html:function(e,t,n){const o=t;o.dataset.total=e.total;const r=e.ar_nodes,a=r.length;for(let e=0;e<a;e++){const t=r[e];let n=t.label,a="page "+t.type+" "+t.id;if(!1===t.active&&(a+=" unactive"),"previous"!==t.id&&"next"!==t.id&&"last"!==t.id&&"first"!==t.id||(n=""),!0===t.selected&&(a+=" selected"),"extra"===t.type){a=t.type;common.create_dom_element({element_type:"span",class_name:a,text_content:n,parent:o})}else{common.create_dom_element({element_type:"a",class_name:a,text_content:n,dataset:{offset:t.offset_value,active:t.active},parent:o});t.active}}return o.addEventListener("click",this.paginator_click_event),o},paginator_click_event:function(e){const t=this,n=e.target;if("true"!==n.dataset.active)return!1;const o=parseInt(n.parentNode.dataset.total),r=n.dataset.offset,a=document.getElementById("search_form"),i=main_home.search(a,null,r,o);return i.then((function(e){t.result_container})),i},add_spinner:function(e){if(e){const t=common.create_dom_element({element_type:"img",class_name:"spinner_svg",src:page_globals.__WEB_ROOT_WEB__+"/tpl/assets/images/spinner.svg"});e.appendChild(t)}else console.warn("[add_spinner] Error on get target ",e);return!0},remove_spinner:function(e){const t=e.querySelector(".spinner_svg");return!!t&&(t.remove(),!0)},remote_image:function(e){if(e){let t="";return t=-1!==e.indexOf("v5/media_test")?e.replace(/\/v5\/media_test\/media_monedaiberica\//g,page_globals.__WEB_MEDIA_BASE_URL__+"/dedalo/media/"):e.replace(/\/dedalo\/media_test\/media_monedaiberica\//g,page_globals.__WEB_MEDIA_BASE_URL__+"/dedalo/media/"),t}return null},parse_legend_svg:function(e){return-1!==e.indexOf("http")?e:e.replace(/\/dedalo\/media\/svg\//g,page_globals.__WEB_MEDIA_BASE_URL__+"/dedalo/media/svg/")},remove_gaps:function(e,t){return e.split(t).filter(Boolean).join(t)},split_data:function(e,t){return e?e.split(t):[]},is_empty:function(e){return e&&e.length>0},trim_char:function(e,t){if(!e)return e;for(;e.charAt(0)==t;)e=e.substring(1);for(;e.charAt(e.length-1)==t;)e=e.substring(0,e.length-1);return e},parse_date:function(e){if(!e||e.length<4)return null;const t=e.substring(0,4),n=e.substring(5,7),o=e.substring(8,10),r=[];o&&"00"!=o&&r.push(o),n&&"00"!=n&&r.push(n),t&&"00"!=t&&r.push(t);return r.join("-")},activate_images_gallery:function(e,t){if(!0===t){const e=document.querySelectorAll(".poptrox-overlay");if(e)for(let t=e.length-1;t>=0;t--)e[t].remove()}return $(e).poptrox({baseZIndex:2e4,fadeSpeed:1,overlayOpacity:.5,popupCloserText:"",popupHeight:150,popupWidth:150,popupLoaderText:"",popupSpeed:1,selector:"a.image_link",usePopupCaption:!1,usePopupCloser:!0,usePopupDefaultStyling:!1,usePopupForceClose:!0,usePopupLoader:!0,usePopupNav:!0,windowMargin:50})},map_popup_builder:function(e){const t=common.create_dom_element({element_type:"div",class_name:"popup_wrapper"}),n=e.group,o=new Intl.Collator("es",{sensitivity:"base",ignorePunctuation:!0});n.sort((e,t)=>o.compare(e.title,t.title));const r=function(e){const n=e.section_id,o=e.title||"Undefined title "+n,r=e.description,a=common.create_dom_element({element_type:"div",class_name:"popup_item",parent:t});common.create_dom_element({element_type:"div",class_name:"text_title",inner_html:o,parent:a});if(r&&r.length>3){common.create_dom_element({element_type:"div",class_name:"text_description",inner_html:r,parent:a})}},a=n.length;return function e(o,i){for(let e=o;e<i;e++)r(n[e]);if(i<a-1){const n=common.create_dom_element({element_type:"input",type:"button",value:tstring.load_more||"Load more..",class_name:"more_node btn btn-light btn-block primary",parent:t});n.addEventListener("click",(function(){const t=this.offset+1;e(t,t+100<a?t+100:a),this.remove()})),n.offset=i}}(0,100<a?100:a),t},parse_type_data:function(e){console.log("------------\x3e parse_type_data data:",e);const t=this;if(Array.isArray(e)){const n=[];for(let o=0;o<e.length;o++)n.push(t.parse_type_data(e[o]));return n}const n=e;return"object"!=typeof n&&(console.log("parse_type_data row:",n),console.trace()),n.parsed||(n.ref_coins_image_obverse=void 0!==e.ref_coins_image_obverse?common.local_to_remote_path(e.ref_coins_image_obverse):null,n.ref_coins_image_reverse=void 0!==e.ref_coins_image_reverse?common.local_to_remote_path(e.ref_coins_image_reverse):null,n.ref_coins_union&&Array.isArray(n.ref_coins_union)&&n.ref_coins_union.length>0&&(n.ref_coins_union=page.parse_coin_data(n.ref_coins_union)),n.uri=t.parse_iri_data(n.uri),n.legend_obverse=n.legend_obverse?t.parse_legend_svg(n.legend_obverse):null,n.legend_reverse=n.legend_reverse?t.parse_legend_svg(n.legend_reverse):null,n.material=n.material?page.trim_char(page.remove_gaps(n.material," | "),"|"):null,n.symbol_obverse=n.symbol_obverse?page.trim_char(page.remove_gaps(n.symbol_obverse," | "),"|"):null,n.symbol_reverse=n.symbol_reverse?page.trim_char(page.remove_gaps(n.symbol_reverse," | "),"|"):null,n.symbol_obverse_data=JSON.parse(n.symbol_obverse_data),n.symbol_reverse_data=JSON.parse(n.symbol_reverse_data),n.parsed=!0),n},parse_coin_data:function(e){const t=this;if(Array.isArray(e)){const n=[];for(let o=0;o<e.length;o++)n.push(t.parse_coin_data(e[o]));return n}const n=e;if("object"!=typeof n&&(console.log("parse_coin_data row:",n),console.trace()),n.parsed)return n;if(n.image_obverse=common.local_to_remote_path(e.image_obverse),n.image_reverse=common.local_to_remote_path(e.image_reverse),n.type_data&&Array.isArray(n.type_data)&&n.type_data.length>0&&(n.type_data=t.parse_type_data(n.type_data)),n.type=n.type?page.remove_gaps(n.type," | "):null,n.legend_obverse=n.legend_obverse?t.parse_legend_svg(n.legend_obverse):null,n.legend_reverse=n.legend_reverse?t.parse_legend_svg(n.legend_reverse):null,n.countermark_obverse=n.countermark_obverse?t.parse_legend_svg(n.countermark_obverse):null,n.countermark_reverse=n.countermark_reverse?t.parse_legend_svg(n.countermark_reverse):null,n.ref_auction=n.ref_auction?JSON.parse(n.ref_auction):null,n.ref_auction_date=n.ref_auction_date?JSON.parse(n.ref_auction_date):null,n.ref_auction_number=n.ref_auction_number?JSON.parse(n.ref_auction_number):null,n.ref_auction_group=null,n.ref_auction&&n.ref_auction.length>0){n.ref_auction_group=[];for(let e=0;e<n.ref_auction.length;e++)n.ref_auction_group.push({name:n.ref_auction[e],date:void 0!==n.ref_auction_date[e]?t.parse_date(n.ref_auction_date[e]):"",number:void 0!==n.ref_auction_number[e]?n.ref_auction_number[e]:""})}if(n.ref_related_coin_auction=n.ref_related_coin_auction?JSON.parse(n.ref_related_coin_auction):null,n.ref_related_coin_auction_date=n.ref_related_coin_auction_date?JSON.parse(n.ref_related_coin_auction_date):null,n.ref_related_coin_auction_number=n.ref_related_coin_auction_number?JSON.parse(n.ref_related_coin_auction_number):null,n.ref_related_coin_auction_group=null,n.ref_related_coin_auction&&n.ref_related_coin_auction.length>0){n.ref_related_coin_auction_group=[];for(let e=0;e<n.ref_related_coin_auction.length;e++)n.ref_related_coin_auction_group.push({name:n.ref_related_coin_auction[e],date:void 0!==n.ref_related_coin_auction_date[e]?t.parse_date(n.ref_related_coin_auction_date[e]):"",number:void 0!==n.ref_related_coin_auction_number[e]?n.ref_related_coin_auction_number[e]:""})}return n.find_date=t.parse_date(n.find_date),n.mib_uri=page_globals.__WEB_BASE_URL__+page_globals.__WEB_ROOT_WEB__+"/coin/"+n.section_id,n.uri=t.parse_iri_data(n.uri),n.bibliography=page.parse_publication(n.bibliography_data),n.mint=n.type_dat&&void 0!==n.type_data[0]?n.type_data[0].mint:null,n.type_number=n.type_data&&void 0!==n.type_data[0]?n.type_data[0].number:null,n.parsed=!0,n},parse_catalog_data:function(e){const t=this;Array.isArray(e)||(e=[e]);const n=[],o=e.length;for(let r=0;r<o;r++){const o=e[r];o.parsed||(o.ref_coins_image_obverse=common.local_to_remote_path(o.ref_coins_image_obverse),o.ref_coins_image_reverse=common.local_to_remote_path(o.ref_coins_image_reverse),o.ref_coins_image_obverse_thumb=o.ref_coins_image_obverse?o.ref_coins_image_obverse.replace("/1.5MB/","/thumb/"):null,o.ref_coins_image_reverse_thumb=o.ref_coins_image_reverse?o.ref_coins_image_reverse.replace("/1.5MB/","/thumb/"):null,o.ref_type_legend_obverse=o.ref_type_legend_obverse?t.parse_legend_svg(o.ref_type_legend_obverse):null,o.ref_type_legend_reverse=o.ref_type_legend_reverse?t.parse_legend_svg(o.ref_type_legend_reverse):null,o.ref_type_symbol_obverse=o.ref_type_symbol_obverse?t.parse_legend_svg(o.ref_type_symbol_obverse):null,o.ref_type_symbol_reverse=o.ref_type_symbol_reverse?t.parse_legend_svg(o.ref_type_symbol_reverse):null,o.term_data=JSON.parse(o.term_data),o.term_section_id=o.term_data?o.term_data[0]:null,o.children=JSON.parse(o.children),o.parent=JSON.parse(o.parent),o.ref_type_averages_diameter=o.ref_type_averages_diameter?parseFloat(o.ref_type_averages_diameter.replace(",",".")):null,o.ref_type_total_diameter_items=o.ref_type_total_diameter_items?parseFloat(o.ref_type_total_diameter_items.replace(",",".")):null,o.ref_type_averages_weight=o.ref_type_averages_weight?parseFloat(o.ref_type_averages_weight.replace(",",".")):null,o.ref_type_total_weight_items=o.ref_type_total_weight_items?parseFloat(o.ref_type_total_weight_items.replace(",",".")):null,o.ref_type_material=page.trim_char(o.ref_type_material,"|"),n.push(o))}for(let t=0;t<o;t++){const o=n[t];if(!o.parsed&&"types"===o.term_table&&o.children){const t=[],n=[];for(let r=0;r<o.children.length;r++){const a=o.children[r],i=e.find(e=>e.section_id==a);if(i&&i.ref_type_averages_weight){const e=i.ref_type_total_weight_items,t=new Array(e).fill(i.ref_type_averages_weight);n.push(...t)}if(i&&i.ref_type_averages_diameter){const e=i.ref_type_total_diameter_items,n=new Array(e).fill(i.ref_type_averages_diameter);t.push(...n)}}const r=n.reduce((e,t)=>e+t,0)/n.length,a=t.reduce((e,t)=>e+t,0)/t.length;o.ref_type_averages_weight=r,o.ref_type_averages_diameter=a,o.ref_type_total_weight_items=n.length,o.ref_type_total_diameter_items=t.length}o.parsed=!0}return n},parse_publication:function(e){const t=[],n=e.length;for(let o=0;o<n;o++){const n=e[o];if(n.parsed)continue;n._publications=[];const r=JSON.parse(n.publications_data),a=r.length;if(a>0){
const e=page.split_data(n.ref_publications_authors," # "),o=page.split_data(n.ref_publications_date," # "),i=page.split_data(n.ref_publications_editor," # "),l=page.split_data(n.ref_publications_magazine," # "),s=page.split_data(n.ref_publications_place," # "),_=page.split_data(n.ref_publications_title," # "),c=page.split_data(n.ref_publications_url," # ");for(let p=0;p<a;p++){const a=r[p],m={reference:n.section_id,section_id:a,authors:e[p]||null,date:o[p]||null,editor:i[p]||null,magazine:l[p]||null,place:s[p]||null,title:_[p]||null,url:c[p]||null};n._publications.push(m),t.push(m)}}n.parsed=!0}return t},parse_iri_data:function(e){const t=[];if(!e||e.length<1)return t;const n=e.split(" | ");for(let e=0;e<n.length;e++){const o=n[e].split(", ");if(o.length>1&&void 0===o[1])continue;const r=1===o.length?o[0]:o[1];let a=1===o.length?"":o[0];if(a.length<1)try{a=new URL(r).hostname}catch(e){console.error(e)}t.push({label:a,value:r})}return t}},paginator={build_page_nodes:function(e,t,n,o){SHOW_DEBUG,e=parseInt(e),t=parseInt(t),n=parseInt(n),o=parseInt(o);const r=[];if(e<1)return r;void 0===o&&(o=6),r.push({label:tstring.first||"<<",offset_value:0,type:"navigator",active:n>=t,id:"first"}),r.push({label:tstring.prev||"Prev",offset_value:n-t>0?n-t:0,type:"navigator",active:n>=t,id:"previous"});const a=Math.ceil(e/t),i=Math.ceil(n/t)+1;let l=Math.ceil(o/2);i<=l&&(l=2*l-i+1),SHOW_DEBUG;for(var s=1;s<=a;s++){const e=s-1==n/t,o=!e,a=(s-1)*t;(s>=i-l&&s<=i||s>=i-l&&s<=i+l)&&r.push({label:s,offset_value:a,type:"page",selected:e,active:o,id:s})}r.push({label:tstring.next||"Next",offset_value:n+t,type:"navigator",active:n<e-t,id:"next"}),r.push({label:tstring.last||">>",offset_value:(a-1)*t,type:"navigator",active:n<e-t,id:"last"});return SHOW_DEBUG,{total:e,limit:t,offset:n,nodes:o,n_pages:a,n_pages_group:l,current_page:i,ar_nodes:r}},build_paginator_html:function(e,t,n){const o=this,r=new DocumentFragment,a=e.ar_nodes||[],i=a.length;for(let t=0;t<i;t++){const i=a[t];let l="",s=i.label;switch(i.type){case"navigator":l=i.type+" "+i.id;break;case"page":l=i.type+""}!0===i.selected&&(l+=" selected");const _=common.create_dom_element({element_type:"a",class_name:l+(i.active?"":" unactive"),text_content:s,parent:r});!0===i.active&&_.addEventListener("click",(function(t){const r="function"==typeof n?n:o.goto_url;return"function"==typeof r&&r({offset:i.offset_value,total:e.total})}))}const l=common.create_dom_element({element_type:"div",class_name:"paginator_wrapper navigator"});return l.appendChild(r),t&&t.appendChild(l),l},goto_url:function(e){const t="../?total="+e.total+"&offset="+e.offset;return window.location.href=t,!0},get_full_paginator:function(e){const t=e.total,n=e.limit,o=e.offset,r=e.n_nodes,a=e.callback||null,i=this.build_page_nodes(t,n,o,r);return this.build_paginator_html(i,!1,a)},get_totals_node:function(e){const t=e.total,n=(e.limit,e.offset),o=e.count,r=0==t?0:Math.ceil(1*n)||1,a=n+o,i=0===t?tstring.showed+" "+t:tstring.showed+" "+r+" "+tstring.to+" "+a+" "+tstring.of+" "+t;return common.create_dom_element({element_type:"div",class_name:"totals",text_content:i})}};!function(){const e=function(){};e.prototype.request=async function(e){console.log("++++ request options:",e);const t=e.url||page_globals.JSON_TRIGGER_URL,n=e.method||"POST",o=e.mode||"cors",r=e.cache||"no-cache",a=e.credentials||"same-origin",i=e.headers||{"Content-Type":"application/json"},l=e.redirect||"follow",s=e.referrer||"no-referrer",_=e.body;return _.code||(_.code=page_globals.API_WEB_USER_CODE),_.lang||(_.lang=page_globals.WEB_CURRENT_LANG_CODE),fetch(t,{method:n,mode:o,cache:r,credentials:a,headers:i,redirect:l,referrer:s,body:JSON.stringify(_)}).then((function(e){if(!e.ok)throw console.warn("-> handle_errors response:",e),Error(e.statusText);return e})).then(e=>e.json().then(e=>e)).catch(e=>(console.error("!!!!! [page data_manager.request] ERROR:",e),{result:!1,msg:e.message,error:e}))},window.data_manager=new e,window.event_manager=new function(){this.events=[],this.last_token=-1,this.subscribe=function(e,t){const n="event_"+String(++this.last_token),o={event_name:e,token:n,callback:t};return this.events.push(o),n},this.unsubscribe=function(e){return this.events.map((t,n,o)=>{t.token===e&&o.splice(n,1)})},this.publish=function(e,t={}){const n=this.events.filter(t=>t.event_name===e);return!!n&&n.map(e=>e.callback(t))},this.get_events=function(){return this.events},this.fire_event=function(e,t){var n;if(e.ownerDocument)n=e.ownerDocument;else{if(9!=e.nodeType)throw new Error("Invalid node passed to fireEvent: "+e.id);n=e}if(e.dispatchEvent){var o="";switch(t){case"click":case"mousedown":case"mouseup":o="MouseEvents";break;case"focus":case"change":case"blur":case"select":o="HTMLEvents";break;default:throw"fireEvent: Couldn't find an event class for event '"+t+"'."}var r="change"!=t;(a=n.createEvent(o)).initEvent(t,r,!0),a.synthetic=!0,e.dispatchEvent(a,!0)}else if(e.fireEvent){var a;(a=n.createEventObject()).synthetic=!0,e.fireEvent("on"+t,a)}},this.when_in_dom=function(e,t){const n=new MutationObserver((function(o){document.contains(e)&&(n.disconnect(),t(this))}));return n.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),n}},setTimeout((function(){console.log("Activated app_utils !"),console.log("Avilable data_manager:",data_manager),console.log("Avilable event_manager:",event_manager)}),10)}();var biblio_row_fields={biblio_object:null,caller:null,get_typology:function(){const e=this.biblio_object.typology||"[]",t=JSON.parse(e);return"1"==(void 0!==t[0]?t[0]:0)?"book":"article"},author:function(){const e=this.biblio_object,t=common.create_dom_element({element_type:"div",class_name:"info_line author"});if(!0===dedalo_logged){common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",text_content:e.section_id+" "+this.get_typology(),href:"/dedalo/lib/dedalo/main/?t=rsc205&id="+e.section_id,parent:t}).setAttribute("target","_blank")}if(e.authors&&e.authors.length>0){const o=e.authors_data,r=o.length,a=[];for(var n=0;n<r;n++){const e=[];o[n].surname&&e.push(o[n].surname),o[n].name&&e.push(o[n].name);const t=e.join(", ");a.push(t)}const i=a.join("; ");common.create_dom_element({element_type:"div",class_name:"info_value",text_content:i,parent:t})}else common.create_dom_element({element_type:"div",class_name:"info_value",text_content:"Undefined author",parent:t});return t},publication_date:function(){const e=this.biblio_object,t=common.create_dom_element({element_type:"div"});let n="";if(e.publication_date&&e.publication_date.length>0){const t=e.publication_date.split("-");n=void 0!==t[0]?parseInt(t[0]):"",n=n+"-"+parseInt(t[1]),t[2],parseInt(t[2])>0&&(n=n+"-"+parseInt(t[2]))}return common.create_dom_element({element_type:"div",class_name:"info_value",text_content:n,parent:t}),t.classList.remove("hide"),t},row_title:function(){const e=this.biblio_object,t=this.get_typology(),n=e.pdf||"[]",o=JSON.parse(n),r=o.length,a=common.create_dom_element({element_type:"div",class_name:"info_line row_title"}),i=e.title||"",l="book"===t?" italic":"";common.create_dom_element({element_type:"div",class_name:"title"+l+(r>0?" blue":""),text_content:i,parent:a});for(let e=0;e<r;e++){const t=o[e];common.create_dom_element({element_type:"div",class_name:"pdf",title:t.title,parent:a}).addEventListener("click",e=>{window.open(t.iri,"PDF","menubar=yes,location=yes,resizable=yes,scrollbars=yes,status=yes")})}return a},row_body:function(){const e=this.biblio_object,t=this.get_typology(),n=common.create_dom_element({element_type:"div",class_name:"info_line row_body "+t});switch(t){case"book":e.place&&common.create_dom_element({element_type:"div",class_name:"info_value place grey",text_content:e.place,parent:n}),e.editor&&common.create_dom_element({element_type:"div",class_name:"info_value editor grey",text_content:": "+e.editor,parent:n});break;default:if(e.magazine&&common.create_dom_element({element_type:"div",class_name:"info_value magazine grey italic",text_content:e.magazine,parent:n}),e.serie&&common.create_dom_element({element_type:"div",class_name:"info_value serie grey",text_content:": "+e.serie,parent:n}),e.volume){const t=e.serie.length>0?", "+e.volume:e.volume;common.create_dom_element({element_type:"div",class_name:"info_value volume grey italic",text_content:t,parent:n})}if(e.other_people_name&&e.other_people_name.length>0){const t=e.other_people_name.split(" | "),o=e.other_people_role.split(" | ");for(let r=0;r<t.length;r++){const a=t[r],i=void 0!==o[r]?" ("+o[r]+")":"",l=e.serie.length>0||e.volume&&e.volume.length>0?", "+a+i:a+i;common.create_dom_element({element_type:"div",class_name:"info_value other_people_name grey",text_content:l,parent:n})}}if(e.physical_description){const t=e.serie.length>0||e.volume&&e.volume.length>0?", "+e.physical_description:e.physical_description;common.create_dom_element({element_type:"div",class_name:"info_value physical_description grey",text_content:t,parent:n})}}return n},row_url:function(){const e=this.biblio_object,t=common.create_dom_element({element_type:"div",class_name:"info_line row_url"}),n=e.url_data;if(n&&n.length>0){const e=JSON.parse(n),o=e.length;for(let n=0;n<o;n++){const r=e[n];common.create_dom_element({element_type:"a",class_name:"url_data",title:r.title,text_content:r.title,href:r.iri,parent:t}),!(n%2)&&n<o&&o>1&&common.create_dom_element({element_type:"span",class_name:"separator",text_content:" | ",parent:t})}}return t},descriptors:function(e){const t=this,n=(this.biblio_object,common.create_dom_element({element_type:"div",class_name:"info_line descriptors"})),o=e.split(" - ");for(let e=0;e<o.length;e++){const r=o[e];common.create_dom_element({element_type:"a",class_name:"descriptors_link",text_content:r,parent:n}).addEventListener("click",(function(){t.caller.search_item("descriptors",r)}))}return n},row_bibliography:function(){var e=this.biblio_object;const t=e.ref_publications_url;null!=t&&t.includes("Zenon")&&(e=function(e){const t=e;t.length;for(const e in t)"string"==typeof t[e]&&null!=t[e]&&t[e].includes(" # ")&&(t[e]=t[e].split(" # ")[0],"ref_publications_url"===e&&(t[e]=t[e].split(", ")[1]));return t}(e));const n=common.create_dom_element({element_type:"div",class_name:"info_line row_title"}),o=e.ref_publications_authors?e.ref_publications_authors+" ":"";console.log("biblio_object",e),common.create_dom_element({element_type:"span",inner_html:o,parent:n});const r=e.ref_publications_date?"("+e.ref_publications_date+") ":"";common.create_dom_element({element_type:"span",inner_html:r,parent:n});const a=e.ref_publications_title?e.ref_publications_title+". ":"";common.create_dom_element({element_type:"span",inner_html:a,parent:n});const i=e.ref_publications_magazine?"<em>"+e.ref_publications_magazine+". </em>":"";common.create_dom_element({element_type:"span",inner_html:i,parent:n});const l=e.pages?" p. "+e.pages+", ":"";common.create_dom_element({element_type:"span",inner_html:l,parent:n});const s=e.reference?" "+e.reference+". ":"";common.create_dom_element({element_type:"span",inner_html:s,parent:n});const _=e.sheet?" s."+e.sheet+". ":"";common.create_dom_element({element_type:"span",inner_html:_,parent:n});const c=e.ref_publications_place?" s."+e.ref_publications_place+". ":"";common.create_dom_element({element_type:"span",inner_html:c,parent:n});const p=e.ref_publications_url?'<a href="'+e.ref_publications_url+'">'+e.ref_publications_url+" </a> ":"";return common.create_dom_element({element_type:"span",inner_html:p,parent:n}),n}};
//# sourceMappingURL=app-min.js.map