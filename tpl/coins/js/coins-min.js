"use strict";var coins={form:null,pagination:null,list:null,set_up:function(e){const t=e.form_container;e.row_detail;this.form=new form_factory;const n=this.render_form();return t.appendChild(n),this.pagination={total:null,limit:10,offset:0},!0},render_form:function(){const e=this,t=new DocumentFragment,n=common.create_dom_element({element_type:"div",class_name:"form-row fields",parent:t});e.form.item_factory({id:"section_id",name:"section_id",label:tstring.is||"ID",table:"coins",q_column:"section_id",eq:"=",eq_in:"",eq_out:"",parent:n}),e.form.item_factory({id:"collection",name:"collection",label:tstring.collection||"collection",table:"coins",q_column:"collection",eq:"LIKE",eq_in:"%",eq_out:"%",parent:n,callback:function(t){e.form.activate_autocomplete({form_item:t,table:"coins"})}}),e.form.item_factory({id:"public_info",name:"public_info",label:tstring.public_info||"public_info",table:"coins",q_column:"public_info",eq:"LIKE",eq_in:"%",eq_out:"%",parent:n,callback:function(t){e.form.activate_autocomplete({form_item:t,table:"coins"})}}),e.form.item_factory({id:"mint",name:"mint",label:tstring.mint||"mint",table:"coins",q_column:"mint",eq:"LIKE",eq_in:"%",eq_out:"%",parent:n,callback:function(t){e.form.activate_autocomplete({form_item:t,table:"coins"})}});const o=common.create_dom_element({element_type:"div",class_name:"form-group field button_submit",parent:t});common.create_dom_element({element_type:"input",type:"submit",id:"submit",value:tstring.search||"Search",class_name:"btn btn-light btn-block primary",parent:o}).addEventListener("click",(function(t){t.preventDefault(),e.form_submit(a)}));const i=e.form.build_operators_node();t.appendChild(i);const a=common.create_dom_element({element_type:"form",id:"search_form",class_name:"form-inline"});return a.appendChild(t),a},form_submit:function(e){const t=this,n=document.querySelector(".result");n.querySelector("#rows_list");return page.add_spinner(n),n.classList.add("loading"),new Promise((function(o){t.form.form_submit({form_node:e,table:"coins",ar_fields:["*"],limit:10,count:!0,offset:0,order:"section_id ASC",data_parser:page.parse_coin_data}).then((function(e){!function(){for(page.remove_spinner(n);n.hasChildNodes();)n.removeChild(n.lastChild);n.classList.remove("loading")}(),t.list=t.list||new list_factory,t.list.init({data:e,fn_row_builder:t.list_row_builder,pagination:t.pagination,caller:t}),t.list.render_list().then((function(e){e&&n.appendChild(e),o(e)}))}))}))},list_row_builder:function(e,t){const n=new DocumentFragment,o=common.create_dom_element({element_type:"div",class_name:"wrapper",parent:n}),i=common.create_dom_element({element_type:"img",class_name:"image",src:e.image_obverse_thumb,parent:o});i.hires=e.image_obverse,i.addEventListener("load",page.load_hires);const a=common.create_dom_element({element_type:"img",class_name:"image",src:e.image_reverse_thumb,parent:o});return a.hires=e.image_reverse,a.addEventListener("load",page.load_hires),n}};