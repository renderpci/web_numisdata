"use strict";var mint={set_up:function(e){return void 0!==e.section_id&&mint.render_mint(e.section_id),!0},render_mint:function(e){const t=this;return t.get_row_data({section_id:e}).then((function(e){console.log("response:",e);const n=e.result.find(e=>"mint"===e.id);t.draw_row({target:document.getElementById("row_detail"),ar_rows:n.result}),t.draw_map({map_data:JSON.parse(n.result[0].map)});const o=e.result.find(e=>"types"===e.id);t.draw_types({target:document.getElementById("types"),ar_rows:o.result})})),!0},get_row_data:function(e){const t=e.section_id,n=mints.trigger_url,o={mode:"get_row_data",section_id:t};return common.get_json_data(n,o).then((function(e){return!0===SHOW_DEBUG&&console.log("[mints.get_row_data] get_json_data response:",e),e?e.result:(console.warn("[mints.get_row_data] Error. Received response data is null"),!1)}))},draw_row:function(e){const t=e.ar_rows[0],n=e.target;for(self.row_object=t,!0===SHOW_DEBUG&&console.log("Mint row_object:",t);n.hasChildNodes();)n.removeChild(n.lastChild);const o=new DocumentFragment,a=common.create_dom_element({element_type:"div",class_name:"",parent:o});if(!0===dedalo_logged){common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",text_content:t.section_id,href:"/dedalo/lib/dedalo/main/?t=numisdata6&id="+t.section_id,parent:a}).setAttribute("target","_blank")}if(t.name&&t.name.length>0){common.create_dom_element({element_type:"label",class_name:"",text_content:tstring.name||"Name",parent:a});const e=t.name;common.create_dom_element({element_type:"span",class_name:"info_value",text_content:e,parent:a})}if(t.place&&t.place.length>0){common.create_dom_element({element_type:"label",text_content:tstring.place||"Place",parent:a});const e=t.place;common.create_dom_element({element_type:"div",class_name:"info_value",text_content:e,parent:a})}if(t.history&&t.history.length>0){common.create_dom_element({element_type:"label",text_content:tstring.history||"History",parent:a});const e=t.history;common.create_dom_element({element_type:"div",class_name:"info_value",inner_html:e,parent:a})}if(t.numismatic_comments&&t.numismatic_comments.length>0){common.create_dom_element({element_type:"label",text_content:tstring.numismatic_comments||"Numismatic comments",parent:a});const e=t.numismatic_comments;common.create_dom_element({element_type:"div",class_name:"info_value",inner_html:e,parent:a})}if(t.bibliography_data&&t.bibliography_data.length>0){common.create_dom_element({element_type:"label",text_content:tstring.bibliographic_references||"Bibliographic references",parent:a});for(var m=0;m<t.bibliography_data.length;m++){const e=t.bibliography_data[m];!0===SHOW_DEBUG&&console.log("bibliographic_reference:",e);const n=e.description;n.length>0&&(common.create_dom_element({element_type:"label",text_content:tstring.description||"Description",parent:a}),common.create_dom_element({element_type:"div",class_name:"info_value",inner_html:n,parent:a}));const o=common.clean_gaps(e.items," | ",", ");o.length>0&&(common.create_dom_element({element_type:"label",text_content:tstring.info||"Info",parent:a}),common.create_dom_element({element_type:"div",class_name:"info_value",inner_html:o,parent:a}));const _=e.pages;_.length>0&&(common.create_dom_element({element_type:"label",text_content:tstring.pages||"Pages",parent:a}),common.create_dom_element({element_type:"div",class_name:"info_value",text_content:_,parent:a}))}}return n.appendChild(o),n},draw_types:function(e){const t=e.target,n=e.ar_rows,o=n.length;let a=new Intl.Collator("es",{sensitivity:"base",ignorePunctuation:!0});for(n.sort((e,t)=>{let n=e.catalogue+" "+e.number,o=t.catalogue+" "+t.number;return a.compare(n,o)});t.hasChildNodes();)t.removeChild(t.lastChild);const m=new DocumentFragment;common.create_dom_element({element_type:"label",text_content:tstring.types||"Types",parent:m}),console.groupCollapsed("Types info");for(let e=0;e<o;e++){const t=n[e];!0===SHOW_DEBUG&&console.log("type row_object:",t);const o=common.create_dom_element({element_type:"div",class_name:"type_row",parent:m});if(!0===dedalo_logged){common.create_dom_element({element_type:"a",class_name:"section_id go_to_dedalo",text_content:t.section_id,href:"/dedalo/lib/dedalo/main/?t=numisdata3&id="+t.section_id,parent:o}).setAttribute("target","_blank")}common.create_dom_element({element_type:"span",text_content:t.catalogue+" "+t.number,parent:o});const a=common.clean_gaps(t.material," | ",", ");if(a.length>0){common.create_dom_element({element_type:"span",text_content:" ("+a+")",parent:o})}}return console.groupEnd(),t.appendChild(m),t},draw_map:function(e){const t=e.map_data,n=t,o=document.getElementById("map_container");this.map=this.map||new map_factory,this.map.init({map_container:o,map_position:n,popup_builder:page.map_popup_builder,popup_options:page.maps_config.popup_options,source_maps:page.maps_config.source_maps});const a=this.map_data(t);return this.map.parse_data_to_map(a,null).then((function(){o.classList.remove("hide_opacity")})),!0},map_data:function(e){console.log("--map_data data:",e);const t=Array.isArray(e)?e:[e],n=[];for(let e=0;e<t.length;e++){const o={lat:t[e].lat,lon:t[e].lon,data:{}};n.push(o)}return console.log("--map_data data_clean:",n),n}};