{"version":3,"sources":["paginator.js"],"names":["paginator","build_page_nodes","total","limit","offset","n_nodes","SHOW_DEBUG","console","log","parseInt","ar_nodes","push","label","tstring","first","offset_value","type","active","id","prev","n_pages","Math","ceil","current_page","n_pages_group","i","selected","next","last","response","nodes","build_paginator_html","page_nodes_data","container","goto_url","wrapper_ul","common","create_dom_element","element_type","class_name","parent","ar_nodes_length","length","_loop","node","li","text_content","method","addEventListener","e","window","options","url","location","href"],"mappings":"AAAA,aAIA,IAAIA,UAAa,CAOhBC,iBAAmB,SAASC,EAAOC,EAAOC,EAAQC,IACjC,IAAbC,YACFC,QAAQC,IAAI,0BAA0BN,EAAM,SAASC,EAAM,SAASC,EAAO,WAAWC,GAItFH,EAASO,SAASP,GAClBC,EAAUM,SAASN,GACnBC,EAAUK,SAASL,GACnBC,EAAUI,SAASJ,GAGpB,IAAMK,EAAW,GAGhB,GAAIR,EAAM,EACT,OAAOQ,OAIa,IAAVL,IACVA,EAAU,GASXK,EAASC,KAAK,CACbC,MAAWC,QAAQC,OAAS,KAC5BC,aAAe,EACfC,KAAU,YACVC,OAAab,GAAQD,EACrBe,GAAS,UAIVR,EAASC,KAAK,CACbC,MAAWC,QAAQM,MAAQ,OAC3BJ,aAAgBX,EAASD,EAAO,EAAKC,EAASD,EAAS,EACvDa,KAAU,YACVC,OAAab,GAAQD,EACrBe,GAAS,aAIV,IAAME,EAAYC,KAAKC,KAAKpB,EAAQC,GAC9BoB,EAAgBF,KAAKC,KAAKlB,EAAOD,GAAO,EAC1CqB,EAAiBH,KAAKC,KAAKjB,EAAU,GAErCkB,GAAcC,IACjBA,EAA+B,EAAdA,EAAkBD,EAAa,IAGjC,IAAbjB,YACFC,QAAQC,IAAI,gBAAgBe,EAAc,SAASrB,EAAO,UAAUkB,EAAS,SAASjB,EAAO,UAAUC,EAAO,WAAWC,EAAQ,iBAAiBmB,GAEnJ,IAAK,IAAIC,EAAI,EAAGA,GAAKL,EAASK,IAAK,CASlC,IAAMC,EAAcD,EAAE,GAAMrB,EAAOD,EAC7Bc,GAAWS,EAaXX,GAAiBU,EAAE,GAAKtB,GAExBsB,GAAIF,EAAaC,GAAkBC,GAAGF,GACtCE,GAAIF,EAAaC,GAAkBC,GAAIF,EAAaC,IAGzDd,EAASC,KAAK,CACbC,MAAWa,EACXV,aAAeA,EACfC,KAAU,OACVU,SAAaA,EACbT,OAAYA,EACZC,GAASO,IAMZf,EAASC,KAAK,CACbC,MAAWC,QAAQc,MAAQ,OAC3BZ,aAAeX,EAASD,EACxBa,KAAU,YACVC,OAAab,EAAUF,EAAMC,EAC7Be,GAAS,SAIVR,EAASC,KAAK,CACbC,MAAWC,QAAQe,MAAQ,KAC3Bb,cAAgBK,EAAQ,GAAKjB,EAC7Ba,KAAU,YACVC,OAAab,EAAUF,EAAMC,EAC7Be,GAAS,SAIV,IAAMW,EAAW,CAChB3B,MAAYA,EACZC,MAAYA,EACZC,OAAaA,EACb0B,MAAYzB,EACZe,QAAaA,EACbI,cAAgBA,EAChBD,aAAgBA,EAChBb,SAAcA,GAQhB,OAJiB,IAAbJ,YACFC,QAAQC,IAAI,gCAAgCqB,GAGvCA,GASRE,qBAAuB,SAASC,EAAiBC,EAAWC,GAY1D,IATA,IAAMC,EAAcC,OAAOC,mBAAmB,CAC5CC,aAAgB,KAChBC,WAAe,oBACfC,OAAYP,IAIRvB,EAAesB,EAAgBtB,SAC/B+B,EAAkB/B,EAASgC,OAXmCC,EAAA,SAY3DlB,GACR,IAAMmB,EAAOlC,EAASe,GAElBc,EAAc,GACd3B,EAAUgC,EAAKhC,MACnB,OAAOgC,EAAK5B,MACX,IAAK,YAIL,IAAK,OACJuB,EAAaK,EAAK5B,KAAO,IAIP,IAAhB4B,EAAKlB,WACRa,GAAc,aAGf,IAAMM,EAAMT,OAAOC,mBAAmB,CACrCC,aAAgB,KAChBC,WAAeA,EACfO,aAAgBlC,EAChB4B,OAAYL,IAIZ,IAAkB,IAAdS,EAAK3B,OAAe,CACvB,IAAM8B,OAA2B,IAAXb,EAAyBA,EAAW,qBAC1DW,EAAGG,iBAAiB,QAAQ,SAASC,GAEpC,OAAOC,OAAOH,GAAQ,CACrB3C,OAAUwC,EAAK7B,aACfb,MAAS8B,EAAgB9B,UAGzB,KApCIuB,EAAI,EAAGA,EAAIgB,EAAiBhB,IAAKkB,EAAjClB,GAgDV,OAAOU,GAKRD,SAAW,SAASiB,GAEnB,IAGMC,EAAM,aAHGD,EAAQjD,MAGY,WAFpBiD,EAAQ/C,OAMvB,OAFA8C,OAAOG,SAASC,KAAOF,GAEhB","sourcesContent":["\"use strict\";\n\n\n\nvar paginator =  {\n\n\n\t/**\n\t* BUILD_PAGE_NODES\n\t* Build an array ob ojects ready to draw a footer pagination\n\t*/\n\tbuild_page_nodes : function(total, limit, offset, n_nodes) {\n\t\tif(SHOW_DEBUG===true) {\n\t\t\tconsole.log(\"build_page_nodes: total\",total,\"limit:\",limit,\"offset\",offset,\"n_nodes:\",n_nodes);;\n\t\t}\n\n\t\t// safe types\n\t\t\ttotal \t= parseInt(total)\n\t\t\tlimit  \t= parseInt(limit)\n\t\t\toffset \t= parseInt(offset)\n\t\t\tn_nodes\t= parseInt(n_nodes)\n\n\n\t\tconst ar_nodes = []\n\n\t\t// check total\n\t\t\tif (total<1) {\n\t\t\t\treturn ar_nodes\n\t\t\t}\n\n\t\t// n_nodes default\n\t\t\tif (typeof n_nodes===\"undefined\") {\n\t\t\t\tn_nodes = 6\n\t\t\t}\n\n\t\t// debug params\n\t\t\t// limit \t= 10\n\t\t\t// offset  \t= 0\n\t\t\t// n_nodes \t= 6\n\n\t\t// first\n\t\t\tar_nodes.push({\n\t\t\t\tlabel \t\t : tstring.first || \"<<\",\n\t\t\t\toffset_value : 0,\n\t\t\t\ttype \t\t : \"navigator\",\n\t\t\t\tactive \t\t : (offset>=limit) ? true : false,\n\t\t\t\tid \t\t\t : 'first'\n\t\t\t})\n\n\t\t// prev\t\t\t\n\t\t\tar_nodes.push({\n\t\t\t\tlabel \t\t : tstring.prev || \"Prev\",\n\t\t\t\toffset_value : (offset - limit)>0 ? (offset - limit) : 0,\n\t\t\t\ttype \t\t : \"navigator\",\n\t\t\t\tactive \t\t : (offset>=limit) ? true : false,\n\t\t\t\tid \t\t\t : 'previous'\n\t\t\t})\t\t\t\n\n\t\t// intermediate\n\t\t\tconst n_pages \t\t= Math.ceil(total / limit)\n\t\t\tconst current_page \t= Math.ceil(offset/limit)+1\n\t\t\tlet n_pages_group \t= Math.ceil(n_nodes / 2)\n\t\t\t\n\t\t\tif (current_page<=n_pages_group) {\n\t\t\t\tn_pages_group = (n_pages_group*2) -current_page+1\n\t\t\t}\n\n\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\tconsole.log(\"current_page:\",current_page, \"total:\",total, \"n_pages\",n_pages, \"limit:\",limit, \"offset:\",offset,\"n_nodes:\",n_nodes,\"n_pages_group:\",n_pages_group);\n\t\t\t}\t\t\t\n\t\t\tfor (var i = 1; i <= n_pages; i++) {\t\t\t\t\n\t\t\t\t//if ( i < (current_page-n_pages_group) || i > (current_page+n_pages_group)) {\n\t\t\t\t//\tcontinue\n\t\t\t\t//}\n\t\t\t\t\n\t\t\t\t//if (i > (n_pages_group) && i < (n_pages-n_pages_group)) {\t\t\n\t\t\t\t//\tcontinue;\n\t\t\t\t//}\t\n\n\t\t\t\tconst selected \t= ((i-1)===(offset/limit)) ? true : false; // offset===((i+1) * limit) ? true : false\t\t\t\t\n\t\t\t\tconst active \t= !selected\n\t\t\t\n\t\t\t\t// middle extra ...\n\t\t\t\t\t//if (i===(current_page+1)) {\n\t\t\t\t\t//\tar_nodes.push({\n\t\t\t\t\t//\t\tlabel \t\t : \"...\",\n\t\t\t\t\t//\t\toffset_value : null,\n\t\t\t\t\t//\t\ttype \t\t : \"extra\",\n\t\t\t\t\t//\t\tactive \t\t : false,\n\t\t\t\t\t//\t\tselected \t : false\n\t\t\t\t\t//\t})\n\t\t\t\t\t//}\n\n\t\t\t\tconst offset_value = ((i-1) * limit) \n\n\t\t\t\tif( \t(i>=(current_page-n_pages_group) && i<=current_page)\n\t\t\t\t\t|| \t(i>=(current_page-n_pages_group) && i<=(current_page+n_pages_group)) \n\t\t\t\t\t) {\n\n\t\t\t\t\tar_nodes.push({\n\t\t\t\t\t\tlabel \t\t : i,\n\t\t\t\t\t\toffset_value : offset_value,\n\t\t\t\t\t\ttype \t\t : \"page\",\n\t\t\t\t\t\tselected \t : selected,\n\t\t\t\t\t\tactive \t\t : active,\t\t\t\t\t\t\n\t\t\t\t\t\tid \t\t\t : i\n\t\t\t\t\t})\n\t\t\t\t}\t\t\t\t\n\t\t\t}\n\n\t\t// next\n\t\t\tar_nodes.push({\n\t\t\t\tlabel \t\t : tstring.next || \"Next\",\n\t\t\t\toffset_value : offset + limit, // (n_pages_group+1) * limit,//\n\t\t\t\ttype \t\t : \"navigator\",\n\t\t\t\tactive \t\t : (offset < (total-limit)) ? true : false,\n\t\t\t\tid \t\t\t : 'next'\n\t\t\t})\n\n\t\t// last\n\t\t\tar_nodes.push({\n\t\t\t\tlabel \t\t : tstring.last || \">>\",\n\t\t\t\toffset_value : (n_pages-1) * limit,\n\t\t\t\ttype \t\t : \"navigator\",\n\t\t\t\tactive \t\t : (offset < (total-limit)) ? true : false,\n\t\t\t\tid \t\t\t : 'last'\n\t\t\t})\t\n\n\t\t// response object\n\t\t\tconst response = {\n\t\t\t\ttotal \t\t  : total,\n\t\t\t\tlimit \t\t  : limit,\n\t\t\t\toffset \t\t  : offset,\n\t\t\t\tnodes \t\t  : n_nodes,\n\t\t\t\tn_pages \t  : n_pages,\n\t\t\t\tn_pages_group : n_pages_group,\n\t\t\t\tcurrent_page  : current_page,\n\t\t\t\tar_nodes \t  : ar_nodes\t\t\t\n\t\t\t}\n\n\t\t// debug\n\t\t\tif(SHOW_DEBUG===true) {\n\t\t\t\tconsole.log(\"++ build_page_nodes response:\",response);\n\t\t\t}\n\n\t\treturn response\n\t},//end build_page_nodes\n\n\n\n\t/**\n\t* BUILD_PAGINATOR_HTML\n\t* Builds html of paginator from page_nodes\n\t*/\n\tbuild_paginator_html : function(page_nodes_data, container, goto_url) {\n\n\t\t// wrapper ul\n\t\t\tconst wrapper_ul  = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"ul\",\n\t\t\t\t\tclass_name \t\t: \"paginator_wrapper\",\n\t\t\t\t\tparent \t\t\t: container\n\t\t\t\t})\n\n\t\t// iterate nodes\n\t\t\tconst ar_nodes \t\t  = page_nodes_data.ar_nodes\n\t\t\tconst ar_nodes_length = ar_nodes.length\n\t\t\tfor (let i = 0; i < ar_nodes_length; i++) {\n\t\t\t\tconst node = ar_nodes[i]\n\n\t\t\t\tlet class_name \t= \"\"\n\t\t\t\tlet label \t\t= node.label\n\t\t\t\tswitch(node.type){\n\t\t\t\t\tcase \"navigator\":\t\t\t\t\t\t\n\t\t\t\t\t\tclass_name = node.type + \"\"\t\t\t\t\t\t\t\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"page\":\n\t\t\t\t\t\tclass_name = node.type + \"\"\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (node.selected===true) {\n\t\t\t\t\tclass_name += \" selected\"\n\t\t\t\t}\n\n\t\t\t\tconst li  = common.create_dom_element({\n\t\t\t\t\telement_type \t: \"li\",\n\t\t\t\t\tclass_name \t\t: class_name,\n\t\t\t\t\ttext_content \t: label,\n\t\t\t\t\tparent \t\t\t: wrapper_ul\n\t\t\t\t})\n\n\t\t\t\t// link\n\t\t\t\t\tif (node.active===true) {\n\t\t\t\t\t\tconst method = typeof goto_url!==\"undefined\" ? goto_url : \"paginator.goto_url\"\n\t\t\t\t\t\tli.addEventListener(\"click\",function(e){\n\n\t\t\t\t\t\t\treturn window[method]({\n\t\t\t\t\t\t\t\toffset \t: node.offset_value,\n\t\t\t\t\t\t\t\ttotal \t: page_nodes_data.total\n\t\t\t\t\t\t\t})\n\n\t\t\t\t\t\t},false)\n\t\t\t\t\t\t//const a  = common.create_dom_element({\n\t\t\t\t\t\t//\telement_type \t: \"a\",\n\t\t\t\t\t\t//\tclass_name \t\t: \"\",\n\t\t\t\t\t\t//\ttext_content \t: label,\n\t\t\t\t\t\t//\tparent \t\t\t: wrapper_ul\n\t\t\t\t\t\t//})\n\t\t\t\t\t}\n\t\t\t}\n\n\n\n\t\treturn wrapper_ul\n\t},//end build_paginator_html\n\n\n\n\tgoto_url : function(options) {\n\n\t\tconst total  = options.total\n\t\tconst offset = options.offset\n\n\t\tconst url = \"../?total=\" + total + \"&offset=\" + offset\n\n\t\twindow.location.href = url;\n\n\t\treturn true\n\t},//end goto_url\n\n\n}//end paginator"]}