class image_gallery{constructor(t){this.preButton=null,this.nextButton=null,this.popup=null,this.img1=null,this.img2=null,this.caption=null,this.galleryNode=t.galleryNode,this.galleryLength=null,this.currentIndex=0,this.galleryNode.addEventListener("click",(function(e){"IMG"==e.target.tagName&&(e.preventDefault(),e.stopPropagation(),image_gallery.prototype.OpenGallery(e,t.galleryNode))}))}OpenGallery(t,e){let i=t;const n=i.target.attributes.title.textContent;let l;l=i.target.dataset.caption?i.target.dataset.caption:"";let s=e.getElementsByTagName("a");const a=image_gallery.prototype.ParseGallery(s);for(let t=0;t<a.length;t++)if(a[t][0].children[0].attributes.title.textContent==n){this.currentIndex=t;break}this.popup=document.createRange().createContextualFragment('<div id="popup-gallery"><div id="gallery-wrapper"><div id="images-wrapper"><img id="img1" src=""><img id="img2" src=""></div><div id="caption-wrapper"><p>'+l+'</p></div><div class="nav-button" id="pre-button"></div><div class="nav-button" id="next-button"></div></div></div>'),this.img1=this.popup.getElementById("img1"),this.img2=this.popup.getElementById("img2"),this.img1.src=a[this.currentIndex][0].attributes.href.value,this.img2.src=a[this.currentIndex][1].attributes.href.value,this.caption=this.popup.getElementById("caption-wrapper").getElementsByTagName("p")[0],this.preButton=this.popup.getElementById("pre-button"),this.nextButton=this.popup.getElementById("next-button"),this.preButton.addEventListener("click",(function(){image_gallery.prototype.SwitchPic(a,-1)})),this.nextButton.addEventListener("click",(function(){image_gallery.prototype.SwitchPic(a,1)})),this.galleryLength=a.length,this.CheckNavButtons(),document.getElementsByTagName("body")[0].appendChild(this.popup),document.getElementById("popup-gallery").addEventListener("click",this.CloseGallery)}ParseGallery(t){let e=[].slice.call(t);e=e.filter(t=>t.children.length>0),e=e.filter(t=>t.children[0].title.length>0);let i=[];for(let t=0;t<e.length;t++){const n=e[t].children[0].attributes.title.textContent,l=e.filter(t=>t.children[0].attributes.title.textContent==n);if(i.length>0){null==i.find(t=>t[0].children[0].attributes.title.textContent==n)&&i.push(l)}else i.push(l)}return i}CloseGallery(t){t.target.classList.contains("nav-button")?t.stopPropagation():document.getElementById("popup-gallery").remove()}CheckNavButtons(){1==this.galleryLength?(this.preButton.classList.add("hidden"),this.nextButton.classList.add("hidden")):0==this.currentIndex?(this.preButton.classList.add("hidden"),this.nextButton.classList.remove("hidden")):this.galleryLength-1==this.currentIndex?(this.preButton.classList.remove("hidden"),this.nextButton.classList.add("hidden")):(this.preButton.classList.remove("hidden"),this.nextButton.classList.remove("hidden"))}SwitchPic(t,e){this.currentIndex+=e;let i=t[this.currentIndex];this.img1.src=i[0].attributes.href.value,this.img2.src=i[1].attributes.href.value,i[0].children[0].dataset.caption?this.caption.textContent=i[0].children[0].dataset.caption:this.caption.textContent="",this.CheckNavButtons()}}